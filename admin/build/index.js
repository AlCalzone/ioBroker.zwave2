import{c as M}from"./chunk-R35OZD5L.js";import{$ as H,A as ne,B as ae,O as se,P as le,T as E,Z as pe,a as K,b as i,c as y,ca as ce,d as oe,e as N,f as U,fa as C,ga as de,ha as ue,ia as me,j as D,ja as fe,ka as ge,la as ye,ma as he,na as be,oa as ve,pa as ke,q as j,r as z,t as ie}from"./chunk-BU5BTACA.js";var V=K(T=>{"use strict";var Se=U(),Ce=N();Object.defineProperty(T,"__esModule",{value:!0});T.default=void 0;var Te=Ce(y()),we=Se(E()),Ie=(0,we.default)(Te.createElement("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"}),"Sync");T.default=Ie});var J=K(w=>{"use strict";var Ae=U(),Be=N();Object.defineProperty(w,"__esModule",{value:!0});w.default=void 0;var _e=Be(y()),qe=Ae(E()),Ge=(0,qe.default)(_e.createElement("path",{d:"M19 2H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h4l3 3 3-3h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-6 16h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 11.9 13 12.5 13 14h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"}),"LiveHelp");w.default=Ge});var e=i(y()),R=i(oe()),ee=i(pe()),I=i(H()),x=i(D()),c=i(ae());var L=i(se()),h=i(j()),te=i(V()),re=i(z()),b=i(ie()),v=i(ne());var a=i(y()),p=i(H()),W=i(ce()),O=i(z()),$=i(D()),g=i(j());var xe=(0,$.makeStyles)(r=>({button:{margin:r.spacing(1,0)}})),Y=()=>{let{alive:r,connected:u}=(0,p.useAdapter)(),{translate:l}=(0,p.useI18n)(),m=xe(),{namespace:n}=(0,p.useGlobals)(),A=C(),[k]=(0,p.useIoBrokerState)({id:`${n}.info.configUpdate`}),[s]=(0,p.useIoBrokerState)({id:`${n}.info.configVersion`}),[B]=(0,p.useIoBrokerState)({id:`${n}.info.configUpdating`}),[_,S]=a.default.useState(!1);async function q(){S(!0);let G=await A.updateConfig();S(!1),G||alert(l("Updating the configuration DB failed!"))}if(!r||!u)return a.default.createElement(a.default.Fragment,null);if(k){if(_||B)return a.default.createElement(g.default,{variant:"body2"},l("Updating configuration DB - please wait..."))}else return a.default.createElement(a.default.Fragment,null,a.default.createElement(g.default,{variant:"body2"},l("Configuration DB is up to date"),a.default.createElement("br",null),l("Installed version"),": ",s));return a.default.createElement("div",null,a.default.createElement(g.default,{variant:"body2"},l("Update for configuration DB available"),": ",k),a.default.createElement(g.default,{variant:"body2"},l("Installed version"),": ",s),a.default.createElement(O.default,{className:m.button,variant:"contained",color:"primary",onClick:()=>q(),startIcon:a.default.createElement(W.default,null)},l("Update configuration DB")),a.default.createElement(g.default,{variant:"body2"},l("config update disclaimer")))};var Q=i(le()),P=i(y()),X=i(J()),Z=i(D()),De=(0,Z.makeStyles)(r=>({tooltip:{verticalAlign:"middle"},icon:{color:r.palette.text.hint,cursor:"help"}})),F=r=>{let u=De();return P.default.createElement(Q.default,{title:r.tooltip,className:u.tooltip},P.default.createElement(X.default,{className:u.icon}))};var Pe=(0,x.makeStyles)(r=>(0,x.createStyles)({root:{display:"flex",flexGrow:1,flexFlow:"column nowrap",gap:r.spacing(8)},keyGrid:{display:"grid",gridTemplateColumns:"1fr auto",alignItems:"center",gap:r.spacing(2)},keyGridLabel:{marginTop:r.spacing(2),gridColumn:"1 / span 2"},keyGrid_TextField:{flexGrow:1},keyGrid_Button:{flexGrow:0}})),Fe=[[2,"networkKey_S2_AccessControl","S2 Access Control"],[1,"networkKey_S2_Authenticated","S2 Authenticated"],[0,"networkKey_S2_Unauthenticated","S2 Unauthenticated"],[7,"networkKey_S0","S0 (Legacy)"]],Le=e.default.memo(()=>{let{settings:r,originalSettings:u,setSettings:l}=(0,I.useSettings)(),m=Pe(),{translate:n,language:A}=(0,I.useI18n)(),k=C(),s=(o,t)=>{l(f=>({...f,[o]:t}))},B=o=>{if(!r[o]||r[o]!==u[o]||confirm(n("network key confirm"))){let t=new Uint8Array(16);window.crypto.getRandomValues(t);let f=[...t].map(d=>d.toString(16).padStart(2,"0")).join("");s(o,f)}},_=o=>{let t=r[o];!t||/[0-9a-fA-F]{32}/.test(t)||(alert(n("Invalid network key")),s(o,u[o]))},S=(o,t)=>{t.stopPropagation(),t.preventDefault();let d=(t.clipboardData||window.clipboardData).getData("Text");d&&(d=d.trim().replace(/0x/g,"").replace(/[^0-9a-fA-F]+/g,"").toLowerCase().slice(0,32)),s(o,d)},[q,G]=e.default.useState([]);return e.default.useEffect(()=>{k.listSerialPorts().then(o=>{o.length&&G(o)}).catch(o=>{console.error(`Cannot retrieve serial ports: ${o}`)})},[]),e.default.createElement("div",{className:m.root},e.default.createElement(c.default,{container:!0,spacing:8},e.default.createElement(c.default,{container:!0,item:!0,xs:12,sm:!0,spacing:2,direction:"column"},e.default.createElement(c.default,{item:!0,xs:!0},e.default.createElement(M,{options:q,freeSolo:!0,forcePopupIcon:!0,noOptionsText:"",autoSelect:!0,clearOnBlur:!0,onChange:(o,t)=>s("serialport",t!=null?t:""),renderInput:o=>e.default.createElement(L.default,{...o,label:n("Select serial port"),margin:"normal"}),value:r.serialport}),e.default.createElement(h.default,{variant:"body2"},n("hosted port tip"))),e.default.createElement(c.default,{item:!0,xs:!0},e.default.createElement(v.default,{label:n("Disable restarting the controller on startup"),control:e.default.createElement(b.default,{checked:r.disableSoftReset,onChange:(o,t)=>s("disableSoftReset",t)})}),e.default.createElement(h.default,{variant:"body2"},n("You can try this if the adapter does not start after updating to 2.3 or higher."),"\xA0",e.default.createElement("a",{href:A==="de"?"https://github.com/AlCalzone/ioBroker.zwave2/blob/master/docs/de/bei-problemen.md#der-adapter-startet-nach-update-auf-version-23-oder-h\xF6her-nicht":"https://github.com/AlCalzone/ioBroker.zwave2/blob/master/docs/en/troubleshooting.md#the-adapter-does-not-start-after-updating-to-version-23-or-higher",target:"_blank"},n("But read this first!")))),e.default.createElement(c.default,{item:!0,xs:!0},e.default.createElement(v.default,{label:n("Write a detailed logfile"),control:e.default.createElement(b.default,{checked:r.writeLogFile,onChange:(o,t)=>s("writeLogFile",t)})}),e.default.createElement(h.default,{variant:"body2"},n("This should only be set for debugging purposes."))),e.default.createElement(c.default,{item:!0,xs:!0},e.default.createElement(v.default,{label:n("Preserve state names"),control:e.default.createElement(b.default,{checked:r.preserveStateNames,onChange:(o,t)=>s("preserveStateNames",t)})})),e.default.createElement(c.default,{item:!0,xs:!0},e.default.createElement(v.default,{label:e.default.createElement(e.default.Fragment,null,n("Legacy switch compatibility")," ",e.default.createElement(F,{tooltip:n("switch compat tooltip")})),control:e.default.createElement(b.default,{checked:r.switchCompat,onChange:(o,t)=>s("switchCompat",t)})}))),e.default.createElement(c.default,{item:!0,xs:12,sm:7,className:m.keyGrid},e.default.createElement(h.default,{variant:"body1",className:m.keyGridLabel},n("Network keys for secure communication"),e.default.createElement(F,{tooltip:n("network key tooltip")})),Fe.map(([o,t,f])=>e.default.createElement(e.default.Fragment,{key:`security-class-${o}`},e.default.createElement(L.default,{className:m.keyGrid_TextField,label:f,inputProps:{maxLength:32,style:{fontFamily:"monospace"},onPaste:S.bind(void 0,t)},fullWidth:!0,InputLabelProps:{shrink:!!r[t]},value:r[t],onChange:d=>s(t,d.target.value),onBlur:()=>_(t)}),e.default.createElement(re.default,{className:m.keyGrid_Button,variant:"contained",color:"primary",startIcon:e.default.createElement(te.default,null),onClick:()=>B(t),style:{whiteSpace:"nowrap"}},n("Generate key")))))),e.default.createElement(Y,null))}),Ke=r=>{r.networkKey&&(r.networkKey_S0=r.networkKey,delete r.networkKey)},Ne={en:de(),de:ue(),ru:me(),pt:fe(),nl:ge(),fr:ye(),it:he(),es:be(),pl:ve(),"zh-cn":ke()},Ue=()=>e.default.createElement(ee.SettingsApp,{name:"zwave2",afterLoad:Ke,translations:Ne},e.default.createElement(Le,null));R.default.render(e.default.createElement(Ue,null),document.getElementById("root"));
//# sourceMappingURL=index.js.map
