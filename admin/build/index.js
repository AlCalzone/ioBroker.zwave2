import{b as W}from"./chunk-BAHWQ7KE.js";import{Aa as O,Ca as w,Da as $,Ea as pe,Ha as T,Ia as de,Ja as ce,Ka as me,La as ue,Ma as fe,Na as ge,Oa as ye,Pa as ve,Qa as he,Ra as ke,T as z,Y as E,a as L,aa as M,b as n,c as y,d as re,e as K,ia as ie,ka as ne,la as ae,ma as se,na as le,o as N,ta as H,ua as C,x as U,y as f,za as V}from"./chunk-LQYDNH5M.js";var j=L(x=>{"use strict";var be=K(),Se=N();Object.defineProperty(x,"__esModule",{value:!0});x.default=void 0;var Ce=Se(y()),we=be(M()),Te=(0,we.default)(Ce.createElement("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"}),"Sync");x.default=Te});var X=L(_=>{"use strict";var _e=K(),Be=N();Object.defineProperty(_,"__esModule",{value:!0});_.default=void 0;var Ae=Be(y()),Ie=_e(M()),Ge=(0,Ie.default)(Ae.createElement("path",{d:"M19 2H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h4l3 3 3-3h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-6 16h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 11.9 13 12.5 13 14h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"}),"LiveHelp");_.default=Ge});var e=n(y()),ee=n(re());var p=n(ie());var F=n(se()),v=n(E()),te=n(j()),oe=n(z()),h=n(ae()),k=n(le());var a=n(y());var Y=n(pe()),J=n(z());var g=n(E());var xe=f(o=>({button:{margin:o.spacing(1,0)}})),Q=()=>{let{alive:o,connected:c}=$(),{translate:l}=C(),m=xe(),{namespace:i}=H(),B=T(),[b]=w({id:`${i}.info.configUpdate`}),[s]=w({id:`${i}.info.configVersion`}),[A]=w({id:`${i}.info.configUpdating`}),[I,S]=a.default.useState(!1);async function G(){S(!0);let q=await B.updateConfig();S(!1),q||alert(l("Updating the configuration DB failed!"))}if(!o||!c)return a.default.createElement(a.default.Fragment,null);if(b){if(I||A)return a.default.createElement(g.default,{variant:"body2"},l("Updating configuration DB - please wait..."))}else return a.default.createElement(a.default.Fragment,null,a.default.createElement(g.default,{variant:"body2"},l("Configuration DB is up to date"),a.default.createElement("br",null),l("Installed version"),": ",s));return a.default.createElement("div",null,a.default.createElement(g.default,{variant:"body2"},l("Update for configuration DB available"),": ",b),a.default.createElement(g.default,{variant:"body2"},l("Installed version"),": ",s),a.default.createElement(J.default,{className:m.button,variant:"contained",color:"primary",onClick:()=>G(),startIcon:a.default.createElement(Y.default,null)},l("Update configuration DB")),a.default.createElement(g.default,{variant:"body2"},l("config update disclaimer")))};var Z=n(ne()),D=n(y()),R=n(X());var qe=f(o=>({tooltip:{verticalAlign:"middle"},icon:{color:o.palette.text.hint,cursor:"help"}})),P=o=>{let c=qe();return D.default.createElement(Z.default,{title:o.tooltip,className:c.tooltip},D.default.createElement(R.default,{className:c.icon}))};var De=f(o=>U({root:{display:"flex",flexGrow:1,flexFlow:"column nowrap",gap:o.spacing(8)},keyGrid:{display:"grid",gridTemplateColumns:"1fr auto",alignItems:"center",gap:o.spacing(2)},keyGridLabel:{marginTop:o.spacing(2),gridColumn:"1 / span 2"},keyGrid_TextField:{flexGrow:1},keyGrid_Button:{flexGrow:0}})),Pe=[[2,"networkKey_S2_AccessControl","S2 Access Control"],[1,"networkKey_S2_Authenticated","S2 Authenticated"],[0,"networkKey_S2_Unauthenticated","S2 Unauthenticated"],[7,"networkKey_S0","S0 (Legacy)"]],Fe=e.default.memo(()=>{let{settings:o,originalSettings:c,setSettings:l}=V(),m=De(),{translate:i,language:B}=C(),b=T(),s=(r,t)=>{l(u=>({...u,[r]:t}))},A=r=>{if(!o[r]||o[r]!==c[r]||confirm(i("network key confirm"))){let t=new Uint8Array(16);window.crypto.getRandomValues(t);let u=[...t].map(d=>d.toString(16).padStart(2,"0")).join("");s(r,u)}},I=r=>{let t=o[r];!t||/[0-9a-fA-F]{32}/.test(t)||(alert(i("Invalid network key")),s(r,c[r]))},S=(r,t)=>{t.stopPropagation(),t.preventDefault();let d=(t.clipboardData||window.clipboardData).getData("Text");d&&(d=d.trim().replace(/0x/g,"").replace(/[^0-9a-fA-F]+/g,"").toLowerCase().slice(0,32)),s(r,d)},[G,q]=e.default.useState([]);return e.default.useEffect(()=>{b.listSerialPorts().then(r=>{r.length&&q(r)}).catch(r=>{console.error(`Cannot retrieve serial ports: ${r}`)})},[]),e.default.createElement("div",{className:m.root},e.default.createElement(p.default,{container:!0,spacing:8},e.default.createElement(p.default,{container:!0,item:!0,xs:12,sm:!0,spacing:2,direction:"column"},e.default.createElement(p.default,{item:!0,xs:!0},e.default.createElement(W,{options:G,freeSolo:!0,forcePopupIcon:!0,noOptionsText:"",autoSelect:!0,clearOnBlur:!0,onChange:(r,t)=>s("serialport",t!=null?t:""),renderInput:r=>e.default.createElement(F.default,{...r,label:i("Select serial port"),margin:"normal"}),value:o.serialport}),e.default.createElement(v.default,{variant:"body2"},i("hosted port tip"))),e.default.createElement(p.default,{item:!0,xs:!0},e.default.createElement(k.default,{label:i("Disable restarting the controller on startup"),control:e.default.createElement(h.default,{checked:o.disableSoftReset,onChange:(r,t)=>s("disableSoftReset",t)})}),e.default.createElement(v.default,{variant:"body2"},i("You can try this if the adapter does not start after updating to 2.3 or higher."),"\xA0",e.default.createElement("a",{href:B==="de"?"https://github.com/AlCalzone/ioBroker.zwave2/blob/master/docs/de/bei-problemen.md#der-adapter-startet-nach-update-auf-version-23-oder-h\xF6her-nicht":"https://github.com/AlCalzone/ioBroker.zwave2/blob/master/docs/en/troubleshooting.md#the-adapter-does-not-start-after-updating-to-version-23-or-higher",target:"_blank"},i("But read this first!")))),e.default.createElement(p.default,{item:!0,xs:!0},e.default.createElement(k.default,{label:i("Write a detailed logfile"),control:e.default.createElement(h.default,{checked:o.writeLogFile,onChange:(r,t)=>s("writeLogFile",t)})}),e.default.createElement(v.default,{variant:"body2"},i("This should only be set for debugging purposes."))),e.default.createElement(p.default,{item:!0,xs:!0},e.default.createElement(k.default,{label:i("Preserve state names"),control:e.default.createElement(h.default,{checked:o.preserveStateNames,onChange:(r,t)=>s("preserveStateNames",t)})})),e.default.createElement(p.default,{item:!0,xs:!0},e.default.createElement(k.default,{label:e.default.createElement(e.default.Fragment,null,i("Legacy switch compatibility")," ",e.default.createElement(P,{tooltip:i("switch compat tooltip")})),control:e.default.createElement(h.default,{checked:o.switchCompat,onChange:(r,t)=>s("switchCompat",t)})}))),e.default.createElement(p.default,{item:!0,xs:12,sm:7,className:m.keyGrid},e.default.createElement(v.default,{variant:"body1",className:m.keyGridLabel},i("Network keys for secure communication"),e.default.createElement(P,{tooltip:i("network key tooltip")})),Pe.map(([r,t,u])=>e.default.createElement(e.default.Fragment,{key:`security-class-${r}`},e.default.createElement(F.default,{className:m.keyGrid_TextField,label:u,inputProps:{maxLength:32,style:{fontFamily:"monospace"},onPaste:S.bind(void 0,t)},fullWidth:!0,InputLabelProps:{shrink:!!o[t]},value:o[t],onChange:d=>s(t,d.target.value),onBlur:()=>I(t)}),e.default.createElement(oe.default,{className:m.keyGrid_Button,variant:"contained",color:"primary",startIcon:e.default.createElement(te.default,null),onClick:()=>A(t),style:{whiteSpace:"nowrap"}},i("Generate key")))))),e.default.createElement(Q,null))}),Le=o=>{o.networkKey&&(o.networkKey_S0=o.networkKey,delete o.networkKey)},Ke={en:de(),de:ce(),ru:me(),pt:ue(),nl:fe(),fr:ge(),it:ye(),es:ve(),pl:he(),"zh-cn":ke()},Ne=()=>e.default.createElement(O,{name:"zwave2",afterLoad:Le,translations:Ke},e.default.createElement(Fe,null));ee.default.render(e.default.createElement(Ne,null),document.getElementById("root"));
//# sourceMappingURL=index.js.map
