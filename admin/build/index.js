import{c as V}from"./chunk-2HSI7MH2.js";import{$ as H,A as ne,B as ae,O as se,P as le,T as M,Z as pe,a as K,b as i,c as y,ca as de,d as re,e as N,f as U,fa as C,ga as ce,ha as me,ia as ue,j as D,ja as fe,ka as ge,la as ye,ma as ve,na as he,oa as ke,pa as be,q as z,r as E,t as ie}from"./chunk-7ME4JAFG.js";var O=K(w=>{"use strict";var Se=U(),Ce=N();Object.defineProperty(w,"__esModule",{value:!0});w.default=void 0;var we=Ce(y()),Te=Se(M()),xe=(0,Te.default)(we.createElement("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"}),"Sync");w.default=xe});var J=K(T=>{"use strict";var Be=U(),Ae=N();Object.defineProperty(T,"__esModule",{value:!0});T.default=void 0;var Ie=Ae(y()),Ge=Be(M()),qe=(0,Ge.default)(Ie.createElement("path",{d:"M19 2H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h4l3 3 3-3h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-6 16h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 11.9 13 12.5 13 14h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"}),"LiveHelp");T.default=qe});var e=i(y()),R=i(re()),ee=i(pe()),x=i(H()),_=i(D()),d=i(ae());var L=i(se()),v=i(z()),te=i(O()),oe=i(E()),h=i(ie()),k=i(ne());var a=i(y()),p=i(H()),$=i(de()),W=i(E()),j=i(D()),g=i(z());var _e=(0,j.makeStyles)(o=>({button:{margin:o.spacing(1,0)}})),Y=()=>{let{alive:o,connected:m}=(0,p.useAdapter)(),{translate:l}=(0,p.useI18n)(),u=_e(),{namespace:n}=(0,p.useGlobals)(),B=C(),[b]=(0,p.useIoBrokerState)({id:`${n}.info.configUpdate`}),[s]=(0,p.useIoBrokerState)({id:`${n}.info.configVersion`}),[A]=(0,p.useIoBrokerState)({id:`${n}.info.configUpdating`}),[I,S]=a.default.useState(!1);async function G(){S(!0);let q=await B.updateConfig();S(!1),q||alert(l("Updating the configuration DB failed!"))}if(!o||!m)return a.default.createElement(a.default.Fragment,null);if(b){if(I||A)return a.default.createElement(g.default,{variant:"body2"},l("Updating configuration DB - please wait..."))}else return a.default.createElement(a.default.Fragment,null,a.default.createElement(g.default,{variant:"body2"},l("Configuration DB is up to date"),a.default.createElement("br",null),l("Installed version"),": ",s));return a.default.createElement("div",null,a.default.createElement(g.default,{variant:"body2"},l("Update for configuration DB available"),": ",b),a.default.createElement(g.default,{variant:"body2"},l("Installed version"),": ",s),a.default.createElement(W.default,{className:u.button,variant:"contained",color:"primary",onClick:()=>G(),startIcon:a.default.createElement($.default,null)},l("Update configuration DB")),a.default.createElement(g.default,{variant:"body2"},l("config update disclaimer")))};var Q=i(le()),P=i(y()),X=i(J()),Z=i(D()),De=(0,Z.makeStyles)(o=>({tooltip:{verticalAlign:"middle"},icon:{color:o.palette.text.hint,cursor:"help"}})),F=o=>{let m=De();return P.default.createElement(Q.default,{title:o.tooltip,className:m.tooltip},P.default.createElement(X.default,{className:m.icon}))};var Pe=(0,_.makeStyles)(o=>(0,_.createStyles)({root:{display:"flex",flexGrow:1,flexFlow:"column nowrap",gap:o.spacing(8)},keyGrid:{display:"grid",gridTemplateColumns:"1fr auto",alignItems:"center",gap:o.spacing(2)},keyGridLabel:{marginTop:o.spacing(2),gridColumn:"1 / span 2"},keyGrid_TextField:{flexGrow:1},keyGrid_Button:{flexGrow:0}})),Fe=[[2,"networkKey_S2_AccessControl","S2 Access Control"],[1,"networkKey_S2_Authenticated","S2 Authenticated"],[0,"networkKey_S2_Unauthenticated","S2 Unauthenticated"],[7,"networkKey_S0","S0 (Legacy)"]],Le=e.default.memo(()=>{let{settings:o,originalSettings:m,setSettings:l}=(0,x.useSettings)(),u=Pe(),{translate:n,language:B}=(0,x.useI18n)(),b=C(),s=(r,t)=>{l(f=>({...f,[r]:t}))},A=r=>{if(!o[r]||o[r]!==m[r]||confirm(n("network key confirm"))){let t=new Uint8Array(16);window.crypto.getRandomValues(t);let f=[...t].map(c=>c.toString(16).padStart(2,"0")).join("");s(r,f)}},I=r=>{let t=o[r];!t||/[0-9a-fA-F]{32}/.test(t)||(alert(n("Invalid network key")),s(r,m[r]))},S=(r,t)=>{t.stopPropagation(),t.preventDefault();let c=(t.clipboardData||window.clipboardData).getData("Text");c&&(c=c.trim().replace(/0x/g,"").replace(/[^0-9a-fA-F]+/g,"").toLowerCase().slice(0,32)),s(r,c)},[G,q]=e.default.useState([]);return e.default.useEffect(()=>{b.listSerialPorts().then(r=>{r.length&&q(r)}).catch(r=>{console.error(`Cannot retrieve serial ports: ${r}`)})},[]),e.default.createElement("div",{className:u.root},e.default.createElement(d.default,{container:!0,spacing:8},e.default.createElement(d.default,{container:!0,item:!0,xs:12,sm:!0,spacing:2,direction:"column"},e.default.createElement(d.default,{item:!0,xs:!0},e.default.createElement(V,{options:G,freeSolo:!0,forcePopupIcon:!0,noOptionsText:"",autoSelect:!0,clearOnBlur:!0,onChange:(r,t)=>s("serialport",t!=null?t:""),renderInput:r=>e.default.createElement(L.default,{...r,label:n("Select serial port"),margin:"normal"}),value:o.serialport}),e.default.createElement(v.default,{variant:"body2"},n("hosted port tip"))),e.default.createElement(d.default,{item:!0,xs:!0},e.default.createElement(k.default,{label:n("Disable restarting the controller on startup"),control:e.default.createElement(h.default,{checked:o.disableSoftReset,onChange:(r,t)=>s("disableSoftReset",t)})}),e.default.createElement(v.default,{variant:"body2"},n("You can try this if the adapter does not start after updating to 2.3 or higher."),"\xA0",e.default.createElement("a",{href:B==="de"?"https://github.com/AlCalzone/ioBroker.zwave2/blob/master/docs/de/bei-problemen.md#der-adapter-startet-nach-update-auf-version-23-oder-h\xF6her-nicht":"https://github.com/AlCalzone/ioBroker.zwave2/blob/master/docs/en/troubleshooting.md#the-adapter-does-not-start-after-updating-to-version-23-or-higher",target:"_blank"},n("But read this first!")))),e.default.createElement(d.default,{item:!0,xs:!0},e.default.createElement(k.default,{label:n("Write a detailed logfile"),control:e.default.createElement(h.default,{checked:o.writeLogFile,onChange:(r,t)=>s("writeLogFile",t)})}),e.default.createElement(v.default,{variant:"body2"},n("This should only be set for debugging purposes."))),e.default.createElement(d.default,{item:!0,xs:!0},e.default.createElement(k.default,{label:n("Preserve state names"),control:e.default.createElement(h.default,{checked:o.preserveStateNames,onChange:(r,t)=>s("preserveStateNames",t)})})),e.default.createElement(d.default,{item:!0,xs:!0},e.default.createElement(k.default,{label:e.default.createElement(e.default.Fragment,null,n("Legacy switch compatibility")," ",e.default.createElement(F,{tooltip:n("switch compat tooltip")})),control:e.default.createElement(h.default,{checked:o.switchCompat,onChange:(r,t)=>s("switchCompat",t)})}))),e.default.createElement(d.default,{item:!0,xs:12,sm:7,className:u.keyGrid},e.default.createElement(v.default,{variant:"body1",className:u.keyGridLabel},n("Network keys for secure communication"),e.default.createElement(F,{tooltip:n("network key tooltip")})),Fe.map(([r,t,f])=>e.default.createElement(e.default.Fragment,{key:`security-class-${r}`},e.default.createElement(L.default,{className:u.keyGrid_TextField,label:f,inputProps:{maxLength:32,style:{fontFamily:"monospace"},onPaste:S.bind(void 0,t)},fullWidth:!0,InputLabelProps:{shrink:!!o[t]},value:o[t],onChange:c=>s(t,c.target.value),onBlur:()=>I(t)}),e.default.createElement(oe.default,{className:u.keyGrid_Button,variant:"contained",color:"primary",startIcon:e.default.createElement(te.default,null),onClick:()=>A(t),style:{whiteSpace:"nowrap"}},n("Generate key")))))),e.default.createElement(Y,null))}),Ke=o=>{o.networkKey&&(o.networkKey_S0=o.networkKey,delete o.networkKey)},Ne={en:ce(),de:me(),ru:ue(),pt:fe(),nl:ge(),fr:ye(),it:ve(),es:he(),pl:ke(),"zh-cn":be()},Ue=()=>e.default.createElement(ee.SettingsApp,{name:"zwave2",afterLoad:Ke,translations:Ne},e.default.createElement(Le,null));R.default.render(e.default.createElement(Ue,null),document.getElementById("root"));
//# sourceMappingURL=index.js.map
