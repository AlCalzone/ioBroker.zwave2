import{$ as J,B as Cs,D as Is,E as js,G as qs,H as Do,I as ko,J as bt,K as As,L as To,M as xt,N as Ds,O as Be,P as Po,Q as ks,R as Ts,S as L,T as Ps,U as Ns,V as Ms,W as No,X as Bs,Y as Os,Z as $,_ as ve,a as M,aa as Es,b as f,ba as Fs,c as q,ca as Rs,d as vs,da as Ls,e as F,ea as zs,f as R,fa as Hs,g as vt,ga as Gs,ha as Ws,i as yt,ia as Vs,j as re,ja as $s,l as ys,m as So,n as bs,o as xs,p as Ue,q as Me,r as Co,s as ws,u as _s,v as Io,w as jo,x as qo,y as Ao,z as Ss}from"./chunk-DYD3HUWJ.js";var Bo=M(ee=>{"use strict";var Us=ee&&ee.__createBinding||(Object.create?function(e,t,r,o){o===void 0&&(o=r),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,o){o===void 0&&(o=r),e[o]=t[r]}),Ks=ee&&ee.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Ys=ee&&ee.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&Us(t,e,r);return Ks(t,e),t},Qs=ee&&ee.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]]);return r},kr=ee&&ee.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ee,"__esModule",{value:!0});ee.Dropdown=void 0;var Tr=kr(Is()),Xs=kr(js()),Zs=kr(qs()),Ke=Ys(q()),Js=e=>{let{options:t,selectedOption:r,noOptionsMessage:o,placeholder:n}=e,a=Qs(e,["options","selectedOption","noOptionsMessage","placeholder"]),i=!(!!t&&t.length)&&!!o,s;return(t==null?void 0:t.length)&&(s=r),Ke.createElement(Zs.default,Object.assign({value:s??"",displayEmpty:!0,input:Ke.createElement(Xs.default,{labelWidth:0}),margin:"dense"},a),Ke.createElement(Tr.default,{value:"",disabled:!0},n??""),t&&t.length&&t.map(({value:u,label:d})=>Ke.createElement(Tr.default,{key:u,value:u},d)),i&&Ke.createElement(Tr.default,{key:"__empty",value:"__empty",disabled:!0},o))};ee.Dropdown=Js});var Pr=M(le=>{"use strict";var el=le&&le.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(le,"__esModule",{value:!0});le.ModalDialog=le.Loader=le.Dropdown=void 0;var tl=Bo();Object.defineProperty(le,"Dropdown",{enumerable:!0,get:function(){return tl.Dropdown}});var rl=ks();Object.defineProperty(le,"Loader",{enumerable:!0,get:function(){return el(rl).default}});var ol=Ts();Object.defineProperty(le,"ModalDialog",{enumerable:!0,get:function(){return ol.ModalDialog}})});var Nr=M(_t=>{"use strict";var nl=R(),al=F();Object.defineProperty(_t,"__esModule",{value:!0});_t.default=void 0;var il=al(q()),sl=nl(L()),ll=(0,sl.default)(il.createElement("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");_t.default=ll});var Oo=M(St=>{"use strict";var ul=R(),cl=F();Object.defineProperty(St,"__esModule",{value:!0});St.default=void 0;var dl=cl(q()),fl=ul(L()),pl=(0,fl.default)(dl.createElement("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"}),"Restore");St.default=pl});var Mr=M(Ct=>{"use strict";var ml=R(),hl=F();Object.defineProperty(Ct,"__esModule",{value:!0});Ct.default=void 0;var gl=hl(q()),vl=ml(L()),yl=(0,vl.default)(gl.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteForever");Ct.default=yl});var $o=M(At=>{"use strict";var xl=R(),wl=F();Object.defineProperty(At,"__esModule",{value:!0});At.default=void 0;var _l=wl(q()),Sl=xl(L()),Cl=(0,Sl.default)(_l.createElement("path",{d:"M1 9l2 2c4.97-4.97 13.03-4.97 18 0l2-2C16.93 2.93 7.08 2.93 1 9zm8 8l3 3 3-3c-1.65-1.66-4.34-1.66-6 0zm-4-4l2 2c2.76-2.76 7.24-2.76 10 0l2-2C15.14 9.14 8.87 9.14 5 13z"}),"Wifi");At.default=Cl});var Uo=M(Dt=>{"use strict";var Il=R(),jl=F();Object.defineProperty(Dt,"__esModule",{value:!0});Dt.default=void 0;var ql=jl(q()),Al=Il(L()),Dl=(0,Al.default)(ql.createElement("path",{d:"M22.99 9C19.15 5.16 13.8 3.76 8.84 4.78l2.52 2.52c3.47-.17 6.99 1.05 9.63 3.7l2-2zm-4 4c-1.29-1.29-2.84-2.13-4.49-2.56l3.53 3.53.96-.97zM2 3.05L5.07 6.1C3.6 6.82 2.22 7.78 1 9l1.99 2c1.24-1.24 2.67-2.16 4.2-2.77l2.24 2.24C7.81 10.89 6.27 11.73 5 13v.01L6.99 15c1.36-1.36 3.14-2.04 4.92-2.06L18.98 20l1.27-1.26L3.29 1.79 2 3.05zM9 17l3 3 3-3c-1.65-1.66-4.34-1.66-6 0z"}),"WifiOff");Dt.default=Dl});var Ko=M(kt=>{"use strict";var kl=R(),Tl=F();Object.defineProperty(kt,"__esModule",{value:!0});kt.default=void 0;var Pl=Tl(q()),Nl=kl(L()),Ml=(0,Nl.default)(Pl.createElement("path",{d:"M17 1H7c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 18H7V5h10v14zM12 6.72c-1.96 0-3.5 1.52-3.5 3.47h1.75c0-.93.82-1.75 1.75-1.75s1.75.82 1.75 1.75c0 1.75-2.63 1.57-2.63 4.45h1.76c0-1.96 2.62-2.19 2.62-4.45 0-1.96-1.54-3.47-3.5-3.47zm-.88 8.8h1.76v1.76h-1.76z"}),"DeviceUnknown");kt.default=Ml});var Or=M(Tt=>{"use strict";var Bl=R(),Ol=F();Object.defineProperty(Tt,"__esModule",{value:!0});Tt.default=void 0;var El=Ol(q()),Fl=Bl(L()),Rl=(0,Fl.default)(El.createElement("path",{d:"M13 3h-2v10h2V3zm4.83 2.17l-1.42 1.42C17.99 7.86 19 9.81 19 12c0 3.87-3.13 7-7 7s-7-3.13-7-7c0-2.19 1.01-4.14 2.58-5.42L6.17 5.17C4.23 6.82 3 9.26 3 12c0 4.97 4.03 9 9 9s9-4.03 9-9c0-2.74-1.23-5.18-3.17-6.83z"}),"PowerSettingsNew");Tt.default=Rl});var yn=M(Et=>{"use strict";var Gl=R(),Wl=F();Object.defineProperty(Et,"__esModule",{value:!0});Et.default=void 0;var Vl=Wl(q()),$l=Gl(L()),Ul=(0,$l.default)(Vl.createElement("path",{d:"M19 13H5v-2h14v2z"}),"Remove");Et.default=Ul});var bn=M(Ft=>{"use strict";var Kl=R(),Yl=F();Object.defineProperty(Ft,"__esModule",{value:!0});Ft.default=void 0;var Ql=Yl(q()),Xl=Kl(L()),Zl=(0,Xl.default)(Ql.createElement("path",{d:"M15.9 5c-.17 0-.32.09-.41.23l-.07.15-5.18 11.65c-.16.29-.26.61-.26.96 0 1.11.9 2.01 2.01 2.01.96 0 1.77-.68 1.96-1.59l.01-.03L16.4 5.5c0-.28-.22-.5-.5-.5zM1 9l2 2c2.88-2.88 6.79-4.08 10.53-3.62l1.19-2.68C9.89 3.84 4.74 5.27 1 9zm20 2l2-2c-1.64-1.64-3.55-2.82-5.59-3.57l-.53 2.82c1.5.62 2.9 1.53 4.12 2.75zm-4 4l2-2c-.8-.8-1.7-1.42-2.66-1.89l-.55 2.92c.42.27.83.59 1.21.97zM5 13l2 2c1.13-1.13 2.56-1.79 4.03-2l1.28-2.88c-2.63-.08-5.3.87-7.31 2.88z"}),"NetworkCheck");Ft.default=Zl});var qn=M(Lt=>{"use strict";var eu=R(),tu=F();Object.defineProperty(Lt,"__esModule",{value:!0});Lt.default=void 0;var ru=tu(q()),ou=eu(L()),nu=(0,ou.default)(ru.createElement("path",{d:"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"}),"Done");Lt.default=nu});var An=M(zt=>{"use strict";var au=R(),iu=F();Object.defineProperty(zt,"__esModule",{value:!0});zt.default=void 0;var su=iu(q()),lu=au(L()),uu=(0,lu.default)(su.createElement("path",{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"}),"Redo");zt.default=uu});var Dn=M(Ht=>{"use strict";var cu=R(),du=F();Object.defineProperty(Ht,"__esModule",{value:!0});Ht.default=void 0;var fu=du(q()),pu=cu(L()),mu=(0,pu.default)(fu.createElement("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline");Ht.default=mu});var kn=M(Gt=>{"use strict";var hu=R(),gu=F();Object.defineProperty(Gt,"__esModule",{value:!0});Gt.default=void 0;var vu=gu(q()),yu=hu(L()),bu=(0,yu.default)(vu.createElement("path",{d:"M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z"}),"Autorenew");Gt.default=bu});var Fn=M(Wt=>{"use strict";var wu=R(),_u=F();Object.defineProperty(Wt,"__esModule",{value:!0});Wt.default=void 0;var Su=_u(q()),Cu=wu(L()),Iu=(0,Cu.default)(Su.createElement("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}),"KeyboardArrowDown");Wt.default=Iu});var Rn=M(Vt=>{"use strict";var ju=R(),qu=F();Object.defineProperty(Vt,"__esModule",{value:!0});Vt.default=void 0;var Au=qu(q()),Du=ju(L()),ku=(0,Du.default)(Au.createElement("path",{d:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"}),"KeyboardArrowUp");Vt.default=ku});var Ln=M($t=>{"use strict";var Tu=R(),Pu=F();Object.defineProperty($t,"__esModule",{value:!0});$t.default=void 0;var Nu=Pu(q()),Mu=Tu(L()),Bu=(0,Mu.default)(Nu.createElement("path",{d:"M5 4v2h14V4H5zm0 10h4v6h6v-6h4l-7-7-7 7z"}),"Publish");$t.default=Bu});var zr=M(Ut=>{"use strict";var Ou=R(),Eu=F();Object.defineProperty(Ut,"__esModule",{value:!0});Ut.default=void 0;var Fu=Eu(q()),Ru=Ou(L()),Lu=(0,Ru.default)(Fu.createElement("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm-2 16c-2.05 0-3.81-1.24-4.58-3h1.71c.63.9 1.68 1.5 2.87 1.5 1.93 0 3.5-1.57 3.5-3.5S13.93 9.5 12 9.5c-1.35 0-2.52.78-3.1 1.9l1.6 1.6h-4V9l1.3 1.3C8.69 8.92 10.23 8 12 8c2.76 0 5 2.24 5 5s-2.24 5-5 5z"}),"RestorePage");Ut.default=Lu});var Hn=M(Yt=>{"use strict";var zu=R(),Hu=F();Object.defineProperty(Yt,"__esModule",{value:!0});Yt.default=void 0;var Gu=Hu(q()),Wu=zu(L()),Vu=(0,Wu.default)(Gu.createElement("path",{d:"M15 9H9v6h6V9zm-2 4h-2v-2h2v2zm8-2V9h-2V7c0-1.1-.9-2-2-2h-2V3h-2v2h-2V3H9v2H7c-1.1 0-2 .9-2 2v2H3v2h2v2H3v2h2v2c0 1.1.9 2 2 2h2v2h2v-2h2v2h2v-2h2c1.1 0 2-.9 2-2v-2h2v-2h-2v-2h2zm-4 6H7V7h10v10z"}),"Memory");Yt.default=Vu});var Gn=M(Qt=>{"use strict";var $u=R(),Uu=F();Object.defineProperty(Qt,"__esModule",{value:!0});Qt.default=void 0;var Ku=Uu(q()),Yu=$u(L()),Qu=(0,Yu.default)(Ku.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutline");Qt.default=Qu});var Jn=M(Jt=>{"use strict";var Zu=R(),Ju=F();Object.defineProperty(Jt,"__esModule",{value:!0});Jt.default=void 0;var ec=Ju(q()),tc=Zu(L()),rc=(0,tc.default)(ec.createElement("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"}),"Lock");Jt.default=rc});var ea=M(er=>{"use strict";var oc=R(),nc=F();Object.defineProperty(er,"__esModule",{value:!0});er.default=void 0;var ac=nc(q()),ic=oc(L()),sc=(0,ic.default)(ac.createElement("path",{d:"M21 21.78L4.22 5 3 6.22l2.04 2.04C4.42 8.6 4 9.25 4 10v10c0 1.1.9 2 2 2h12c.23 0 .45-.05.66-.12L19.78 23 21 21.78zM8.9 6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2H9.66L20 18.34V10c0-1.1-.9-2-2-2h-1V6c0-2.76-2.24-5-5-5-2.56 0-4.64 1.93-4.94 4.4L8.9 7.24V6z"}),"NoEncryption");er.default=sc});var la=M(tr=>{"use strict";var cc=R(),dc=F();Object.defineProperty(tr,"__esModule",{value:!0});tr.default=void 0;var fc=dc(q()),pc=cc(L()),mc=(0,pc.default)(fc.createElement("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home");tr.default=mc});var ua=M(rr=>{"use strict";var hc=R(),gc=F();Object.defineProperty(rr,"__esModule",{value:!0});rr.default=void 0;var vc=gc(q()),yc=hc(L()),bc=(0,yc.default)(vc.createElement("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56zm2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"}),"Language");rr.default=bc});var ps=M((wr,fs)=>{(function(e,t){typeof wr=="object"&&typeof fs!="undefined"?t(wr,q()):typeof define=="function"&&define.amd?define(["exports","react"],t):(e=typeof globalThis!="undefined"?globalThis:e||self,t(e.ReactErrorBoundary={},e.React))})(wr,function(e,t){"use strict";function r(c){if(c&&c.__esModule)return c;var p=Object.create(null);return c&&Object.keys(c).forEach(function(h){if(h!=="default"){var x=Object.getOwnPropertyDescriptor(c,h);Object.defineProperty(p,h,x.get?x:{enumerable:!0,get:function(){return c[h]}})}}),p.default=c,Object.freeze(p)}var o=r(t);function n(c,p){return n=Object.setPrototypeOf||function(x,v){return x.__proto__=v,x},n(c,p)}function a(c,p){c.prototype=Object.create(p.prototype),c.prototype.constructor=c,n(c,p)}var l=function(p,h){return p===void 0&&(p=[]),h===void 0&&(h=[]),p.length!==h.length||p.some(function(x,v){return!Object.is(x,h[v])})},i={error:null},s=function(c){a(p,c);function p(){for(var x,v=arguments.length,m=new Array(v),S=0;S<v;S++)m[S]=arguments[S];return x=c.call.apply(c,[this].concat(m))||this,x.state=i,x.updatedWithError=!1,x.resetErrorBoundary=function(){for(var C,y=arguments.length,w=new Array(y),A=0;A<y;A++)w[A]=arguments[A];x.props.onReset==null||(C=x.props).onReset.apply(C,w),x.reset()},x}p.getDerivedStateFromError=function(v){return{error:v}};var h=p.prototype;return h.reset=function(){this.updatedWithError=!1,this.setState(i)},h.componentDidCatch=function(v,m){var S,C;(S=(C=this.props).onError)==null||S.call(C,v,m)},h.componentDidMount=function(){var v=this.state.error;v!==null&&(this.updatedWithError=!0)},h.componentDidUpdate=function(v){var m=this.state.error,S=this.props.resetKeys;if(m!==null&&!this.updatedWithError){this.updatedWithError=!0;return}if(m!==null&&l(v.resetKeys,S)){var C,y;(C=(y=this.props).onResetKeysChange)==null||C.call(y,v.resetKeys,S),this.reset()}},h.render=function(){var v=this.state.error,m=this.props,S=m.fallbackRender,C=m.FallbackComponent,y=m.fallback;if(v!==null){var w={error:v,resetErrorBoundary:this.resetErrorBoundary};if(o.isValidElement(y))return y;if(typeof S=="function")return S(w);if(C)return o.createElement(C,w);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},p}(o.Component);function u(c,p){var h=function(m){return o.createElement(s,p,o.createElement(c,m))},x=c.displayName||c.name||"Unknown";return h.displayName="withErrorBoundary("+x+")",h}function d(c){var p=o.useState(null),h=p[0],x=p[1];if(c!=null)throw c;if(h!=null)throw h;return x}e.ErrorBoundary=s,e.useErrorHandler=d,e.withErrorBoundary=u,Object.defineProperty(e,"__esModule",{value:!0})})});var _e=f(Po()),E=f(q()),ms=f(vs()),hs=f(Os());var Mo=f(xs()),Dr=f(q()),wt=e=>{let{children:t,value:r,index:o,...n}=e;return Dr.default.createElement("div",{role:"tabpanel",hidden:r!==o,...n},r===o&&Dr.default.createElement(Mo.default,{p:3},t))};var Re=f(q());var nn=f(No()),B=f(q());var T=f(q()),Eo=f(No()),Fo=f($()),Ye=f(Pr()),Ro=f(Co()),It=f(Be()),jt=f(Me()),Lo=f(Nr()),zo=f(Bs()),Ho=f(Oo()),Go=f(Mr()),Wo=f(bt()),Vo=f(xt()),qt=f(re());var bl=(0,qt.makeStyles)(e=>({dropdown:{width:"100%"}})),Qe=(0,qt.styled)(Wo.default)(({theme:e})=>({padding:e.spacing(1)})),Br=e=>{let{translate:t}=(0,Fo.useI18n)(),[r,o]=T.default.useState(e.sourceEndpoint),[n,a]=T.default.useState(e.group),[l,i]=T.default.useState(e.nodeId),[s,u]=T.default.useState(e.endpoint),[d,c]=T.default.useState(!1),[p,h]=T.default.useState(!1),[x,v]=T.default.useState(!1),m=r!=null&&e.groups.get(r)||[];T.default.useEffect(()=>{h(r!==e.sourceEndpoint||n!==e.group||l!==e.nodeId||s!==e.endpoint);let _=!!m.find(Y=>Y.group===n),j=e.nodes.find(Y=>Y.nodeId===l),K=j?.endpointIndizes??[];c(_&&!!j&&(s==null||s===0||K.includes(s)))},[n,m,l,s]);let S=m.map(({group:_,label:j})=>({value:_,label:`${t("Group")} ${_}: ${j}`})),C=e.nodes.map(({nodeId:_})=>({value:_,label:`${t("Node")} ${(0,Eo.padStart)(_.toString(),3,"0")}`})),y=T.default.useMemo(()=>{let _=[{value:0,label:t("Root device")}];for(let j of e.endpoints)j!==0&&_.push({value:j,label:`${t("Endpoint")} ${j}`});return _},[e.endpoints]),w=T.default.useMemo(()=>{let _=e.nodes.find(K=>K.nodeId===l)?.endpointIndizes??[];if(_.includes(0)||_.unshift(0),!!m.find(K=>K.group===n)?.multiChannel){let K=[{value:"none",label:t("Root device")}];for(let Y of _)K.push({value:Y,label:Y===0?t("Root endpoint"):`${t("Endpoint")} ${Y}`});return K}else return[]},[e.nodes,m,n,l]),A=e.sourceEndpoint==null&&e.group==null&&e.nodeId==null&&e.endpoint==null;async function D(){try{v(!0),await e.save(r,n,l,s),A&&N()}catch(_){alert(t("The association could not be saved!")),console.error(`The association could not be saved! Reason: ${ve(_)}`),N()}finally{v(!1)}}function N(){o(e.sourceEndpoint),a(e.group),i(e.nodeId),u(e.endpoint)}async function V(){if(!!e.delete)try{v(!0),await e.delete()}catch(_){alert(t("The association could not be deleted!")),console.error(`The association could not be deleted! Reason: ${ve(_)}`),N()}finally{v(!1)}}let O=m.find(_=>_.group===n),b=m.some(_=>_.multiChannel),I=bl();return T.default.createElement(Vo.default,null,T.default.createElement(Qe,null,T.default.createElement(Ye.Dropdown,{className:I.dropdown,options:y,selectedOption:r??"",placeholder:t("- select endpoint -"),onChange:_=>{o(_.target.value)}})),T.default.createElement(Qe,null,T.default.createElement(Ye.Dropdown,{className:I.dropdown,options:S,selectedOption:n,placeholder:t("- select group -"),onChange:_=>{a(_.target.value)}})),T.default.createElement(Qe,null,T.default.createElement(Ye.Dropdown,{className:I.dropdown,options:C,selectedOption:l,placeholder:t("- select node -"),onChange:_=>{i(_.target.value)}})),e.supportsMultiChannel&&T.default.createElement(Qe,null,O?.multiChannel&&b&&T.default.createElement(Ye.Dropdown,{className:I.dropdown,options:w,selectedOption:s??"none",placeholder:t("- select endpoint -"),onChange:_=>{let j=_.target.value;u(j==="none"?void 0:j)}})),T.default.createElement(Qe,null,T.default.createElement(Ro.default,{variant:"contained",color:"primary",style:{flex:"1 0 auto"}},T.default.createElement(It.default,{title:t("Save association")},T.default.createElement(jt.default,{disabled:x||!d||!p,onClick:()=>D()},A?T.default.createElement(Lo.default,null):T.default.createElement(zo.default,null))),T.default.createElement(It.default,{title:t("Undo changes")},T.default.createElement(jt.default,{disabled:x||!p,onClick:()=>N()},T.default.createElement(Ho.default,null))),!A&&T.default.createElement(It.default,{title:t("Delete association")},T.default.createElement(jt.default,{disabled:x,onClick:()=>V()},T.default.createElement(Go.default,null))))))};var me=f(q()),Yo=f($()),Xe=f(Be()),Oe=f(vt()),Qo=f(re()),Xo=f($o()),Zo=f(Uo()),Jo=f(Ko()),en=f(Or()),Ll=(0,Qo.makeStyles)(e=>({deviceIconAlive:{color:Oe.green[800]},deviceIconAsleep:{color:Oe.lightBlue[500]},deviceIconDead:{color:Oe.red[900]}})),Pt=e=>{let{status:t}=e,{translate:r}=(0,Yo.useI18n)(),o=Ll(),n=r(t??"unknown");switch(t){case"alive":case"awake":return me.default.createElement(Xe.default,{title:n},me.default.createElement(Xo.default,{className:o.deviceIconAlive}));case"asleep":return me.default.createElement(Xe.default,{title:n},me.default.createElement(en.default,{className:o.deviceIconAsleep}));case"dead":return me.default.createElement(Xe.default,{title:n},me.default.createElement(Zo.default,{className:o.deviceIconDead}));default:return me.default.createElement(Xe.default,{title:n},me.default.createElement(Jo.default,null))}};var Ze=f(q()),Nt=f($()),tn=f(Ue()),Er=e=>Ze.default.createElement(tn.default,{variant:"body1",style:{textAlign:"center"}},e.children),Ee=()=>{let{translate:e}=(0,Nt.useI18n)();return Ze.default.createElement(Er,null,e("adapter not ready"))},rn=()=>{let{translate:e}=(0,Nt.useI18n)();return Ze.default.createElement(Er,null,e("No devices present"))},on=()=>{let{translate:e}=(0,Nt.useI18n)();return Ze.default.createElement(Er,null,e("Node is not ready"))};var Fr=f($()),an=f(ko()),Fe=f(bt()),sn=f(To()),ln=f(xt()),un=f(Do()),cn=f(So()),dn=f(re()),Rr=f(Ue()),Lr=(0,dn.makeStyles)(e=>({headline:{backgroundColor:e.palette.background.default,margin:e.spacing(-2),marginBottom:e.spacing(2),borderBottom:`1px solid ${e.palette.divider}`,padding:e.spacing(2)},table:{marginTop:e.spacing(-2)},nodeNumber:{"& > *":{verticalAlign:"middle"}},paper:{padding:e.spacing(2),backgroundColor:e.palette.background.paper,marginTop:e.spacing(4),"&:first-child":{margin:0}}}));function zl(e){let{translate:t}=(0,Fr.useI18n)(),{value:r,status:o}=e.device,n=r.native.id,a=r.common.name&&!r.common.name.startsWith("Node")?r.common.name:void 0,l=Lr();return B.default.createElement("div",{className:l.headline},B.default.createElement(Rr.default,{variant:"h5",component:"h2",className:l.nodeNumber},B.default.createElement("span",null,t("Node")," ",(0,nn.padStart)(n.toString(),3,"0")),"\xA0",B.default.createElement(Pt,{status:o})),a&&B.default.createElement(Rr.default,{variant:"h6",component:"h3"},a))}function Hl(e){let{translate:t}=(0,Fr.useI18n)(),{endpoints:r,value:o}=e.device,n=o.native.id,{sourceEndpoints:a,groups:l,supportsMultiChannel:i,hasAssociations:s,associations:u}=B.default.useMemo(()=>{let c=[],p=!1,h=!1,x=new Map,v=[];if(r){for(let[m,S]of r)S.associationGroups?(h||=Object.values(S.associationGroups).some(C=>!!C.multiChannel),x.set(m,Object.entries(S.associationGroups).map(([C,y])=>({group:parseInt(C),...y})))):x.set(m,[]),S.associations&&(c.push(...Object.entries(S.associations).map(([C,y])=>y.map(w=>({sourceEndpoint:m,group:parseInt(C),...w}))).reduce((C,y)=>[...C,...y],[]).sort((C,y)=>C.group-y.group||C.nodeId-y.nodeId||(C.endpoint??-1)-(y.endpoint??-1))),p||=Object.keys(S.associations).length>0);h&&v.push(0),v.push(...r.keys())}return{sourceEndpoints:v,groups:x,supportsMultiChannel:h,hasAssociations:p,associations:c}},[r]),d=Lr();return B.default.createElement(un.default,{className:d.table},B.default.createElement(sn.default,null,B.default.createElement(ln.default,null,B.default.createElement(Fe.default,null,t("Source endpoint")),B.default.createElement(Fe.default,null,t("Group")),B.default.createElement(Fe.default,null,t("Target node")),i&&B.default.createElement(Fe.default,null,t("Target endpoint")),B.default.createElement(Fe.default,null,"\xA0"))),B.default.createElement(an.default,null,s?u.map(c=>B.default.createElement(Br,{key:`from${n}${c.sourceEndpoint??-1}-to${c.group}-${c.nodeId}-${c.endpoint??-1}`,endpoints:a??[],groups:l,nodes:e.nodes.filter(p=>p.nodeId!==n),sourceEndpoint:c.sourceEndpoint??0,group:c.group,nodeId:c.nodeId,endpoint:c.endpoint,supportsMultiChannel:i,save:(p,h,x,v)=>e.saveAssociation(n,c,{sourceEndpoint:p,group:h,nodeId:x,endpoint:v}),delete:()=>e.deleteAssociation(n,c)})):B.default.createElement(B.default.Fragment,null),B.default.createElement(Br,{endpoints:a??[],groups:l,nodes:e.nodes.filter(c=>c.nodeId!==n),sourceEndpoint:void 0,group:void 0,nodeId:void 0,supportsMultiChannel:i,save:(c,p,h,x)=>e.saveAssociation(n,void 0,{sourceEndpoint:c,group:p,nodeId:h,endpoint:x})})))}var fn=e=>{let{ready:t,endpoints:r}=e.device,o=!!r&&[...r.values()].some(a=>!!a.associationGroups),n=Lr();return t&&!o?B.default.createElement(B.default.Fragment,null):B.default.createElement(cn.default,{className:n.paper,elevation:2},B.default.createElement(zl,{device:e.device}),t?B.default.createElement(Hl,{...e}):B.default.createElement(on,null))};var gn=f($());var Mt=f($()),Bt=f(q());var Cf=Bt.default.createContext({devices:{},async updateDevices(){}}),pn=/Node_(\d+)$/,mn=/Node_(\d+)\.ready$/,hn=/Node_(\d+)\.status$/;function Ot(){let e=(0,Mt.useConnection)(),[t,r]=Bt.default.useState({}),{namespace:o}=(0,Mt.useGlobals)(),n=J(),a=async(u,d)=>{if(!(!u.startsWith(o)||!pn.test(u)))if(d){if(d.type==="device"&&typeof d.native.id=="number"){let c=d.native.id,p={id:u,value:d,status:await n.getNodeStatus(c),ready:await n.getNodeReady(c)};p.ready&&await n.updateEndpointsAndAssociations(c,p),r(h=>({...h,[c]:p}))}}else{let c=parseInt(pn.exec(u)[1],10);r(p=>{let h={...p};return delete h[c],h})}},l=async u=>{let d={};await n.updateEndpointsAndAssociations(u,d),r(c=>{let p=c[u];return p?(p.endpoints=d.endpoints,{...c,[u]:p}):c})},i=async(u,d)=>{if(!!u.startsWith(o)&&!(!d||!d.ack)){if(u.match(hn)){let c=parseInt(hn.exec(u)[1],10);r(p=>{let h=p[c];return h?(h.status=d.val,{...p,[c]:h}):p})}else if(u.match(mn)){let c=parseInt(mn.exec(u)[1],10);r(p=>{let h=p[c];return h?(h.ready=d.val,h.ready&&setTimeout(()=>void l(c),0),{...p,[c]:h}):p})}}};async function s(){r(await n.loadDevices({status:!0,associations:!0,ready:!0}))}return Bt.default.useEffect(()=>((async()=>{await s(),e.subscribeObject(`${o}.Node_*`,a),e.subscribeState(`${o}.Node_*`,i)})(),()=>{e.unsubscribeObject(`${o}.Node_*`,a),e.unsubscribeState(`${o}.Node_*`,i)}),[]),[t,s]}var vn=()=>{let[e,t]=Ot(),{alive:r,connected:o}=(0,gn.useAdapter)(),n=J();async function a(u,d,c){d&&await l(u,d),await n.addAssociation(u,c),await t()}async function l(u,d){await n.removeAssociation(u,d),await t()}let i=e?Object.values(e).filter(Boolean):[],s=i.map(u=>({nodeId:u.value.native.id,endpointIndizes:u.value.native.endpointIndizes}));return!r||!o?Re.default.createElement(Ee,null):i.length?Re.default.createElement(Re.default.Fragment,null,i.map((u,d)=>Re.default.createElement(fn,{key:d,device:u,nodes:s,saveAssociation:a,deleteAssociation:l}))):Re.default.createElement(rn,null)};var ie=f(q());var ne=f($());var Rt=f(Me()),ye=f(q()),xn=f(Nr()),wn=f(yn()),_n=f(bn()),Sn=f($()),Cn=f(re()),In=f(yt()),H;(function(a){a[a.Idle=0]="Idle",a[a.Including=1]="Including",a[a.Excluding=2]="Excluding",a[a.Healing=3]="Healing",a[a.Busy=4]="Busy"})(H||(H={}));var Jl=(0,Cn.makeStyles)(e=>({root:{display:"flex",flexDirection:"row",gap:e.spacing(1)},redButton:{background:e.palette.error.main,"&:hover":{background:e.palette.error.dark}}})),jn=e=>{let{translate:t}=(0,Sn.useI18n)(),r=Jl();return ye.default.createElement("div",{className:r.root},ye.default.createElement(Rt.default,{variant:"contained",color:e.state===1?"secondary":"primary",startIcon:ye.default.createElement(xn.default,null),disabled:e.state!==0&&e.state!==1,onClick:e.beginInclusion},e.state!==1?t("Include device"):t("Inclusion active")),ye.default.createElement(Rt.default,{variant:"contained",color:e.state===2?"secondary":"primary",startIcon:ye.default.createElement(wn.default,null),disabled:e.state!==0&&e.state!==2,onClick:e.state!==2?e.beginExclusion:e.cancelExclusion},e.state!==2?t("Exclude device"):t("Cancel exclusion")),ye.default.createElement(Rt.default,{variant:"contained",color:"primary",className:(0,In.default)(e.state===3&&r.redButton),startIcon:ye.default.createElement(_n.default,null),disabled:e.state!==0&&e.state!==3,onClick:e.state!==3?e.healNetwork:e.cancelHealing},e.state!==3?t("Heal network"):t("Cancel healing")))};var Q=f(q()),Na=f($()),Ma=f(re()),Ba=f(So()),Oa=f(Do()),Ea=f(ko()),Ce=f(bt()),Fa=f(As()),Ra=f(To()),Ur=f(xt());var P=f(q()),Se=f(bt()),$r=f(xt());var he=f(q()),Tn=f($()),Pn=f(qn()),Nn=f(An()),Mn=f(Dn()),Bn=f(kn()),Je=f(Be()),be=f(vt()),On=f(re()),xu=(0,On.makeStyles)(e=>({healIconPending:{color:be.blue[500],animation:"$rotation 1.5s infinite ease-in-out",animationFillMode:"forwards"},healIconFailed:{color:be.red[500]},healIconSkipped:{color:be.orange[800]},healIconDone:{color:be.green[900]},"@keyframes rotation":{"0%":{transform:"rotate(0deg)"},"95%":{transform:"rotate(720deg)",animationFillMode:"none"},"95.1%":{transform:"rotate(0deg)"}}})),En=e=>{let{status:t}=e,{translate:r}=(0,Tn.useI18n)(),o=xu();switch(t){case"done":return he.default.createElement(Je.default,{title:r("done")},he.default.createElement(Pn.default,{className:o.healIconDone}));case"skipped":return he.default.createElement(Je.default,{title:r("skipped")},he.default.createElement(Nn.default,{className:o.healIconSkipped}));case"failed":return he.default.createElement(Je.default,{title:r("failed")},he.default.createElement(Mn.default,{className:o.healIconFailed}));case"pending":return he.default.createElement(Je.default,{title:r("pending")},he.default.createElement(Bn.default,{className:o.healIconPending}))}throw new Error("Unknown heal status")};var Ca=f(bs()),Ia=f(Fn()),ja=f(Rn()),qa=f(ys()),Aa=f(re());var Le=f(Me()),Wn=f(re()),Xt=f(Be()),k=f(q());var Zt=f($()),Vn=f(Ln()),$n=f(Co()),Un=f(Ns()),Kn=f(zr());var zn=f(q());function Kt(e){let t=J();zn.default.useEffect(()=>(t.addPushCallback(e),()=>{t.removePushCallback(e)}),[t,e])}var Hr=f(Cs()),Gr=f(Ue()),Yn=f(yt()),Qn=f(Hn()),Xn=f(Gn()),Xu=(0,Wn.makeStyles)(e=>({root:{padding:e.spacing(2,0),display:"grid",gridTemplateColumns:"auto 1fr",alignItems:"center",columnGap:e.spacing(4),rowGap:e.spacing(2)},firmwareUpdate:{gridColumn:"1 / span 2",display:"flex",flexFlow:"row nowrap",justifyContent:"space-between",alignItems:"center",marginTop:e.spacing(4)},firmwareUpdateMessage:{gridColumn:"1 / span 2"},warning:{color:e.palette.warning.main},redButton:{background:e.palette.error.main,"&:hover":{background:e.palette.error.dark}}})),Zn=e=>{let[t,r]=k.default.useState(),[o,n]=k.default.useState(!1),[a,l]=k.default.useState(),[i,s]=k.default.useState(),u=k.default.useRef(),d=J(),{nodeId:c,isBusy:p,setBusy:h,supportsFirmwareUpdate:x}=e,{translate:v}=(0,Zt.useI18n)(),{showNotification:m}=(0,Zt.useDialogs)(),S=e.status!=="alive"&&e.status!=="awake";async function C(){h(!0);try{await d.removeFailedNode(c)}catch(b){alert(b)}finally{h(!1)}}async function y(){h(!0);try{await d.refreshNodeInfo(c)}catch(b){alert(b)}finally{h(!1)}}let w=()=>{u.current?.click()},A=async b=>{if(b.target.files?.length){let I=b.target.files[0],_=new Uint8Array(await I.arrayBuffer());r({name:I.name,data:_})}};async function D(){if(x&&t?.data){h(!0);try{n(!0),l({type:"progress",sentFragments:0,totalFragments:1}),await d.beginFirmwareUpdate(c,t.name,Array.from(t.data))}catch(b){n(!1),alert(b)}finally{h(!1),s(void 0)}}}async function N(){h(!0);try{await d.abortFirmwareUpdate(c)}catch(b){alert(b)}finally{h(!1),n(!1)}}Kt(b=>{if(b.type==="firmwareUpdate"){let I=b.progress;if(l(I),I.type==="done"){let _=I.status>=253;if(!_)m(v("firmware update failed"),"error"),s(void 0);else{let j=v("firmware update successful");_&&(I.waitTime?j+=" "+v("firmware update wait time").replace("{0}",I.waitTime.toString()):j+=" "+v("firmware update no wait time"),j+=" "+v("firmware update wake up")),s(j)}r(void 0),n(!1),setTimeout(()=>{l(void 0)},1e4)}else n(!0)}});let V=a?.type==="progress"&&typeof a.totalFragments=="number"&&typeof a.sentFragments=="number"?Math.round(a.sentFragments/a.totalFragments*1e4)/100:Number.NaN;k.default.useEffect(()=>{a?.type!=="done"&&(e.status==="asleep"&&o?s(v("wake up device")):s(void 0))},[e.status,o,a]);let O=Xu();return k.default.createElement("div",{className:O.root},k.default.createElement(Le.default,{disabled:p,variant:"contained",color:"primary",startIcon:k.default.createElement(Kn.default,null),onClick:()=>y()},v("Refresh node info")),k.default.createElement(Gr.default,{variant:"body2"},v("Forget all information about all nodes and re-interview them. Battery-powered nodes might need to be woken up manually.")),k.default.createElement(Xt.default,{title:S?"":v("This is not a failed node")},k.default.createElement("span",null,k.default.createElement(Le.default,{disabled:!S||p,variant:"contained",className:O.redButton,onClick:()=>C(),startIcon:k.default.createElement(Xn.default,null)},v("Remove failed node")))),k.default.createElement(Gr.default,{variant:"body2"},v("Remove this node from the network.")," ",k.default.createElement("span",{className:O.warning},v("WARNING: Only do this if you no longer have physical access."))),x&&k.default.createElement(k.default.Fragment,null,k.default.createElement("div",{className:O.firmwareUpdate},k.default.createElement(Le.default,{disabled:o||p,variant:"contained",color:"primary",onClick:()=>w(),style:{flex:"1 0 auto"},startIcon:k.default.createElement(Qn.default,null)},v("Update Firmware")),k.default.createElement("input",{type:"file",hidden:!0,id:"firmwareFile",accept:".exe,.ex_,.ota,.otz,.hex,.hec,.gbl,.bin",ref:b=>{b&&(u.current=b)},onChange:A}),o?k.default.createElement(k.default.Fragment,null,k.default.createElement("div",{className:"progress",style:{margin:"0 1em",flex:"1 1 100%"}},Number.isNaN(V)?k.default.createElement(Hr.default,null):k.default.createElement(Hr.default,{variant:"determinate",value:V})),!Number.isNaN(V)&&k.default.createElement("div",{style:{whiteSpace:"nowrap",marginRight:"1em"}},V.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})," %")):k.default.createElement("span",{style:{flex:"1 1 100%",textAlign:"center",padding:"0 1em",wordBreak:"break-all"}},t?`${t.name} (${t.data.byteLength} bytes)`:v("no file selected")),k.default.createElement($n.default,{variant:"contained",color:"primary",style:{flex:"1 0 auto"}},k.default.createElement(Xt.default,{title:v("start firmware update")},k.default.createElement(Le.default,{disabled:o||p||!t?.data,onClick:()=>D()},k.default.createElement(Vn.default,null))),k.default.createElement(Xt.default,{title:v("abort firmware update")},k.default.createElement(Le.default,{disabled:!o||p,onClick:()=>N()},k.default.createElement(Un.default,null))))),i?k.default.createElement("div",{className:O.firmwareUpdateMessage},i):k.default.createElement("div",{className:(0,Yn.default)(O.firmwareUpdateMessage,O.warning)},v("firmware update warning"))))};var Da=f($());var ze=f(q()),ta=f(Be()),ue=f(vt()),ra=f(re()),oa=f(Jn()),na=f(ea()),aa=f(yt()),ia=(0,ra.makeStyles)(e=>({root:{display:"grid",gridTemplateColumns:"repeat(4, 16px)",gridTemplateRows:"16px"},securityIcon:{fontSize:"16px",color:ue.grey[200]},S2_AccessControl:{color:ue.green[800]},S2_Authenticated:{color:ue.blue[900]},S2_Unauthenticated:{color:ue.deepPurple[500]},S0_Legacy:{color:ue.amber[800]}})),lc=e=>{let t=ia(),r=e.granted?oa.default:na.default;return e.supported?ze.default.createElement(ta.default,{title:`${e.title}: ${e.granted?"\u2714":"\u2718"}`},ze.default.createElement(r,{className:(0,aa.default)(t.securityIcon,e.granted&&t[e.className])})):ze.default.createElement("span",null)},uc=[["S2_AccessControl","S2 Access Control"],["S2_Authenticated","S2 Authenticated"],["S2_Unauthenticated","S2 Unauthenticated"],["S0_Legacy","S0 Legacy"]],sa=e=>{let t=ia(),{securityClasses:r}=e;return ze.default.createElement("div",{className:t.root},uc.map(([o,n])=>ze.default.createElement(lc,{key:o,title:n,className:o,supported:o in r,granted:r[o]===!0})))};var ka=f(la()),Ta=f(Be());var et=f(Me()),ya=f(re()),G=f(q());var ce=f($()),tt=f(Po()),ba=f(Mr()),xa=f(zr()),wa=f(Or()),_a=f(ua());var oe=f(q()),ca=f($()),da=f(qo()),fa=f(Ao()),pa=f(Io()),ma=f(jo()),Wr=f(Me()),ha=f(Pr()),Vr=f(Ue()),ga=f(re()),xc=(0,ga.makeStyles)(e=>({root:{display:"flex",flexFlow:"column",maxWidth:400,gap:e.spacing(2)}})),va=e=>{let{translate:t}=(0,ca.useI18n)(),r=xc(),[o,n]=oe.default.useState(e.region),a=oe.default.useMemo(()=>Object.entries(e.regions).map(([l,i])=>({value:l,label:i})),[e.regions]);return oe.default.createElement(pa.default,{open:e.open,onClose:e.onCancel,maxWidth:!1},oe.default.createElement(fa.default,{id:"alert-dialog-title"},t("Set RF Region")),oe.default.createElement(da.default,{className:r.root},oe.default.createElement(Vr.default,{variant:"body1"},t("Select the correct region for where you are. Using a different region may be illegal.")),oe.default.createElement(ha.Dropdown,{selectedOption:o,options:a,onChange:l=>n(parseInt(l.target.value))}),oe.default.createElement(Vr.default,{variant:"body2"},t("Note: Applying a different region might take a few seconds."))),oe.default.createElement(ma.default,null,oe.default.createElement(Wr.default,{disabled:e.region===o,onClick:()=>e.onConfirm(o),color:"primary"},t("OK")),oe.default.createElement(Wr.default,{onClick:e.onCancel,color:"primary"},t("Cancel"))))};var wc=(0,ya.makeStyles)(e=>({root:{padding:e.spacing(2,0),display:"grid",gridTemplateColumns:"auto 1fr",alignItems:"center",columnGap:e.spacing(4),rowGap:e.spacing(2)},redButton:{background:e.palette.error.main,"&:hover":{background:e.palette.error.dark}}})),Sa=e=>{let{isBusy:t,setBusy:r}=e,{namespace:o}=(0,ce.useGlobals)(),n=J(),{translate:a}=(0,ce.useI18n)(),{showModal:l,showNotification:i}=(0,ce.useDialogs)(),[s,u]=G.default.useState(!1),[d]=(0,ce.useIoBrokerObject)(`${o}.info.rfRegion`,{subscribe:!1}),[c]=(0,ce.useIoBrokerState)({id:`${o}.info.rfRegion`}),p=G.default.useCallback(S=>{t||(r(!0),n.setRFRegion(S).finally(()=>r(!1)))},[n,t,r]),h=G.default.useCallback(()=>{t||(r(!0),n.softReset().finally(()=>r(!1)))},[n,t,r]),x=G.default.useCallback(async()=>{if(!t)try{if(!await l(a("Re-interview all?"),a("clear cache procedure")))return;r(!0),await n.clearCache(),setTimeout(()=>{r(!1)},1e3)}catch(S){i(ve(S),"error");return}},[n,t,l,i]),v=G.default.useCallback(async()=>{if(!t)try{if(!await l(a("Factory reset?"),a("factory reset procedure")))return;r(!0),await n.hardReset(),r(!1),await l(a("Factory reset successful"),a("The adapter will now restart."))}catch(S){i(ve(S),"error");return}},[n,t,l,i]),m=wc();return G.default.createElement("div",{className:m.root},G.default.createElement(et.default,{disabled:t,variant:"contained",color:"primary",onClick:h,startIcon:G.default.createElement(wa.default,null)},a("Soft reset")),G.default.createElement(tt.Typography,{variant:"body2"},a("Restart the controller, e.g. when it hangs")),G.default.createElement(et.default,{disabled:t,variant:"contained",color:"primary",onClick:x,startIcon:G.default.createElement(xa.default,null)},a("Re-interview all")),G.default.createElement(tt.Typography,{variant:"body2"},a("Forget all information about all nodes and re-interview them. Battery-powered nodes might need to be woken up manually.")),G.default.createElement(et.default,{disabled:t||c==null,variant:"contained",color:"primary",onClick:()=>u(!0),startIcon:G.default.createElement(_a.default,null)},a("Set RF Region")),G.default.createElement(tt.Typography,{variant:"body2"},a("Configure the region and radio frequencies of the controller.")),G.default.createElement(et.default,{className:m.redButton,disabled:t,variant:"contained",onClick:v,startIcon:G.default.createElement(ba.default,null)},a("Factory reset")),G.default.createElement(tt.Typography,{variant:"body2"},a("Wipes all configuration of the controller. All connected nodes will be orphaned and have to be reset and included into the new network before they can be used again.")),d&&c!=null&&G.default.createElement(va,{open:s,onCancel:()=>u(!1),onConfirm:S=>{p(S),u(!1)},region:c,regions:d.common.states??{}}))};var _c=(0,Aa.makeStyles)(e=>({mainRow:{"& > *":{border:0}},controllerIcon:{fontSize:"16px",margin:"7px",color:e.palette.text.secondary},idCell:{display:"flex",flexFlow:"row nowrap",alignItems:"center"},expanderCell:{paddingBottom:0,paddingTop:0,background:e.palette.background.default}})),Pa=e=>{let{healStatus:t,device:r}=e,{value:o,status:n}=r,a=o.native.id,l=!!o.native.supportsFirmwareUpdate,{secure:i,securityClasses:s,isControllerNode:u}=o.native,[d,c]=P.default.useState(u),p=_c(),{translate:h}=(0,Da.useI18n)();return P.default.createElement(P.default.Fragment,null,P.default.createElement($r.default,{hover:!0,className:p.mainRow},P.default.createElement(Se.default,{className:p.idCell},P.default.createElement(Ca.default,{"aria-label":"expand row",size:"small",onClick:()=>c(!d)},d?P.default.createElement(ja.default,null):P.default.createElement(Ia.default,null)),P.default.createElement("span",{style:{marginLeft:"auto"}},a)),P.default.createElement(Se.default,null,o.common.name),P.default.createElement(Se.default,null,o.native.type.specific??o.native.type.generic??h("unknown")),P.default.createElement(Se.default,null,i&&s&&P.default.createElement(sa,{securityClasses:s})),P.default.createElement(Se.default,null,u?P.default.createElement(Ta.default,{title:h("Controller node")},P.default.createElement(ka.default,null)):P.default.createElement(P.default.Fragment,null,P.default.createElement(Pt,{status:n}),!!t&&P.default.createElement(P.default.Fragment,null," ",P.default.createElement(En,{status:e.healStatus}))))),P.default.createElement($r.default,null,P.default.createElement(Se.default,{colSpan:5,className:p.expanderCell},P.default.createElement(qa.default,{in:d,timeout:"auto",unmountOnExit:!0},u?P.default.createElement(Sa,{isBusy:e.isBusy,setBusy:e.setBusy}):P.default.createElement(Zn,{nodeId:a,status:n,isBusy:e.isBusy,setBusy:e.setBusy,supportsFirmwareUpdate:l})))))};var Sc=(0,Ma.makeStyles)(e=>({root:{width:"100%",marginTop:e.spacing(2)},container:{overflowY:"auto"},empty:{textAlign:"center",fontStyle:"italic"}})),La=e=>{let{translate:t}=(0,Na.useI18n)(),r=Sc(),{devices:o,healingNetwork:n,networkHealProgress:a}=e;return Q.default.createElement(Ba.default,{className:r.root,elevation:2},Q.default.createElement(Fa.default,{className:r.container},Q.default.createElement(Oa.default,null,Q.default.createElement(Ra.default,null,Q.default.createElement(Ur.default,null,Q.default.createElement(Ce.default,{align:"right"},"#"),Q.default.createElement(Ce.default,null,t("Name")),Q.default.createElement(Ce.default,null,t("Type")),Q.default.createElement(Ce.default,null,t("Security")),Q.default.createElement(Ce.default,null,t("Status")))),Q.default.createElement(Ea.default,null,o.length?o.map(l=>{let i=l.value.native.id;return Q.default.createElement(Pa,{key:`device-${i}`,isBusy:e.isBusy,setBusy:e.setBusy,device:l,healStatus:n?a[i]:void 0})}):Q.default.createElement(Ur.default,null,Q.default.createElement(Ce.default,{colSpan:5,className:r.empty},t("No devices present")))))))};var ae=f(Me()),za=f(Io()),He=f(jo()),Ge=f(qo()),Ha=f(Ao()),Ga=f(_s()),Wa=f(re()),W=f(Ue()),Ie=f($()),g=f(q()),Va=f(Ps()),$a=f(Ms()),or=f(vt()),Ua=f(yt()),Ka=f(Ds()),je=f(Ss()),qe=f(ws()),rt=(0,Wa.makeStyles)(e=>({strategyRoot:{},strategyGridHeadline:{marginTop:e.spacing(4)},strategyGrid:{marginTop:e.spacing(1),display:"grid",gridTemplateColumns:"auto 400px",gridGap:e.spacing(2),alignItems:"center"},strategyList:{...e.typography.body2},waitMessageRoot:{display:"grid",gridTemplateColumns:"minmax(auto, 10ch) 1fr",gridGap:e.spacing(4),alignItems:"center",overflow:"hidden"},grantRoot:{display:"flex",flexFlow:"column nowrap",gap:e.spacing(1),maxWidth:"600px"},grantHeadline:{marginTop:e.spacing(-1),marginBottom:e.spacing(1)},grantCSA:{marginTop:e.spacing(2)},validateDSKRoot:{maxWidth:"600px"},validateDSKGrid:{marginTop:e.spacing(1),display:"grid",width:"100%",gridTemplateColumns:"minmax(auto, 10ch) 1fr",gridGap:e.spacing(1),alignItems:"center",textAlign:"center"},resultRoot:{display:"grid",gridTemplateColumns:"auto 1fr",gridTemplateRows:"auto auto auto",alignItems:"center"},resultIcon:{marginRight:e.spacing(4),fontSize:"64px",gridRow:"1 / span 3",gridColumn:1},resultIconOK:{color:or.green[500]},resultIconLowSecurity:{color:or.yellow[700]}})),X;(function(l){l[l.SelectStrategy=0]="SelectStrategy",l[l.IncludeDevice=1]="IncludeDevice",l[l.GrantSecurityClasses=2]="GrantSecurityClasses",l[l.ValidateDSK=3]="ValidateDSK",l[l.Busy=4]="Busy",l[l.Result=5]="Result"})(X||(X={}));var ot;(function(a){a[a.Default=0]="Default",a[a.SmartStart=1]="SmartStart",a[a.Insecure=2]="Insecure",a[a.Security_S0=3]="Security_S0",a[a.Security_S2=4]="Security_S2"})(ot||(ot={}));var Cc=e=>{let{translate:t}=(0,Ie.useI18n)(),r=rt(),[o,n]=g.default.useState(!1),a=t(o?"Security S2 when supported, Security S0 as a fallback, no encryption otherwise.":"Security S2 when supported, Security S0 only when necessary, no encryption otherwise.");return g.default.createElement(g.default.Fragment,null,g.default.createElement(Ge.default,{className:r.strategyRoot},g.default.createElement(W.default,{variant:"body2"},t("Z-Wave supports the following security mechanisms:")),g.default.createElement("ul",{className:r.strategyList,style:{marginTop:"0.5em"}},g.default.createElement("li",null,g.default.createElement("b",null,"Security S2")," \u2013 ",t("fast and secure")," ",g.default.createElement("b",null,t("(recommended)"))),g.default.createElement("li",null,g.default.createElement("b",null,"Security S0")," \u2013"," ",t("secure, but slow due to a lot of overhead")," ",g.default.createElement("b",null,t("(use only when necessary)"))),g.default.createElement("li",null,t("No encryption"))),g.default.createElement(W.default,{variant:"body1",className:r.strategyGridHeadline},t("Please choose an inclusion strategy"),":"),g.default.createElement("div",{className:r.strategyGrid},g.default.createElement("div",{style:{gridRow:1,display:"flex",flexFlow:"column"}},g.default.createElement(ae.default,{variant:"contained",color:"primary",onClick:()=>e.selectStrategy(0,o)},t("Default (secure)")),g.default.createElement(je.default,{label:t("Prefer S0 over no encryption"),control:g.default.createElement(qe.default,{checked:o,onChange:(l,i)=>n(i)})})),g.default.createElement(W.default,{variant:"caption",style:{alignSelf:"flex-start"}},a,g.default.createElement("br",null),t("Requires user interaction during the inclusion.")),g.default.createElement(ae.default,{variant:"contained",color:"secondary",style:{gridRow:2},disabled:!0,onClick:()=>e.selectStrategy(1)},"SmartStart"),g.default.createElement(W.default,{variant:"caption"},"coming soon..."),g.default.createElement(ae.default,{variant:"contained",color:"default",style:{gridRow:3},onClick:()=>e.selectStrategy(2)},t("No encryption")))),g.default.createElement(He.default,null,g.default.createElement(ae.default,{onClick:e.onCancel,color:"primary"},t("Cancel"))))},Ya=e=>{let t=rt(),{translate:r}=(0,Ie.useI18n)();return g.default.createElement(g.default.Fragment,null,g.default.createElement(Ge.default,{className:t.waitMessageRoot},g.default.createElement(Ga.default,{size:48}),g.default.createElement(W.default,{variant:"body1"},e.message)),g.default.createElement(He.default,null,e.onCancel&&g.default.createElement(ae.default,{onClick:e.onCancel,color:"primary"},r("Cancel"))))},Ic=e=>{let{translate:t}=(0,Ie.useI18n)(),r=rt(),o=e.request,n=o.securityClasses.includes(2),a=o.securityClasses.includes(1),l=o.securityClasses.includes(0),i=o.securityClasses.includes(7),s=o.clientSideAuth,[u,d]=g.default.useState(n),[c,p]=g.default.useState(a),[h,x]=g.default.useState(l),[v,m]=g.default.useState(i),[S,C]=g.default.useState(s),y=()=>{let w=[];u&&w.push(2),c&&w.push(1),h&&w.push(0),v&&w.push(7);let A={securityClasses:w,clientSideAuth:S};e.grantSecurityClasses(A)};return g.default.createElement(g.default.Fragment,null,g.default.createElement(Ge.default,{className:r.grantRoot},g.default.createElement(W.default,{variant:"body1"},t("Please choose which of the following security classes to grant to the new node.")),g.default.createElement(W.default,{variant:"caption",className:r.grantHeadline},t("At least one must be granted or the key exchange will be canceled.")),g.default.createElement(je.default,{label:g.default.createElement(g.default.Fragment,null,g.default.createElement("b",null,"S2 Access Control",!n&&g.default.createElement(g.default.Fragment,null," (",t("not requested"),")")),g.default.createElement("br",null),g.default.createElement(W.default,{variant:"caption"},t("Example:")," ",t("Door locks, garage doors"),", ...")),disabled:!n,control:g.default.createElement(qe.default,{checked:u,onChange:(w,A)=>d(A)})}),g.default.createElement(je.default,{label:g.default.createElement(g.default.Fragment,null,g.default.createElement("b",null,"S2 Authenticated",!a&&g.default.createElement(g.default.Fragment,null," (",t("not requested"),")")),g.default.createElement("br",null),g.default.createElement(W.default,{variant:"caption"},t("Example:")," ",t("Lighting, sensors, security systems"),", ...")),disabled:!a,control:g.default.createElement(qe.default,{checked:c,onChange:(w,A)=>p(A)})}),g.default.createElement(je.default,{label:g.default.createElement(g.default.Fragment,null,g.default.createElement("b",null,"S2 Unauthenticated",!l&&g.default.createElement(g.default.Fragment,null," (",t("not requested"),")")),g.default.createElement("br",null),g.default.createElement(W.default,{variant:"caption"},t("Like S2 Authenticated, but without verification that the correct device is included"))),disabled:!l,control:g.default.createElement(qe.default,{checked:h,onChange:(w,A)=>x(A)})}),g.default.createElement(je.default,{label:g.default.createElement(g.default.Fragment,null,g.default.createElement("b",null,"S0 Legacy",!i&&g.default.createElement(g.default.Fragment,null," (",t("not requested"),")")),g.default.createElement("br",null),g.default.createElement(W.default,{variant:"caption"},t("Example:")," ",t("Legacy door locks without S2 support"))),disabled:!i,control:g.default.createElement(qe.default,{checked:v,onChange:(w,A)=>m(A)})}),g.default.createElement(je.default,{className:r.grantCSA,label:g.default.createElement(g.default.Fragment,null,g.default.createElement("b",null,"Client Side Authentication",!s&&g.default.createElement(g.default.Fragment,null," (",t("not requested"),")")),g.default.createElement("br",null),g.default.createElement(W.default,{variant:"caption"},t("For devices without a DSK. Authentication of the inclusion happens on the device instead of in ioBroker."))),disabled:!s,control:g.default.createElement(qe.default,{checked:S,onChange:(w,A)=>C(A)})})),g.default.createElement(He.default,null,g.default.createElement(ae.default,{onClick:y,color:"primary"},t("OK")),g.default.createElement(ae.default,{onClick:e.onCancel,color:"primary"},t("Cancel"))))},jc=e=>{let{translate:t}=(0,Ie.useI18n)(),[r,o]=g.default.useState(""),[n,a]=g.default.useState(!1),l=d=>{let c=d.target.value.replace(/[^0-9]/g,"");o(c),a(!1)},i=()=>{r.length!==5&&a(!0)},s=()=>{r.length===5&&e.setPIN(r)},u=rt();return g.default.createElement(g.default.Fragment,null,g.default.createElement(Ge.default,{className:u.validateDSKRoot},g.default.createElement(W.default,{variant:"body1",className:u.strategyGridHeadline},t("Please enter the 5-digit PIN for your device and verify that the rest of the device-specific key (DSK) matches the one on your device or the manual.")),g.default.createElement("div",{className:u.validateDSKGrid},g.default.createElement(Ka.default,{autoFocus:!0,variant:"outlined",margin:"dense",inputProps:{maxLength:5,style:{textAlign:"center"}},value:r,error:!!n,onChange:l,onBlur:i,onKeyDown:d=>{d.key==="Enter"&&s(),d.key==="Escape"&&e.onCancel()}}),g.default.createElement(W.default,{variant:"body1"},e.dsk),g.default.createElement(W.default,{variant:"caption"},"PIN"),g.default.createElement(W.default,{variant:"caption"},"DSK"))),g.default.createElement(He.default,null,g.default.createElement(ae.default,{disabled:r.length!==5,onClick:s,color:"primary"},t("OK")),g.default.createElement(ae.default,{onClick:e.onCancel,color:"primary"},t("Cancel"))))},qc=e=>{let{translate:t}=(0,Ie.useI18n)(),r=rt(),o=e.lowSecurity?$a.default:Va.default,n=e.lowSecurity?t("Node %s was added insecurely!",e.nodeId.toString()):t("Node %s was added successfully!",e.nodeId.toString()),a=e.lowSecurity?t("There was an error during secure inclusion. To try again, exclude the node first."):t("Security class: %s",e.securityClass??t("None")),l=t("The device is now being interviewed. It might take a while to show up.");return g.default.createElement(g.default.Fragment,null,g.default.createElement(Ge.default,{className:r.resultRoot},g.default.createElement(o,{className:(0,Ua.default)(r.resultIcon,e.lowSecurity?r.resultIconLowSecurity:r.resultIconOK)}),g.default.createElement(W.default,{variant:"body1",style:{fontWeight:"bold",fontSize:"125%"}},n),g.default.createElement(W.default,{variant:"body2"},a),g.default.createElement(W.default,{variant:"body2"},l)),g.default.createElement(He.default,null,g.default.createElement(ae.default,{onClick:e.onDone,color:"primary"},t("OK"))))},Qa=e=>{let{translate:t}=(0,Ie.useI18n)(),r=g.default.useMemo(()=>{switch(e.step){case 0:return g.default.createElement(Cc,{selectStrategy:e.selectStrategy,onCancel:e.onCancel});case 1:return g.default.createElement(Ya,{message:t("Put your device into inclusion mode"),onCancel:e.onCancel});case 2:return g.default.createElement(Ic,{grantSecurityClasses:e.grantSecurityClasses,request:e.request,onCancel:e.onCancel});case 3:return g.default.createElement(jc,{dsk:e.dsk,onCancel:e.onCancel,setPIN:e.setPIN});case 5:return g.default.createElement(qc,{nodeId:e.nodeId,lowSecurity:e.lowSecurity,securityClass:e.securityClass,onDone:e.onDone});case 4:return g.default.createElement(Ya,{message:t("Communicating with the device, please be patient...")})}},[e.step]);return g.default.createElement(za.default,{open:e.isOpen,onClose:e.onCancel,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",maxWidth:!1},g.default.createElement(Ha.default,{id:"alert-dialog-title"},t("Include device")),r)};var Xa=()=>{let[e]=Ot(),{alive:t,connected:r}=(0,ne.useAdapter)(),{namespace:o}=(0,ne.useGlobals)(),{translate:n}=(0,ne.useI18n)(),a=J(),{showNotification:l}=(0,ne.useDialogs)(),[i,s]=ie.default.useState(!1),[u]=(0,ne.useIoBrokerState)({id:`${o}.info.inclusion`,defaultValue:!1}),[d,,c]=(0,ne.useIoBrokerState)({id:`${o}.info.exclusion`,defaultValue:!1}),[p]=(0,ne.useIoBrokerState)({id:`${o}.info.healingNetwork`,defaultValue:!1}),[h,x]=ie.default.useState({}),[v,m]=ie.default.useState();Kt(D=>{D.type==="inclusion"?m(D.status):D.type==="healing"&&(x(D.status.progress??{}),D.status.type==="done"&&l(n("Healing the network was successful!"),"success"))});async function S(){if(!p)try{x({}),await a.beginHealingNetwork()}catch(D){l(ve(D),"error");return}}let[C,y]=ie.default.useState(!1),w=[];if(e)for(let D of Object.keys(e)){let N=e[D];N&&w.push(N)}let A=(()=>{if(!v&&!u)return{step:X.SelectStrategy,onCancel:()=>y(!1),selectStrategy:async(D,N)=>{try{await a.beginInclusion(D,N),m({type:"waitingForDevice"})}catch{l(n("Failed to start inclusion"),"error")}}};if(!v||v.type==="waitingForDevice")return{step:X.IncludeDevice,onCancel:()=>{y(!1),a.stopInclusion()}};if(v.type==="busy")return{step:X.Busy,onCancel:()=>{}};if(v.type==="validateDSK")return{step:X.ValidateDSK,dsk:v.dsk,setPIN:D=>{a.validateDSK(D)},onCancel:()=>{a.validateDSK(!1)}};if(v.type==="grantSecurityClasses")return{step:X.GrantSecurityClasses,request:v.request,grantSecurityClasses:D=>{a.grantSecurityClasses(D)},onCancel:()=>{a.grantSecurityClasses(!1)}};if(v.type==="done")return{step:X.Result,nodeId:v.nodeId,lowSecurity:v.lowSecurity,securityClass:v.securityClass,onDone:()=>{y(!1),setTimeout(()=>{m(void 0)},250)},onCancel:()=>{y(!1),setTimeout(()=>{m(void 0)},250)}}})();return t&&r?ie.default.createElement(ie.default.Fragment,null,ie.default.createElement(jn,{state:i?H.Busy:u||v?H.Including:d?H.Excluding:p?H.Healing:H.Idle,beginInclusion:()=>y(!0),beginExclusion:()=>c(!0),cancelExclusion:()=>c(!1),healNetwork:S,cancelHealing:()=>a.stopHealingNetwork()}),ie.default.createElement(La,{isBusy:i||p,setBusy:s,devices:w,healingNetwork:p,networkHealProgress:h}),A&&ie.default.createElement(Qa,{isOpen:C,...A})):ie.default.createElement(Ee,null)};var xr=f(q());function Kr(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Yr(e,t,r){e=+e,t=+t,r=(n=arguments.length)<2?(t=e,e=0,1):n<3?1:+r;for(var o=-1,n=Math.max(0,Math.ceil((t-e)/r))|0,a=new Array(n);++o<n;)a[o]=e+o*r;return a}var Qr=Math.abs,Ae=Math.cos,De=Math.sin,Za=Math.PI,nt=Za/2,Xr=Za*2,Zr=Math.max,nr=1e-12;function Jr(e,t){return Array.from({length:t-e},(r,o)=>e+o)}function Ac(e){return function(t,r){return e(t.source.value+t.target.value,r.source.value+r.target.value)}}function eo(){return Dc(!1,!1)}function Dc(e,t){var r=0,o=null,n=null,a=null;function l(i){var s=i.length,u=new Array(s),d=Jr(0,s),c=new Array(s*s),p=new Array(s),h=0,x;i=Float64Array.from({length:s*s},t?(v,m)=>i[m%s][m/s|0]:(v,m)=>i[m/s|0][m%s]);for(let v=0;v<s;++v){let m=0;for(let S=0;S<s;++S)m+=i[v*s+S]+e*i[S*s+v];h+=u[v]=m}h=Zr(0,Xr-r*s)/h,x=h?r:Xr/s;{let v=0;o&&d.sort((m,S)=>o(u[m],u[S]));for(let m of d){let S=v;if(e){let C=Jr(~s+1,s).filter(y=>y<0?i[~y*s+m]:i[m*s+y]);n&&C.sort((y,w)=>n(y<0?-i[~y*s+m]:i[m*s+y],w<0?-i[~w*s+m]:i[m*s+w]));for(let y of C)if(y<0){let w=c[~y*s+m]||(c[~y*s+m]={source:null,target:null});w.target={index:m,startAngle:v,endAngle:v+=i[~y*s+m]*h,value:i[~y*s+m]}}else{let w=c[m*s+y]||(c[m*s+y]={source:null,target:null});w.source={index:m,startAngle:v,endAngle:v+=i[m*s+y]*h,value:i[m*s+y]}}p[m]={index:m,startAngle:S,endAngle:v,value:u[m]}}else{let C=Jr(0,s).filter(y=>i[m*s+y]||i[y*s+m]);n&&C.sort((y,w)=>n(i[m*s+y],i[m*s+w]));for(let y of C){let w;if(m<y?(w=c[m*s+y]||(c[m*s+y]={source:null,target:null}),w.source={index:m,startAngle:v,endAngle:v+=i[m*s+y]*h,value:i[m*s+y]}):(w=c[y*s+m]||(c[y*s+m]={source:null,target:null}),w.target={index:m,startAngle:v,endAngle:v+=i[m*s+y]*h,value:i[m*s+y]},m===y&&(w.source=w.target)),w.source&&w.target&&w.source.value<w.target.value){let A=w.source;w.source=w.target,w.target=A}}p[m]={index:m,startAngle:S,endAngle:v,value:u[m]}}v+=x}}return c=Object.values(c),c.groups=p,a?c.sort(a):c}return l.padAngle=function(i){return arguments.length?(r=Zr(0,i),l):r},l.sortGroups=function(i){return arguments.length?(o=i,l):o},l.sortSubgroups=function(i){return arguments.length?(n=i,l):n},l.sortChords=function(i){return arguments.length?(i==null?a=null:(a=Ac(i))._=i,l):a&&a._},l}var to=Math.PI,ro=2*to,ke=1e-6,kc=ro-ke;function oo(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Ja(){return new oo}oo.prototype=Ja.prototype={constructor:oo,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,r,o){this._+="Q"+ +e+","+ +t+","+(this._x1=+r)+","+(this._y1=+o)},bezierCurveTo:function(e,t,r,o,n,a){this._+="C"+ +e+","+ +t+","+ +r+","+ +o+","+(this._x1=+n)+","+(this._y1=+a)},arcTo:function(e,t,r,o,n){e=+e,t=+t,r=+r,o=+o,n=+n;var a=this._x1,l=this._y1,i=r-e,s=o-t,u=a-e,d=l-t,c=u*u+d*d;if(n<0)throw new Error("negative radius: "+n);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(c>ke)if(!(Math.abs(d*i-s*u)>ke)||!n)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var p=r-a,h=o-l,x=i*i+s*s,v=p*p+h*h,m=Math.sqrt(x),S=Math.sqrt(c),C=n*Math.tan((to-Math.acos((x+c-v)/(2*m*S)))/2),y=C/S,w=C/m;Math.abs(y-1)>ke&&(this._+="L"+(e+y*u)+","+(t+y*d)),this._+="A"+n+","+n+",0,0,"+ +(d*p>u*h)+","+(this._x1=e+w*i)+","+(this._y1=t+w*s)}},arc:function(e,t,r,o,n,a){e=+e,t=+t,r=+r,a=!!a;var l=r*Math.cos(o),i=r*Math.sin(o),s=e+l,u=t+i,d=1^a,c=a?o-n:n-o;if(r<0)throw new Error("negative radius: "+r);this._x1===null?this._+="M"+s+","+u:(Math.abs(this._x1-s)>ke||Math.abs(this._y1-u)>ke)&&(this._+="L"+s+","+u),!!r&&(c<0&&(c=c%ro+ro),c>kc?this._+="A"+r+","+r+",0,1,"+d+","+(e-l)+","+(t-i)+"A"+r+","+r+",0,1,"+d+","+(this._x1=s)+","+(this._y1=u):c>ke&&(this._+="A"+r+","+r+",0,"+ +(c>=to)+","+d+","+(this._x1=e+r*Math.cos(n))+","+(this._y1=t+r*Math.sin(n))))},rect:function(e,t,r,o){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +r+"v"+ +o+"h"+-r+"Z"},toString:function(){return this._}};var at=Ja;var ei=Array.prototype.slice;function xe(e){return function(){return e}}function Tc(e){return e.source}function Pc(e){return e.target}function ti(e){return e.radius}function Nc(e){return e.startAngle}function Mc(e){return e.endAngle}function Bc(){return 0}function Oc(e){var t=Tc,r=Pc,o=ti,n=ti,a=Nc,l=Mc,i=Bc,s=null;function u(){var d,c=t.apply(this,arguments),p=r.apply(this,arguments),h=i.apply(this,arguments)/2,x=ei.call(arguments),v=+o.apply(this,(x[0]=c,x)),m=a.apply(this,x)-nt,S=l.apply(this,x)-nt,C=+n.apply(this,(x[0]=p,x)),y=a.apply(this,x)-nt,w=l.apply(this,x)-nt;if(s||(s=d=at()),h>nr&&(Qr(S-m)>h*2+nr?S>m?(m+=h,S-=h):(m-=h,S+=h):m=S=(m+S)/2,Qr(w-y)>h*2+nr?w>y?(y+=h,w-=h):(y-=h,w+=h):y=w=(y+w)/2),s.moveTo(v*Ae(m),v*De(m)),s.arc(0,0,v,m,S),m!==y||S!==w)if(e){var A=+e.apply(this,arguments),D=C-A,N=(y+w)/2;s.quadraticCurveTo(0,0,D*Ae(y),D*De(y)),s.lineTo(C*Ae(N),C*De(N)),s.lineTo(D*Ae(w),D*De(w))}else s.quadraticCurveTo(0,0,C*Ae(y),C*De(y)),s.arc(0,0,C,y,w);if(s.quadraticCurveTo(0,0,v*Ae(m),v*De(m)),s.closePath(),d)return s=null,d+""||null}return e&&(u.headRadius=function(d){return arguments.length?(e=typeof d=="function"?d:xe(+d),u):e}),u.radius=function(d){return arguments.length?(o=n=typeof d=="function"?d:xe(+d),u):o},u.sourceRadius=function(d){return arguments.length?(o=typeof d=="function"?d:xe(+d),u):o},u.targetRadius=function(d){return arguments.length?(n=typeof d=="function"?d:xe(+d),u):n},u.startAngle=function(d){return arguments.length?(a=typeof d=="function"?d:xe(+d),u):a},u.endAngle=function(d){return arguments.length?(l=typeof d=="function"?d:xe(+d),u):l},u.padAngle=function(d){return arguments.length?(i=typeof d=="function"?d:xe(+d),u):i},u.source=function(d){return arguments.length?(t=d,u):t},u.target=function(d){return arguments.length?(r=d,u):r},u.context=function(d){return arguments.length?(s=d??null,u):s},u}function no(){return Oc()}function ri(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}var ao=Symbol("implicit");function it(){var e=new Map,t=[],r=[],o=ao;function n(a){var l=a+"",i=e.get(l);if(!i){if(o!==ao)return o;e.set(l,i=t.push(a))}return r[(i-1)%r.length]}return n.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new Map;for(let l of a){let i=l+"";e.has(i)||e.set(i,t.push(l))}return n},n.range=function(a){return arguments.length?(r=Array.from(a),n):r.slice()},n.unknown=function(a){return arguments.length?(o=a,n):o},n.copy=function(){return it(t,r).unknown(o)},ri.apply(n,arguments),n}function ar(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function io(e,t){var r=Object.create(e.prototype);for(var o in t)r[o]=t[o];return r}function st(){}var lt=.7,ir=1/lt,We="\\s*([+-]?\\d+)\\s*",ut="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",de="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ec=/^#([0-9a-f]{3,8})$/,Fc=new RegExp("^rgb\\("+[We,We,We]+"\\)$"),Rc=new RegExp("^rgb\\("+[de,de,de]+"\\)$"),Lc=new RegExp("^rgba\\("+[We,We,We,ut]+"\\)$"),zc=new RegExp("^rgba\\("+[de,de,de,ut]+"\\)$"),Hc=new RegExp("^hsl\\("+[ut,de,de]+"\\)$"),Gc=new RegExp("^hsla\\("+[ut,de,de,ut]+"\\)$"),oi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ar(st,ct,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:ni,formatHex:ni,formatHsl:Wc,formatRgb:ai,toString:ai});function ni(){return this.rgb().formatHex()}function Wc(){return ci(this).formatHsl()}function ai(){return this.rgb().formatRgb()}function ct(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Ec.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?ii(t):r===3?new te(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?sr(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?sr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Fc.exec(e))?new te(t[1],t[2],t[3],1):(t=Rc.exec(e))?new te(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Lc.exec(e))?sr(t[1],t[2],t[3],t[4]):(t=zc.exec(e))?sr(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Hc.exec(e))?ui(t[1],t[2]/100,t[3]/100,1):(t=Gc.exec(e))?ui(t[1],t[2]/100,t[3]/100,t[4]):oi.hasOwnProperty(e)?ii(oi[e]):e==="transparent"?new te(NaN,NaN,NaN,0):null}function ii(e){return new te(e>>16&255,e>>8&255,e&255,1)}function sr(e,t,r,o){return o<=0&&(e=t=r=NaN),new te(e,t,r,o)}function Vc(e){return e instanceof st||(e=ct(e)),e?(e=e.rgb(),new te(e.r,e.g,e.b,e.opacity)):new te}function Ve(e,t,r,o){return arguments.length===1?Vc(e):new te(e,t,r,o??1)}function te(e,t,r,o){this.r=+e,this.g=+t,this.b=+r,this.opacity=+o}ar(te,Ve,io(st,{brighter:function(e){return e=e==null?ir:Math.pow(ir,e),new te(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?lt:Math.pow(lt,e),new te(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:si,formatHex:si,formatRgb:li,toString:li}));function si(){return"#"+so(this.r)+so(this.g)+so(this.b)}function li(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function so(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function ui(e,t,r,o){return o<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new fe(e,t,r,o)}function ci(e){if(e instanceof fe)return new fe(e.h,e.s,e.l,e.opacity);if(e instanceof st||(e=ct(e)),!e)return new fe;if(e instanceof fe)return e;e=e.rgb();var t=e.r/255,r=e.g/255,o=e.b/255,n=Math.min(t,r,o),a=Math.max(t,r,o),l=NaN,i=a-n,s=(a+n)/2;return i?(t===a?l=(r-o)/i+(r<o)*6:r===a?l=(o-t)/i+2:l=(t-r)/i+4,i/=s<.5?a+n:2-a-n,l*=60):i=s>0&&s<1?0:l,new fe(l,i,s,e.opacity)}function di(e,t,r,o){return arguments.length===1?ci(e):new fe(e,t,r,o??1)}function fe(e,t,r,o){this.h=+e,this.s=+t,this.l=+r,this.opacity=+o}ar(fe,di,io(st,{brighter:function(e){return e=e==null?ir:Math.pow(ir,e),new fe(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?lt:Math.pow(lt,e),new fe(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,o=r+(r<.5?r:1-r)*t,n=2*r-o;return new te(lo(e>=240?e-240:e+120,n,o),lo(e,n,o),lo(e<120?e+240:e-120,n,o),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function lo(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}function uo(e,t,r,o,n){var a=e*e,l=a*e;return((1-3*e+3*a-l)*t+(4-6*a+3*l)*r+(1+3*e+3*a-3*l)*o+l*n)/6}function fi(e){var t=e.length-1;return function(r){var o=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),n=e[o],a=e[o+1],l=o>0?e[o-1]:2*n-a,i=o<t-1?e[o+2]:2*a-n;return uo((r-o/t)*t,l,n,a,i)}}function pi(e){var t=e.length;return function(r){var o=Math.floor(((r%=1)<0?++r:r)*t),n=e[(o+t-1)%t],a=e[o%t],l=e[(o+1)%t],i=e[(o+2)%t];return uo((r-o/t)*t,n,a,l,i)}}var co=e=>()=>e;function $c(e,t){return function(r){return e+r*t}}function Uc(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(o){return Math.pow(e+o*t,r)}}function mi(e){return(e=+e)==1?lr:function(t,r){return r-t?Uc(t,r,e):co(isNaN(t)?r:t)}}function lr(e,t){var r=t-e;return r?$c(e,r):co(isNaN(e)?t:e)}var Kc=function e(t){var r=mi(t);function o(n,a){var l=r((n=Ve(n)).r,(a=Ve(a)).r),i=r(n.g,a.g),s=r(n.b,a.b),u=lr(n.opacity,a.opacity);return function(d){return n.r=l(d),n.g=i(d),n.b=s(d),n.opacity=u(d),n+""}}return o.gamma=e,o}(1);function hi(e){return function(t){var r=t.length,o=new Array(r),n=new Array(r),a=new Array(r),l,i;for(l=0;l<r;++l)i=Ve(t[l]),o[l]=i.r||0,n[l]=i.g||0,a[l]=i.b||0;return o=e(o),n=e(n),a=e(a),i.opacity=1,function(s){return i.r=o(s),i.g=n(s),i.b=a(s),i+""}}}var fo=hi(fi),Yc=hi(pi);function gi(e){for(var t=e.length/6|0,r=new Array(t),o=0;o<t;)r[o]="#"+e.slice(o*6,++o*6);return r}var vi=e=>fo(e[e.length-1]);var ur=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(gi),Qc=vi(ur);var cr="http://www.w3.org/1999/xhtml",po={svg:"http://www.w3.org/2000/svg",xhtml:cr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function dr(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),po.hasOwnProperty(t)?{space:po[t],local:e}:e}function Xc(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===cr&&t.documentElement.namespaceURI===cr?t.createElement(e):t.createElementNS(r,e)}}function Zc(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function fr(e){var t=dr(e);return(t.local?Zc:Xc)(t)}function Jc(){}function pr(e){return e==null?Jc:function(){return this.querySelector(e)}}function yi(e){typeof e!="function"&&(e=pr(e));for(var t=this._groups,r=t.length,o=new Array(r),n=0;n<r;++n)for(var a=t[n],l=a.length,i=o[n]=new Array(l),s,u,d=0;d<l;++d)(s=a[d])&&(u=e.call(s,s.__data__,d,a))&&("__data__"in s&&(u.__data__=s.__data__),i[d]=u);return new z(o,this._parents)}function mr(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ed(){return[]}function bi(e){return e==null?ed:function(){return this.querySelectorAll(e)}}function td(e){return function(){var t=e.apply(this,arguments);return t==null?[]:mr(t)}}function xi(e){typeof e=="function"?e=td(e):e=bi(e);for(var t=this._groups,r=t.length,o=[],n=[],a=0;a<r;++a)for(var l=t[a],i=l.length,s,u=0;u<i;++u)(s=l[u])&&(o.push(e.call(s,s.__data__,u,l)),n.push(s));return new z(o,n)}function wi(e){return function(){return this.matches(e)}}function hr(e){return function(t){return t.matches(e)}}var rd=Array.prototype.find;function od(e){return function(){return rd.call(this.children,e)}}function nd(){return this.firstElementChild}function _i(e){return this.select(e==null?nd:od(typeof e=="function"?e:hr(e)))}var ad=Array.prototype.filter;function id(){return this.children}function sd(e){return function(){return ad.call(this.children,e)}}function Si(e){return this.selectAll(e==null?id:sd(typeof e=="function"?e:hr(e)))}function Ci(e){typeof e!="function"&&(e=wi(e));for(var t=this._groups,r=t.length,o=new Array(r),n=0;n<r;++n)for(var a=t[n],l=a.length,i=o[n]=[],s,u=0;u<l;++u)(s=a[u])&&e.call(s,s.__data__,u,a)&&i.push(s);return new z(o,this._parents)}function gr(e){return new Array(e.length)}function Ii(){return new z(this._enter||this._groups.map(gr),this._parents)}function dt(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}dt.prototype={constructor:dt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ji(e){return function(){return e}}function ld(e,t,r,o,n,a){for(var l=0,i,s=t.length,u=a.length;l<u;++l)(i=t[l])?(i.__data__=a[l],o[l]=i):r[l]=new dt(e,a[l]);for(;l<s;++l)(i=t[l])&&(n[l]=i)}function ud(e,t,r,o,n,a,l){var i,s,u=new Map,d=t.length,c=a.length,p=new Array(d),h;for(i=0;i<d;++i)(s=t[i])&&(p[i]=h=l.call(s,s.__data__,i,t)+"",u.has(h)?n[i]=s:u.set(h,s));for(i=0;i<c;++i)h=l.call(e,a[i],i,a)+"",(s=u.get(h))?(o[i]=s,s.__data__=a[i],u.delete(h)):r[i]=new dt(e,a[i]);for(i=0;i<d;++i)(s=t[i])&&u.get(p[i])===s&&(n[i]=s)}function cd(e){return e.__data__}function qi(e,t){if(!arguments.length)return Array.from(this,cd);var r=t?ud:ld,o=this._parents,n=this._groups;typeof e!="function"&&(e=ji(e));for(var a=n.length,l=new Array(a),i=new Array(a),s=new Array(a),u=0;u<a;++u){var d=o[u],c=n[u],p=c.length,h=mr(e.call(d,d&&d.__data__,u,o)),x=h.length,v=i[u]=new Array(x),m=l[u]=new Array(x),S=s[u]=new Array(p);r(d,c,v,m,S,h,t);for(var C=0,y=0,w,A;C<x;++C)if(w=v[C]){for(C>=y&&(y=C+1);!(A=m[y])&&++y<x;);w._next=A||null}}return l=new z(l,o),l._enter=i,l._exit=s,l}function Ai(){return new z(this._exit||this._groups.map(gr),this._parents)}function Di(e,t,r){var o=this.enter(),n=this,a=this.exit();return o=typeof e=="function"?e(o):o.append(e+""),t!=null&&(n=t(n)),r==null?a.remove():r(a),o&&n?o.merge(n).order():n}function ki(e){if(!(e instanceof z))throw new Error("invalid merge");for(var t=this._groups,r=e._groups,o=t.length,n=r.length,a=Math.min(o,n),l=new Array(o),i=0;i<a;++i)for(var s=t[i],u=r[i],d=s.length,c=l[i]=new Array(d),p,h=0;h<d;++h)(p=s[h]||u[h])&&(c[h]=p);for(;i<o;++i)l[i]=t[i];return new z(l,this._parents)}function Ti(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var o=e[t],n=o.length-1,a=o[n],l;--n>=0;)(l=o[n])&&(a&&l.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(l,a),a=l);return this}function Pi(e){e||(e=dd);function t(c,p){return c&&p?e(c.__data__,p.__data__):!c-!p}for(var r=this._groups,o=r.length,n=new Array(o),a=0;a<o;++a){for(var l=r[a],i=l.length,s=n[a]=new Array(i),u,d=0;d<i;++d)(u=l[d])&&(s[d]=u);s.sort(t)}return new z(n,this._parents).order()}function dd(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Ni(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Mi(){return Array.from(this)}function Bi(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var o=e[t],n=0,a=o.length;n<a;++n){var l=o[n];if(l)return l}return null}function Oi(){let e=0;for(let t of this)++e;return e}function Ei(){return!this.node()}function Fi(e){for(var t=this._groups,r=0,o=t.length;r<o;++r)for(var n=t[r],a=0,l=n.length,i;a<l;++a)(i=n[a])&&e.call(i,i.__data__,a,n);return this}function fd(e){return function(){this.removeAttribute(e)}}function pd(e){return function(){this.removeAttributeNS(e.space,e.local)}}function md(e,t){return function(){this.setAttribute(e,t)}}function hd(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function gd(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function vd(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function Ri(e,t){var r=dr(e);if(arguments.length<2){var o=this.node();return r.local?o.getAttributeNS(r.space,r.local):o.getAttribute(r)}return this.each((t==null?r.local?pd:fd:typeof t=="function"?r.local?vd:gd:r.local?hd:md)(r,t))}function vr(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function yd(e){return function(){this.style.removeProperty(e)}}function bd(e,t,r){return function(){this.style.setProperty(e,t,r)}}function xd(e,t,r){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,r)}}function Li(e,t,r){return arguments.length>1?this.each((t==null?yd:typeof t=="function"?xd:bd)(e,t,r??"")):wd(this.node(),e)}function wd(e,t){return e.style.getPropertyValue(t)||vr(e).getComputedStyle(e,null).getPropertyValue(t)}function _d(e){return function(){delete this[e]}}function Sd(e,t){return function(){this[e]=t}}function Cd(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function zi(e,t){return arguments.length>1?this.each((t==null?_d:typeof t=="function"?Cd:Sd)(e,t)):this.node()[e]}function Hi(e){return e.trim().split(/^|\s+/)}function mo(e){return e.classList||new Gi(e)}function Gi(e){this._node=e,this._names=Hi(e.getAttribute("class")||"")}Gi.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Wi(e,t){for(var r=mo(e),o=-1,n=t.length;++o<n;)r.add(t[o])}function Vi(e,t){for(var r=mo(e),o=-1,n=t.length;++o<n;)r.remove(t[o])}function Id(e){return function(){Wi(this,e)}}function jd(e){return function(){Vi(this,e)}}function qd(e,t){return function(){(t.apply(this,arguments)?Wi:Vi)(this,e)}}function $i(e,t){var r=Hi(e+"");if(arguments.length<2){for(var o=mo(this.node()),n=-1,a=r.length;++n<a;)if(!o.contains(r[n]))return!1;return!0}return this.each((typeof t=="function"?qd:t?Id:jd)(r,t))}function Ad(){this.textContent=""}function Dd(e){return function(){this.textContent=e}}function kd(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Ui(e){return arguments.length?this.each(e==null?Ad:(typeof e=="function"?kd:Dd)(e)):this.node().textContent}function Td(){this.innerHTML=""}function Pd(e){return function(){this.innerHTML=e}}function Nd(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Ki(e){return arguments.length?this.each(e==null?Td:(typeof e=="function"?Nd:Pd)(e)):this.node().innerHTML}function Md(){this.nextSibling&&this.parentNode.appendChild(this)}function Yi(){return this.each(Md)}function Bd(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Qi(){return this.each(Bd)}function Xi(e){var t=typeof e=="function"?e:fr(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Od(){return null}function Zi(e,t){var r=typeof e=="function"?e:fr(e),o=t==null?Od:typeof t=="function"?t:pr(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),o.apply(this,arguments)||null)})}function Ed(){var e=this.parentNode;e&&e.removeChild(this)}function Ji(){return this.each(Ed)}function Fd(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Rd(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function es(e){return this.select(e?Rd:Fd)}function ts(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Ld(e){return function(t){e.call(this,t,this.__data__)}}function zd(e){return e.trim().split(/^|\s+/).map(function(t){var r="",o=t.indexOf(".");return o>=0&&(r=t.slice(o+1),t=t.slice(0,o)),{type:t,name:r}})}function Hd(e){return function(){var t=this.__on;if(!!t){for(var r=0,o=-1,n=t.length,a;r<n;++r)a=t[r],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++o]=a;++o?t.length=o:delete this.__on}}}function Gd(e,t,r){return function(){var o=this.__on,n,a=Ld(t);if(o){for(var l=0,i=o.length;l<i;++l)if((n=o[l]).type===e.type&&n.name===e.name){this.removeEventListener(n.type,n.listener,n.options),this.addEventListener(n.type,n.listener=a,n.options=r),n.value=t;return}}this.addEventListener(e.type,a,r),n={type:e.type,name:e.name,value:t,listener:a,options:r},o?o.push(n):this.__on=[n]}}function rs(e,t,r){var o=zd(e+""),n,a=o.length,l;if(arguments.length<2){var i=this.node().__on;if(i){for(var s=0,u=i.length,d;s<u;++s)for(n=0,d=i[s];n<a;++n)if((l=o[n]).type===d.type&&l.name===d.name)return d.value}return}for(i=t?Gd:Hd,n=0;n<a;++n)this.each(i(o[n],t,r));return this}function os(e,t,r){var o=vr(e),n=o.CustomEvent;typeof n=="function"?n=new n(t,r):(n=o.document.createEvent("Event"),r?(n.initEvent(t,r.bubbles,r.cancelable),n.detail=r.detail):n.initEvent(t,!1,!1)),e.dispatchEvent(n)}function Wd(e,t){return function(){return os(this,e,t)}}function Vd(e,t){return function(){return os(this,e,t.apply(this,arguments))}}function ns(e,t){return this.each((typeof t=="function"?Vd:Wd)(e,t))}function*as(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var o=e[t],n=0,a=o.length,l;n<a;++n)(l=o[n])&&(yield l)}var ho=[null];function z(e,t){this._groups=e,this._parents=t}function $d(){return new z([[document.documentElement]],ho)}function Ud(){return this}z.prototype=$d.prototype={constructor:z,select:yi,selectAll:xi,selectChild:_i,selectChildren:Si,filter:Ci,data:qi,enter:Ii,exit:Ai,join:Di,merge:ki,selection:Ud,order:Ti,sort:Pi,call:Ni,nodes:Mi,node:Bi,size:Oi,empty:Ei,each:Fi,attr:Ri,style:Li,property:zi,classed:$i,text:Ui,html:Ki,raise:Yi,lower:Qi,append:Xi,insert:Zi,remove:Ji,clone:es,datum:ts,on:rs,dispatch:ns,[Symbol.iterator]:as};function go(e){return typeof e=="string"?new z([[document.querySelector(e)]],[document.documentElement]):new z([[e]],ho)}function ge(e){return function(){return e}}var vo=Math.abs,U=Math.atan2,we=Math.cos,is=Math.max,yr=Math.min,se=Math.sin,Te=Math.sqrt,Z=1e-12,$e=Math.PI,ft=$e/2,ss=2*$e;function ls(e){return e>1?0:e<-1?$e:Math.acos(e)}function yo(e){return e>=1?ft:e<=-1?-ft:Math.asin(e)}function Kd(e){return e.innerRadius}function Yd(e){return e.outerRadius}function Qd(e){return e.startAngle}function Xd(e){return e.endAngle}function Zd(e){return e&&e.padAngle}function Jd(e,t,r,o,n,a,l,i){var s=r-e,u=o-t,d=l-n,c=i-a,p=c*s-d*u;if(!(p*p<Z))return p=(d*(t-a)-c*(e-n))/p,[e+p*s,t+p*u]}function br(e,t,r,o,n,a,l){var i=e-r,s=t-o,u=(l?a:-a)/Te(i*i+s*s),d=u*s,c=-u*i,p=e+d,h=t+c,x=r+d,v=o+c,m=(p+x)/2,S=(h+v)/2,C=x-p,y=v-h,w=C*C+y*y,A=n-a,D=p*v-x*h,N=(y<0?-1:1)*Te(is(0,A*A*w-D*D)),V=(D*y-C*N)/w,O=(-D*C-y*N)/w,b=(D*y+C*N)/w,I=(-D*C+y*N)/w,_=V-m,j=O-S,K=b-m,Y=I-S;return _*_+j*j>K*K+Y*Y&&(V=b,O=I),{cx:V,cy:O,x01:-d,y01:-c,x11:V*(n/A-1),y11:O*(n/A-1)}}function bo(){var e=Kd,t=Yd,r=ge(0),o=null,n=Qd,a=Xd,l=Zd,i=null;function s(){var u,d,c=+e.apply(this,arguments),p=+t.apply(this,arguments),h=n.apply(this,arguments)-ft,x=a.apply(this,arguments)-ft,v=vo(x-h),m=x>h;if(i||(i=u=at()),p<c&&(d=p,p=c,c=d),!(p>Z))i.moveTo(0,0);else if(v>ss-Z)i.moveTo(p*we(h),p*se(h)),i.arc(0,0,p,h,x,!m),c>Z&&(i.moveTo(c*we(x),c*se(x)),i.arc(0,0,c,x,h,m));else{var S=h,C=x,y=h,w=x,A=v,D=v,N=l.apply(this,arguments)/2,V=N>Z&&(o?+o.apply(this,arguments):Te(c*c+p*p)),O=yr(vo(p-c)/2,+r.apply(this,arguments)),b=O,I=O,_,j;if(V>Z){var K=yo(V/c*se(N)),Y=yo(V/p*se(N));(A-=K*2)>Z?(K*=m?1:-1,y+=K,w-=K):(A=0,y=w=(h+x)/2),(D-=Y*2)>Z?(Y*=m?1:-1,S+=Y,C-=Y):(D=0,S=C=(h+x)/2)}var Pe=p*we(S),Ne=p*se(S),pt=c*we(w),mt=c*se(w);if(O>Z){var ht=p*we(C),gt=p*se(C),Sr=c*we(y),Cr=c*se(y),pe;if(v<$e&&(pe=Jd(Pe,Ne,Sr,Cr,ht,gt,pt,mt))){var Ir=Pe-pe[0],jr=Ne-pe[1],qr=ht-pe[0],Ar=gt-pe[1],wo=1/se(ls((Ir*qr+jr*Ar)/(Te(Ir*Ir+jr*jr)*Te(qr*qr+Ar*Ar)))/2),_o=Te(pe[0]*pe[0]+pe[1]*pe[1]);b=yr(O,(c-_o)/(wo-1)),I=yr(O,(p-_o)/(wo+1))}}D>Z?I>Z?(_=br(Sr,Cr,Pe,Ne,p,I,m),j=br(ht,gt,pt,mt,p,I,m),i.moveTo(_.cx+_.x01,_.cy+_.y01),I<O?i.arc(_.cx,_.cy,I,U(_.y01,_.x01),U(j.y01,j.x01),!m):(i.arc(_.cx,_.cy,I,U(_.y01,_.x01),U(_.y11,_.x11),!m),i.arc(0,0,p,U(_.cy+_.y11,_.cx+_.x11),U(j.cy+j.y11,j.cx+j.x11),!m),i.arc(j.cx,j.cy,I,U(j.y11,j.x11),U(j.y01,j.x01),!m))):(i.moveTo(Pe,Ne),i.arc(0,0,p,S,C,!m)):i.moveTo(Pe,Ne),!(c>Z)||!(A>Z)?i.lineTo(pt,mt):b>Z?(_=br(pt,mt,ht,gt,c,-b,m),j=br(Pe,Ne,Sr,Cr,c,-b,m),i.lineTo(_.cx+_.x01,_.cy+_.y01),b<O?i.arc(_.cx,_.cy,b,U(_.y01,_.x01),U(j.y01,j.x01),!m):(i.arc(_.cx,_.cy,b,U(_.y01,_.x01),U(_.y11,_.x11),!m),i.arc(0,0,c,U(_.cy+_.y11,_.cx+_.x11),U(j.cy+j.y11,j.cx+j.x11),m),i.arc(j.cx,j.cy,b,U(j.y11,j.x11),U(j.y01,j.x01),!m))):i.arc(0,0,c,w,y,m)}if(i.closePath(),u)return i=null,u+""||null}return s.centroid=function(){var u=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,d=(+n.apply(this,arguments)+ +a.apply(this,arguments))/2-$e/2;return[we(d)*u,se(d)*u]},s.innerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:ge(+u),s):e},s.outerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:ge(+u),s):t},s.cornerRadius=function(u){return arguments.length?(r=typeof u=="function"?u:ge(+u),s):r},s.padRadius=function(u){return arguments.length?(o=u==null?null:typeof u=="function"?u:ge(+u),s):o},s.startAngle=function(u){return arguments.length?(n=typeof u=="function"?u:ge(+u),s):n},s.endAngle=function(u){return arguments.length?(a=typeof u=="function"?u:ge(+u),s):a},s.padAngle=function(u){return arguments.length?(l=typeof u=="function"?u:ge(+u),s):l},s.context=function(u){return arguments.length?(i=u??null,s):i},s}function us(e,t){let r=new Array(t.length).fill(0).map(()=>new Array(t.length).fill(0));function o(b,I){b==null||I==null||(r[b][I]=r[I][b]=1)}let n=new Map;for(let b=0;b<t.length;b++)n.set(t[b].id,b);for(let b of t)for(let I of b.neighbors)o(n.get(b.id),n.get(I));let a=b=>b.reduce((I,_)=>I+_,0),l=Math.max(...r.map(a));l===0&&(l=1);let i=new Set;for(let b=0;b<r.length;b++){let I=r[b];a(I)===0?(I[b]=1/l,i.add(t[b].id)):r[b]=I.map(j=>j/l)}let s=1.5,u=a(r[0]);r[0]=r[0].map(b=>b*s/u);let d=a(r.map(a)),c=600,p=600,h=Math.min(c,p)*.5-150,x=h-20,v=Math.min(.15,Math.PI/2/t.length),m=2*Math.PI-t.length*v,S=.5*m*(s/d),C=go(e).append("svg").attr("preserveAspectRatio","xMidYMid meet").attr("viewBox",`${-c/2} ${-p/2} ${c} ${p}`).append("g").attr("transform",`rotate(-${(S*(180/Math.PI)).toFixed(2)})`),y=eo().padAngle(v).sortChords(Kr).sortSubgroups(()=>1)(r),w=bo().innerRadius(x).outerRadius(h),A=no().radius(x),D=it().domain(Yr(t.length-1)).range(ur[Math.max(3,Math.min(11,t.length))]);function N(b){return"linkGrad-"+b.source.index+"-"+b.target.index}let V=C.append("defs").selectAll("linearGradient").data(y).enter().append("linearGradient").attr("id",N).attr("gradientUnits","userSpaceOnUse").attr("x1",function(b,I){return x*Math.cos((b.source.endAngle-b.source.startAngle)/2+b.source.startAngle-Math.PI/2)}).attr("y1",function(b,I){return x*Math.sin((b.source.endAngle-b.source.startAngle)/2+b.source.startAngle-Math.PI/2)}).attr("x2",function(b,I){return x*Math.cos((b.target.endAngle-b.target.startAngle)/2+b.target.startAngle-Math.PI/2)}).attr("y2",function(b,I){return x*Math.sin((b.target.endAngle-b.target.startAngle)/2+b.target.startAngle-Math.PI/2)});V.append("stop").attr("offset","0%").attr("stop-color",b=>D(b.source.index)),V.append("stop").attr("offset","100%").attr("stop-color",b=>D(b.target.index));let O=C.selectAll("g").data(y.groups).enter().append("g").attr("class","node");O.append("path").style("fill",b=>D(b.index)).attr("d",w),O.append("text").each(b=>b.angle=(b.startAngle+b.endAngle)/2).attr("class",(b,I)=>`node-id${i.has(t[I].id)?" disconnected":""}`).attr("text-anchor",b=>b.angle-S>Math.PI?"end":null).attr("dominant-baseline","middle").attr("transform",b=>"rotate("+(b.angle*180/Math.PI-90)+")translate("+(h+10)+")"+(b.angle-S>Math.PI?"rotate(180)":"")).text((b,I)=>`Node ${t[I].id}`),C.datum(y).append("g").selectAll("path").data(b=>b.filter(I=>I.source.index!==I.target.index&&I.source.value>0&&I.target.value>0)).enter().append("path").attr("class",b=>`chord chord-${b.source.index} chord-${b.target.index}`).style("fill",b=>`url(#${N(b)})`).attr("d",A)}var cs=f($());var ds=()=>{let{alive:e,connected:t}=(0,cs.useAdapter)(),r=J();return xr.default.useEffect(()=>{e&&t&&r.getNetworkMap().then(o=>{us("#map",o)}).catch(o=>{console.error(o)})},[e,t,r]),e&&t?xr.default.createElement("div",{id:"map"}):xr.default.createElement(Ee,null)};var gs=f($()),_r=f(ps());function xo({error:e,resetErrorBoundary:t}){return E.default.createElement("div",{role:"alert"},E.default.createElement("p",null,"Something went wrong:"),E.default.createElement("pre",null,e.stack),E.default.createElement("button",{onClick:t},"Try again"))}var ef={en:Es(),de:Fs(),ru:Rs(),pt:Ls(),nl:zs(),fr:Hs(),it:Gs(),es:Ws(),pl:Vs(),"zh-cn":$s()},tf=E.default.memo(()=>{let[e,t]=E.default.useState(0),{translate:r}=(0,gs.useI18n)();return E.default.createElement(E.default.Fragment,null,E.default.createElement(_e.AppBar,{position:"static"},E.default.createElement(_e.Tabs,{value:e,onChange:(n,a)=>{t(a)}},E.default.createElement(_e.Tab,{label:r("Devices")}),E.default.createElement(_e.Tab,{label:r("Associations")}),E.default.createElement(_e.Tab,{label:r("Network map")}))),E.default.createElement(wt,{value:e,index:0},E.default.createElement(_r.ErrorBoundary,{FallbackComponent:xo},E.default.createElement(Xa,null))),E.default.createElement(wt,{value:e,index:1},E.default.createElement(_r.ErrorBoundary,{FallbackComponent:xo},E.default.createElement(vn,null))),E.default.createElement(wt,{value:e,index:2},E.default.createElement(_r.ErrorBoundary,{FallbackComponent:xo},E.default.createElement(ds,null))))});ms.default.render(E.default.createElement(hs.IoBrokerApp,{name:"zwave2",translations:ef},E.default.createElement(tf,null)),document.getElementById("root"));
//# sourceMappingURL=tab.js.map
