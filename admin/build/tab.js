import{a as Tt,b as Ca,c as Ba}from"./chunk-JTSJ5DMX.js";import{a as Fd,b as So,c as Od,d as xa}from"./chunk-JRYEP2OY.js";import{$ as Pd,A as an,B as pd,D as gd,F as hd,G as yd,I as vd,J as wo,K as xo,L as Ze,M as sn,N as Po,O as et,P as ln,Q as Ee,R as ka,S as bd,T as kd,U as X,V as Cd,W as Bd,X as wd,Y as Ut,Z as cn,_ as xd,a as H,aa as Z,b as u,c as M,ca as tt,d as cd,e as V,ea as wa,f as K,fa as me,g as Et,ga as pe,h as tn,ha as Sd,i as ud,ia as _d,j as ve,ja as Td,k as J,ka as Id,l as gt,la as Dd,m as dd,ma as Nd,n as Gt,na as Ad,o as fd,oa as Md,p as va,pa as jd,q as md,qa as qd,r as Le,s as ze,t as Bo,u as ba,w as Ht,x as on,y as rn,z as nn}from"./chunk-7YFLLPEL.js";var _a=H(ge=>{"use strict";var Ld=ge&&ge.__createBinding||(Object.create?function(e,t,o,r){r===void 0&&(r=o),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,r){r===void 0&&(r=o),e[r]=t[o]}),zd=ge&&ge.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Ed=ge&&ge.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var o in e)o!=="default"&&Object.prototype.hasOwnProperty.call(e,o)&&Ld(t,e,o);return zd(t,e),t},Gd=ge&&ge.__rest||function(e,t){var o={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(o[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(o[r[n]]=e[r[n]]);return o},dn=ge&&ge.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ge,"__esModule",{value:!0});ge.Dropdown=void 0;var fn=dn(hd()),Hd=dn(yd()),Ud=dn(vd()),$t=Ed(M()),$d=e=>{let{options:t,selectedOption:o,noOptionsMessage:r,placeholder:n}=e,a=Gd(e,["options","selectedOption","noOptionsMessage","placeholder"]),s=!(!!t&&t.length)&&!!r,i;return(t==null?void 0:t.length)&&(i=o),$t.createElement(Ud.default,Object.assign({value:i!=null?i:"",displayEmpty:!0,input:$t.createElement(Hd.default,{labelWidth:0}),margin:"dense"},a),$t.createElement(fn.default,{value:"",disabled:!0},n!=null?n:""),t&&t.length&&t.map(({value:c,label:f})=>$t.createElement(fn.default,{key:c,value:c},f)),s&&$t.createElement(fn.default,{key:"__empty",value:"__empty",disabled:!0},r))};ge.Dropdown=$d});var mn=H(Ie=>{"use strict";var Vd=Ie&&Ie.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ie,"__esModule",{value:!0});Ie.ModalDialog=Ie.Loader=Ie.Dropdown=void 0;var Kd=_a();Object.defineProperty(Ie,"Dropdown",{enumerable:!0,get:function(){return Kd.Dropdown}});var Xd=bd();Object.defineProperty(Ie,"Loader",{enumerable:!0,get:function(){return Vd(Xd).default}});var Qd=kd();Object.defineProperty(Ie,"ModalDialog",{enumerable:!0,get:function(){return Qd.ModalDialog}})});var Vt=H(_o=>{"use strict";var Yd=K(),Wd=V();Object.defineProperty(_o,"__esModule",{value:!0});_o.default=void 0;var Jd=Wd(M()),Zd=Yd(X()),ef=(0,Zd.default)(Jd.createElement("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");_o.default=ef});var Io=H(To=>{"use strict";var tf=K(),of=V();Object.defineProperty(To,"__esModule",{value:!0});To.default=void 0;var rf=of(M()),nf=tf(X()),af=(0,nf.default)(rf.createElement("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"}),"Restore");To.default=af});var Kt=H(Do=>{"use strict";var sf=K(),lf=V();Object.defineProperty(Do,"__esModule",{value:!0});Do.default=void 0;var cf=lf(M()),uf=sf(X()),df=(0,uf.default)(cf.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteForever");Do.default=df});var Oa=H(jo=>{"use strict";var mf=K(),pf=V();Object.defineProperty(jo,"__esModule",{value:!0});jo.default=void 0;var gf=pf(M()),hf=mf(X()),yf=(0,hf.default)(gf.createElement("path",{d:"M1 9l2 2c4.97-4.97 13.03-4.97 18 0l2-2C16.93 2.93 7.08 2.93 1 9zm8 8l3 3 3-3c-1.65-1.66-4.34-1.66-6 0zm-4-4l2 2c2.76-2.76 7.24-2.76 10 0l2-2C15.14 9.14 8.87 9.14 5 13z"}),"Wifi");jo.default=yf});var Ra=H(qo=>{"use strict";var vf=K(),bf=V();Object.defineProperty(qo,"__esModule",{value:!0});qo.default=void 0;var kf=bf(M()),Cf=vf(X()),Bf=(0,Cf.default)(kf.createElement("path",{d:"M22.99 9C19.15 5.16 13.8 3.76 8.84 4.78l2.52 2.52c3.47-.17 6.99 1.05 9.63 3.7l2-2zm-4 4c-1.29-1.29-2.84-2.13-4.49-2.56l3.53 3.53.96-.97zM2 3.05L5.07 6.1C3.6 6.82 2.22 7.78 1 9l1.99 2c1.24-1.24 2.67-2.16 4.2-2.77l2.24 2.24C7.81 10.89 6.27 11.73 5 13v.01L6.99 15c1.36-1.36 3.14-2.04 4.92-2.06L18.98 20l1.27-1.26L3.29 1.79 2 3.05zM9 17l3 3 3-3c-1.65-1.66-4.34-1.66-6 0z"}),"WifiOff");qo.default=Bf});var La=H(Fo=>{"use strict";var wf=K(),xf=V();Object.defineProperty(Fo,"__esModule",{value:!0});Fo.default=void 0;var Pf=xf(M()),Sf=wf(X()),_f=(0,Sf.default)(Pf.createElement("path",{d:"M17 1H7c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 18H7V5h10v14zM12 6.72c-1.96 0-3.5 1.52-3.5 3.47h1.75c0-.93.82-1.75 1.75-1.75s1.75.82 1.75 1.75c0 1.75-2.63 1.57-2.63 4.45h1.76c0-1.96 2.62-2.19 2.62-4.45 0-1.96-1.54-3.47-3.5-3.47zm-.88 8.8h1.76v1.76h-1.76z"}),"DeviceUnknown");Fo.default=_f});var gn=H(Oo=>{"use strict";var Tf=K(),If=V();Object.defineProperty(Oo,"__esModule",{value:!0});Oo.default=void 0;var Df=If(M()),Nf=Tf(X()),Af=(0,Nf.default)(Df.createElement("path",{d:"M13 3h-2v10h2V3zm4.83 2.17l-1.42 1.42C17.99 7.86 19 9.81 19 12c0 3.87-3.13 7-7 7s-7-3.13-7-7c0-2.19 1.01-4.14 2.58-5.42L6.17 5.17C4.23 6.82 3 9.26 3 12c0 4.97 4.03 9 9 9s9-4.03 9-9c0-2.74-1.23-5.18-3.17-6.83z"}),"PowerSettingsNew");Oo.default=Af});var ss=H(zo=>{"use strict";var Ff=K(),Of=V();Object.defineProperty(zo,"__esModule",{value:!0});zo.default=void 0;var Rf=Of(M()),Lf=Ff(X()),zf=(0,Lf.default)(Rf.createElement("path",{d:"M19 13H5v-2h14v2z"}),"Remove");zo.default=zf});var is=H(Eo=>{"use strict";var Ef=K(),Gf=V();Object.defineProperty(Eo,"__esModule",{value:!0});Eo.default=void 0;var Hf=Gf(M()),Uf=Ef(X()),$f=(0,Uf.default)(Hf.createElement("path",{d:"M15.9 5c-.17 0-.32.09-.41.23l-.07.15-5.18 11.65c-.16.29-.26.61-.26.96 0 1.11.9 2.01 2.01 2.01.96 0 1.77-.68 1.96-1.59l.01-.03L16.4 5.5c0-.28-.22-.5-.5-.5zM1 9l2 2c2.88-2.88 6.79-4.08 10.53-3.62l1.19-2.68C9.89 3.84 4.74 5.27 1 9zm20 2l2-2c-1.64-1.64-3.55-2.82-5.59-3.57l-.53 2.82c1.5.62 2.9 1.53 4.12 2.75zm-4 4l2-2c-.8-.8-1.7-1.42-2.66-1.89l-.55 2.92c.42.27.83.59 1.21.97zM5 13l2 2c1.13-1.13 2.56-1.79 4.03-2l1.28-2.88c-2.63-.08-5.3.87-7.31 2.88z"}),"NetworkCheck");Eo.default=$f});var gs=H(Ho=>{"use strict";var Kf=K(),Xf=V();Object.defineProperty(Ho,"__esModule",{value:!0});Ho.default=void 0;var Qf=Xf(M()),Yf=Kf(X()),Wf=(0,Yf.default)(Qf.createElement("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home");Ho.default=Wf});var hs=H(Uo=>{"use strict";var Jf=K(),Zf=V();Object.defineProperty(Uo,"__esModule",{value:!0});Uo.default=void 0;var em=Zf(M()),tm=Jf(X()),om=(0,tm.default)(em.createElement("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}),"KeyboardArrowDown");Uo.default=om});var ys=H($o=>{"use strict";var rm=K(),nm=V();Object.defineProperty($o,"__esModule",{value:!0});$o.default=void 0;var am=nm(M()),sm=rm(X()),im=(0,sm.default)(am.createElement("path",{d:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"}),"KeyboardArrowUp");$o.default=im});var kn=H(Vo=>{"use strict";var lm=K(),cm=V();Object.defineProperty(Vo,"__esModule",{value:!0});Vo.default=void 0;var um=cm(M()),dm=lm(X()),fm=(0,dm.default)(um.createElement("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm-2 16c-2.05 0-3.81-1.24-4.58-3h1.71c.63.9 1.68 1.5 2.87 1.5 1.93 0 3.5-1.57 3.5-3.5S13.93 9.5 12 9.5c-1.35 0-2.52.78-3.1 1.9l1.6 1.6h-4V9l1.3 1.3C8.69 8.92 10.23 8 12 8c2.76 0 5 2.24 5 5s-2.24 5-5 5z"}),"RestorePage");Vo.default=fm});var vs=H(Ko=>{"use strict";var mm=K(),pm=V();Object.defineProperty(Ko,"__esModule",{value:!0});Ko.default=void 0;var gm=pm(M()),hm=mm(X()),ym=(0,hm.default)(gm.createElement("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56zm2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"}),"Language");Ko.default=ym});var Ms=H(Xo=>{"use strict";var km=K(),Cm=V();Object.defineProperty(Xo,"__esModule",{value:!0});Xo.default=void 0;var Bm=Cm(M()),wm=km(X()),xm=(0,wm.default)(Bm.createElement("path",{d:"M21 21.78L4.22 5 3 6.22l2.04 2.04C4.42 8.6 4 9.25 4 10v10c0 1.1.9 2 2 2h12c.23 0 .45-.05.66-.12L19.78 23 21 21.78zM8.9 6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2H9.66L20 18.34V10c0-1.1-.9-2-2-2h-1V6c0-2.76-2.24-5-5-5-2.56 0-4.64 1.93-4.94 4.4L8.9 7.24V6z"}),"NoEncryption");Xo.default=xm});var Js=H(Qo=>{"use strict";var _m=K(),Tm=V();Object.defineProperty(Qo,"__esModule",{value:!0});Qo.default=void 0;var Im=Tm(M()),Dm=_m(X()),Nm=(0,Dm.default)(Im.createElement("path",{d:"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"}),"Done");Qo.default=Nm});var Zs=H(Yo=>{"use strict";var Am=K(),Mm=V();Object.defineProperty(Yo,"__esModule",{value:!0});Yo.default=void 0;var jm=Mm(M()),qm=Am(X()),Fm=(0,qm.default)(jm.createElement("path",{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"}),"Redo");Yo.default=Fm});var ei=H(Wo=>{"use strict";var Om=K(),Rm=V();Object.defineProperty(Wo,"__esModule",{value:!0});Wo.default=void 0;var Lm=Rm(M()),zm=Om(X()),Em=(0,zm.default)(Lm.createElement("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline");Wo.default=Em});var ti=H(Jo=>{"use strict";var Gm=K(),Hm=V();Object.defineProperty(Jo,"__esModule",{value:!0});Jo.default=void 0;var Um=Hm(M()),$m=Gm(X()),Vm=(0,$m.default)(Um.createElement("path",{d:"M12 6v3l4-4-4-4v3c-4.42 0-8 3.58-8 8 0 1.57.46 3.03 1.24 4.26L6.7 14.8c-.45-.83-.7-1.79-.7-2.8 0-3.31 2.69-6 6-6zm6.76 1.74L17.3 9.2c.44.84.7 1.79.7 2.8 0 3.31-2.69 6-6 6v-3l-4 4 4 4v-3c4.42 0 8-3.58 8-8 0-1.57-.46-3.03-1.24-4.26z"}),"Autorenew");Jo.default=Vm});var ci=H(Zo=>{"use strict";var Xm=K(),Qm=V();Object.defineProperty(Zo,"__esModule",{value:!0});Zo.default=void 0;var Ym=Qm(M()),Wm=Xm(X()),Jm=(0,Wm.default)(Ym.createElement("path",{d:"M5 4v2h14V4H5zm0 10h4v6h6v-6h4l-7-7-7 7z"}),"Publish");Zo.default=Jm});var ui=H(er=>{"use strict";var Zm=K(),ep=V();Object.defineProperty(er,"__esModule",{value:!0});er.default=void 0;var tp=ep(M()),op=Zm(X()),rp=(0,op.default)(tp.createElement("path",{d:"M15 9H9v6h6V9zm-2 4h-2v-2h2v2zm8-2V9h-2V7c0-1.1-.9-2-2-2h-2V3h-2v2h-2V3H9v2H7c-1.1 0-2 .9-2 2v2H3v2h2v2H3v2h2v2c0 1.1.9 2 2 2h2v2h2v-2h2v2h2v-2h2c1.1 0 2-.9 2-2v-2h2v-2h-2v-2h2zm-4 6H7V7h10v10z"}),"Memory");er.default=rp});var di=H(tr=>{"use strict";var np=K(),ap=V();Object.defineProperty(tr,"__esModule",{value:!0});tr.default=void 0;var sp=ap(M()),ip=np(X()),lp=(0,ip.default)(sp.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutline");tr.default=lp});var fi=H(or=>{"use strict";var cp=K(),up=V();Object.defineProperty(or,"__esModule",{value:!0});or.default=void 0;var dp=up(M()),fp=cp(X()),mp=(0,fp.default)(dp.createElement("path",{d:"M6.99 11L3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z"}),"SwapHoriz");or.default=mp});var il=H(sr=>{"use strict";var xp=K(),Pp=V();Object.defineProperty(sr,"__esModule",{value:!0});sr.default=void 0;var ar=Pp(M()),Sp=xp(X()),_p=(0,Sp.default)(ar.createElement(ar.Fragment,null,ar.createElement("circle",{cx:"12",cy:"12",r:"3.2"}),ar.createElement("path",{d:"M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"})),"PhotoCamera");sr.default=_p});var ll=H(ir=>{"use strict";var Tp=K(),Ip=V();Object.defineProperty(ir,"__esModule",{value:!0});ir.default=void 0;var Dp=Ip(M()),Np=Tp(X()),Ap=(0,Np.default)(Dp.createElement("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"}),"Videocam");ir.default=Ap});var tu=H(Rr=>{"use strict";var Kh=K(),Xh=V();Object.defineProperty(Rr,"__esModule",{value:!0});Rr.default=void 0;var Qh=Xh(M()),Yh=Kh(X()),Wh=(0,Yh.default)(Qh.createElement("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank");Rr.default=Wh});var ou=H(Lr=>{"use strict";var Jh=K(),Zh=V();Object.defineProperty(Lr,"__esModule",{value:!0});Lr.default=void 0;var e1=Zh(M()),t1=Jh(X()),o1=(0,t1.default)(e1.createElement("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox");Lr.default=o1});var Nu=H(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.isRecoverableZWaveError=fe.isTransmissionError=fe.isZWaveError=fe.ZWaveError=fe.getErrorSuffix=fe.ZWaveErrorCodes=void 0;var l1=Ut(),Je;(function(e){e[e.PacketFormat_Truncated=0]="PacketFormat_Truncated",e[e.PacketFormat_Invalid=1]="PacketFormat_Invalid",e[e.PacketFormat_Checksum=2]="PacketFormat_Checksum",e[e.PacketFormat_InvalidPayload=3]="PacketFormat_InvalidPayload",e[e.PacketFormat_DecryptionFailed=4]="PacketFormat_DecryptionFailed",e[e.Driver_Failed=100]="Driver_Failed",e[e.Driver_Reset=101]="Driver_Reset",e[e.Driver_Destroyed=102]="Driver_Destroyed",e[e.Driver_NotReady=103]="Driver_NotReady",e[e.Driver_InvalidDataReceived=104]="Driver_InvalidDataReceived",e[e.Driver_NotSupported=105]="Driver_NotSupported",e[e.Driver_NoPriority=106]="Driver_NoPriority",e[e.Driver_InvalidCache=107]="Driver_InvalidCache",e[e.Driver_InvalidOptions=108]="Driver_InvalidOptions",e[e.Driver_NoSecurity=109]="Driver_NoSecurity",e[e.Driver_NoErrorHandler=110]="Driver_NoErrorHandler",e[e.Driver_FeatureDisabled=111]="Driver_FeatureDisabled",e[e.Controller_Timeout=200]="Controller_Timeout",e[e.Controller_NodeTimeout=201]="Controller_NodeTimeout",e[e.Controller_MessageDropped=202]="Controller_MessageDropped",e[e.Controller_ResponseNOK=203]="Controller_ResponseNOK",e[e.Controller_CallbackNOK=204]="Controller_CallbackNOK",e[e.Controller_InclusionFailed=205]="Controller_InclusionFailed",e[e.Controller_ExclusionFailed=206]="Controller_ExclusionFailed",e[e.Controller_NotSupported=207]="Controller_NotSupported",e[e.Controller_InterviewRestarted=208]="Controller_InterviewRestarted",e[e.Controller_NodeNotFound=209]="Controller_NodeNotFound",e[e.Controller_EndpointNotFound=210]="Controller_EndpointNotFound",e[e.Controller_NodeRemoved=211]="Controller_NodeRemoved",e[e.Controller_NodeInsecureCommunication=212]="Controller_NodeInsecureCommunication",e[e.Controller_MessageExpired=213]="Controller_MessageExpired",e[e.Controller_CommandError=214]="Controller_CommandError",e[e.CC_Invalid=300]="CC_Invalid",e[e.CC_NoNodeID=301]="CC_NoNodeID",e[e.CC_NotSupported=302]="CC_NotSupported",e[e.CC_NotImplemented=303]="CC_NotImplemented",e[e.CC_NoAPI=304]="CC_NoAPI",e[e.Deserialization_NotImplemented=320]="Deserialization_NotImplemented",e[e.Arithmetic=321]="Arithmetic",e[e.Argument_Invalid=322]="Argument_Invalid",e[e.Config_Invalid=340]="Config_Invalid",e[e.Config_NotFound=341]="Config_NotFound",e[e.Config_CircularImport=342]="Config_CircularImport",e[e.Config_Update_RegistryError=343]="Config_Update_RegistryError",e[e.Config_Update_PackageManagerNotFound=344]="Config_Update_PackageManagerNotFound",e[e.Config_Update_InstallFailed=345]="Config_Update_InstallFailed",e[e.RemoveFailedNode_Failed=360]="RemoveFailedNode_Failed",e[e.RemoveFailedNode_NodeOK=361]="RemoveFailedNode_NodeOK",e[e.ReplaceFailedNode_Failed=362]="ReplaceFailedNode_Failed",e[e.ReplaceFailedNode_NodeOK=363]="ReplaceFailedNode_NodeOK",e[e.ConfigurationCC_FirstParameterNumber=1e3]="ConfigurationCC_FirstParameterNumber",e[e.ConfigurationCC_NoLegacyScanOnNewDevices=1001]="ConfigurationCC_NoLegacyScanOnNewDevices",e[e.ConfigurationCC_NoResetToDefaultOnLegacyDevices=1002]="ConfigurationCC_NoResetToDefaultOnLegacyDevices",e[e.SupervisionCC_CommandFailed=1100]="SupervisionCC_CommandFailed",e[e.ManufacturerProprietaryCC_NoManufacturerId=1200]="ManufacturerProprietaryCC_NoManufacturerId",e[e.AssociationCC_InvalidGroup=1300]="AssociationCC_InvalidGroup",e[e.AssociationCC_NotAllowed=1301]="AssociationCC_NotAllowed",e[e.SecurityCC_NoNonce=1400]="SecurityCC_NoNonce",e[e.Security2CC_NoSPAN=1401]="Security2CC_NoSPAN",e[e.Security2CC_NotInitialized=1402]="Security2CC_NotInitialized",e[e.Security2CC_NotSecure=1403]="Security2CC_NotSecure",e[e.Security2CC_MissingExtension=1404]="Security2CC_MissingExtension",e[e.Security2CC_CannotDecode=1405]="Security2CC_CannotDecode",e[e.Security2CC_InvalidQRCode=1406]="Security2CC_InvalidQRCode",e[e.FirmwareUpdateCC_Busy=1500]="FirmwareUpdateCC_Busy",e[e.FirmwareUpdateCC_NotUpgradable=1501]="FirmwareUpdateCC_NotUpgradable",e[e.FirmwareUpdateCC_TargetNotFound=1502]="FirmwareUpdateCC_TargetNotFound",e[e.FirmwareUpdateCC_FailedToStart=1503]="FirmwareUpdateCC_FailedToStart",e[e.FirmwareUpdateCC_FailedToAbort=1504]="FirmwareUpdateCC_FailedToAbort",e[e.FirmwareUpdateCC_Timeout=1505]="FirmwareUpdateCC_Timeout",e[e.Invalid_Firmware_File=1506]="Invalid_Firmware_File",e[e.Unsupported_Firmware_Format=1507]="Unsupported_Firmware_Format"})(Je=fe.ZWaveErrorCodes||(fe.ZWaveErrorCodes={}));function Du(e){return`ZW${(0,l1.padStart)(e.toString(),4,"0")}`}fe.getErrorSuffix=Du;function c1(e,t){let o=` (${Du(t)})`;return e.endsWith(o)||(e+=o),e}var Ur=class extends Error{constructor(t,o,r,n){super();this.message=t,this.code=o,this.context=r,this.transactionSource=n,this.message=c1(t,o),Object.setPrototypeOf(this,Ur.prototype),Object.getPrototypeOf(this).name="ZWaveError",typeof n=="string"&&(this.stack=`ZWaveError: ${this.message}
${n}`)}};fe.ZWaveError=Ur;function ua(e){return e instanceof Error&&Object.getPrototypeOf(e).name==="ZWaveError"}fe.isZWaveError=ua;function u1(e){return ua(e)&&(e.code===Je.Controller_Timeout||e.code===Je.Controller_MessageDropped||e.code===Je.Controller_CallbackNOK||e.code===Je.Controller_ResponseNOK||e.code===Je.Controller_NodeTimeout||e.code===Je.Security2CC_CannotDecode)}fe.isTransmissionError=u1;function d1(e){if(!ua(e))return!1;switch(e.code){case Je.Controller_InterviewRestarted:case Je.Controller_NodeRemoved:return!0}return!1}fe.isRecoverableZWaveError=d1});var Mu=H(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.authHomeIdFromDSK=Ce.nwiHomeIdFromDSK=Ce.dskFromString=Ce.dskToString=Ce.isValidDSK=void 0;var f1=Ut(),$r=Nu();function Au(e){return/^(\d{5}-){7}\d{5}$/.test(e)}Ce.isValidDSK=Au;function m1(e){if(e.length!==16)throw new $r.ZWaveError(`DSK length must be 16 bytes, got ${e.length}`,$r.ZWaveErrorCodes.Argument_Invalid);let t="";for(let o=0;o<16;o+=2)o>0&&(t+="-"),t+=(0,f1.padStart)(e.readUInt16BE(o).toString(10),5,"0");return t}Ce.dskToString=m1;function p1(e){if(!Au(e))throw new $r.ZWaveError('The DSK must be in the form "aaaaa-bbbbb-ccccc-ddddd-eeeee-fffff-11111-22222"',$r.ZWaveErrorCodes.Argument_Invalid);let t=Buffer.allocUnsafe(16),o=e.split("-");for(let r=0;r<8;r++){let n=parseInt(o[r],10);t.writeUInt16BE(n,r*2)}return t}Ce.dskFromString=p1;function g1(e){let t=Buffer.allocUnsafe(4);return e.copy(t,0,8,12),t[0]|=192,t[3]&=254,t}Ce.nwiHomeIdFromDSK=g1;function h1(e){let t=Buffer.allocUnsafe(4);return e.copy(t,0,12,16),t[0]&=63,t[3]|=1,t}Ce.authHomeIdFromDSK=h1});var ju=H(Be=>{"use strict";Object.defineProperty(Be,"__esModule",{value:!0});Be.getHighestSecurityClass=Be.securityClassOrder=Be.securityClassIsS2=Be.SecurityClass=void 0;var mt;(function(e){e[e.Temporary=-2]="Temporary",e[e.None=-1]="None",e[e.S2_Unauthenticated=0]="S2_Unauthenticated",e[e.S2_Authenticated=1]="S2_Authenticated",e[e.S2_AccessControl=2]="S2_AccessControl",e[e.S0_Legacy=7]="S0_Legacy"})(mt=Be.SecurityClass||(Be.SecurityClass={}));function y1(e){return e!=null&&e>=mt.S2_Unauthenticated&&e<=mt.S2_AccessControl}Be.securityClassIsS2=y1;Be.securityClassOrder=[mt.S2_AccessControl,mt.S2_Authenticated,mt.S2_Unauthenticated,mt.S0_Legacy];function v1(e){for(let t of Be.securityClassOrder)if(e.includes(t))return t;return mt.None}Be.getHighestSecurityClass=v1});var Uu=H(Xr=>{"use strict";var k1=K(),C1=V();Object.defineProperty(Xr,"__esModule",{value:!0});Xr.default=void 0;var B1=C1(M()),w1=k1(X()),x1=(0,w1.default)(B1.createElement("path",{d:"M3 4V1h2v3h3v2H5v3H3V6H0V4h3zm3 6V7h3V4h7l1.83 2H21c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2V10h3zm7 9c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-3.2-5c0 1.77 1.43 3.2 3.2 3.2s3.2-1.43 3.2-3.2-1.43-3.2-3.2-3.2-3.2 1.43-3.2 3.2z"}),"AddAPhoto");Xr.default=x1});var _e=u(ka()),z=u(M()),sd=u(cd()),id=u(xd());var Pa=u(md()),Sa=u(J()),un=u(M()),Rd=(0,Sa.makeStyles)(e=>({tabpanel:{flex:1,position:"relative","& > *":{width:"100%",height:"100%"}}})),ht=e=>{let{children:t,value:o,index:r,...n}=e,a=Rd();return un.default.createElement("div",{className:a.tabpanel,role:"tabpanel",hidden:o!==r,...n},o===r&&un.default.createElement(Pa.default,{p:3},t))};var yt=u(M());var Qa=u(Ut()),Y=u(M());var U=u(M()),Ta=u(Ut()),Ia=u(Z()),Xt=u(mn()),Da=u(Bo()),No=u(Ee()),Ao=u(ze()),Na=u(Vt()),Aa=u(cn()),Ma=u(Io()),ja=u(Kt()),qa=u(Ze()),Fa=u(et()),Mo=u(J());var ff=(0,Mo.makeStyles)(e=>({dropdown:{width:"100%"}})),Qt=(0,Mo.styled)(qa.default)(({theme:e})=>({padding:e.spacing(1)})),pn=e=>{let{translate:t}=(0,Ia.useI18n)(),[o,r]=U.default.useState(e.sourceEndpoint),[n,a]=U.default.useState(e.group),[l,s]=U.default.useState(e.nodeId),[i,c]=U.default.useState(e.endpoint),[f,d]=U.default.useState(!1),[g,b]=U.default.useState(!1),[B,k]=U.default.useState(!1),m=o!=null&&e.groups.get(o)||[];U.default.useEffect(()=>{var N;b(o!==e.sourceEndpoint||n!==e.group||l!==e.nodeId||i!==e.endpoint);let x=!!m.find(Q=>Q.group===n),T=e.nodes.find(Q=>Q.nodeId===l),A=(N=T==null?void 0:T.endpointIndizes)!=null?N:[];d(x&&!!T&&(i==null||i===0||A.includes(i)))},[n,m,l,i]);let p=m.map(({group:x,label:T})=>({value:x,label:`${t("Group")} ${x}: ${T}`})),C=e.nodes.map(({nodeId:x})=>({value:x,label:`${t("Node")} ${(0,Ta.padStart)(x.toString(),3,"0")}`})),v=U.default.useMemo(()=>{let x=[{value:0,label:t("Root device")}];for(let T of e.endpoints)T!==0&&x.push({value:T,label:`${t("Endpoint")} ${T}`});return x},[e.endpoints]),h=U.default.useMemo(()=>{var A,N,Q;let x=(N=(A=e.nodes.find(se=>se.nodeId===l))==null?void 0:A.endpointIndizes)!=null?N:[];if(x.includes(0)||x.unshift(0),!!((Q=m.find(se=>se.group===n))==null?void 0:Q.multiChannel)){let se=[{value:"none",label:t("Root device")}];for(let Te of x)se.push({value:Te,label:Te===0?t("Root endpoint"):`${t("Endpoint")} ${Te}`});return se}else return[]},[e.nodes,m,n,l]),P=e.sourceEndpoint==null&&e.group==null&&e.nodeId==null&&e.endpoint==null;async function S(){try{k(!0),await e.save(o,n,l,i),P&&I()}catch(x){alert(t("The association could not be saved!")),console.error(`The association could not be saved! Reason: ${me(x)}`),I()}finally{k(!1)}}function I(){r(e.sourceEndpoint),a(e.group),s(e.nodeId),c(e.endpoint)}async function _(){if(!!e.delete)try{k(!0),await e.delete()}catch(x){alert(t("The association could not be deleted!")),console.error(`The association could not be deleted! Reason: ${me(x)}`),I()}finally{k(!1)}}let j=m.find(x=>x.group===n),w=m.some(x=>x.multiChannel),D=ff();return U.default.createElement(Fa.default,null,U.default.createElement(Qt,null,U.default.createElement(Xt.Dropdown,{className:D.dropdown,options:v,selectedOption:o!=null?o:"",placeholder:t("- select endpoint -"),onChange:x=>{r(x.target.value)}})),U.default.createElement(Qt,null,U.default.createElement(Xt.Dropdown,{className:D.dropdown,options:p,selectedOption:n,placeholder:t("- select group -"),onChange:x=>{a(x.target.value)}})),U.default.createElement(Qt,null,U.default.createElement(Xt.Dropdown,{className:D.dropdown,options:C,selectedOption:l,placeholder:t("- select node -"),onChange:x=>{s(x.target.value)}})),e.supportsMultiChannel&&U.default.createElement(Qt,null,(j==null?void 0:j.multiChannel)&&w&&U.default.createElement(Xt.Dropdown,{className:D.dropdown,options:h,selectedOption:i!=null?i:"none",placeholder:t("- select endpoint -"),onChange:x=>{let T=x.target.value;c(T==="none"?void 0:T)}})),U.default.createElement(Qt,null,U.default.createElement(Da.default,{variant:"contained",color:"primary",style:{flex:"1 0 auto"}},U.default.createElement(No.default,{title:t("Save association")},U.default.createElement(Ao.default,{disabled:B||!f||!g,onClick:()=>S()},P?U.default.createElement(Na.default,null):U.default.createElement(Aa.default,null))),U.default.createElement(No.default,{title:t("Undo changes")},U.default.createElement(Ao.default,{disabled:B||!g,onClick:()=>I()},U.default.createElement(Ma.default,null))),!P&&U.default.createElement(No.default,{title:t("Delete association")},U.default.createElement(Ao.default,{disabled:B,onClick:()=>_()},U.default.createElement(ja.default,null))))))};var Ge=u(M()),za=u(Z()),Yt=u(Ee()),It=u(Et()),Ea=u(J()),Ga=u(Oa()),Ha=u(Ra()),Ua=u(La()),$a=u(gn()),Mf=(0,Ea.makeStyles)(e=>({deviceIconAlive:{color:It.green[800]},deviceIconAsleep:{color:It.lightBlue[500]},deviceIconDead:{color:It.red[900]}})),Ro=e=>{let{status:t}=e,{translate:o}=(0,za.useI18n)(),r=Mf(),n=o(t!=null?t:"unknown");switch(t){case"alive":case"awake":return Ge.default.createElement(Yt.default,{title:n},Ge.default.createElement(Ga.default,{className:r.deviceIconAlive}));case"asleep":return Ge.default.createElement(Yt.default,{title:n},Ge.default.createElement($a.default,{className:r.deviceIconAsleep}));case"dead":return Ge.default.createElement(Yt.default,{title:n},Ge.default.createElement(Ha.default,{className:r.deviceIconDead}));default:return Ge.default.createElement(Yt.default,{title:n},Ge.default.createElement(Ua.default,null))}};var Wt=u(M()),Lo=u(Z()),Va=u(Le()),hn=e=>Wt.default.createElement(Va.default,{variant:"body1",style:{textAlign:"center"}},e.children),ot=()=>{let{translate:e}=(0,Lo.useI18n)();return Wt.default.createElement(hn,null,e("adapter not ready"))},Ka=()=>{let{translate:e}=(0,Lo.useI18n)();return Wt.default.createElement(hn,null,e("No devices present"))},Xa=()=>{let{translate:e}=(0,Lo.useI18n)();return Wt.default.createElement(hn,null,e("Node is not ready"))};var yn=u(Z()),Ya=u(xo()),Dt=u(Ze()),Wa=u(Po()),Ja=u(et()),Za=u(wo()),es=u(Gt()),ts=u(J()),vn=u(Le()),bn=(0,ts.makeStyles)(e=>({headline:{backgroundColor:e.palette.background.default,margin:e.spacing(-2),marginBottom:e.spacing(2),borderBottom:`1px solid ${e.palette.divider}`,padding:e.spacing(2)},table:{marginTop:e.spacing(-2)},nodeNumber:{"& > *":{verticalAlign:"middle"}},paper:{padding:e.spacing(2),backgroundColor:e.palette.background.paper,marginTop:e.spacing(4),"&:first-child":{margin:0}}}));function jf(e){let{translate:t}=(0,yn.useI18n)(),{value:o,status:r}=e.device,n=o.native.id,a=o.common.name&&!o.common.name.startsWith("Node")?o.common.name:void 0,l=bn();return Y.default.createElement("div",{className:l.headline},Y.default.createElement(vn.default,{variant:"h5",component:"h2",className:l.nodeNumber},Y.default.createElement("span",null,t("Node")," ",(0,Qa.padStart)(n.toString(),3,"0")),"\xA0",Y.default.createElement(Ro,{status:r})),a&&Y.default.createElement(vn.default,{variant:"h6",component:"h3"},a))}function qf(e){let{translate:t}=(0,yn.useI18n)(),{endpoints:o,value:r}=e.device,n=r.native.id,{sourceEndpoints:a,groups:l,supportsMultiChannel:s,hasAssociations:i,associations:c}=Y.default.useMemo(()=>{let d=[],g=!1,b=!1,B=new Map,k=[];if(o){for(let[m,p]of o)p.associationGroups?(b||(b=Object.values(p.associationGroups).some(C=>!!C.multiChannel)),B.set(m,Object.entries(p.associationGroups).map(([C,v])=>({group:parseInt(C),...v})))):B.set(m,[]),p.associations&&(d.push(...Object.entries(p.associations).map(([C,v])=>v.map(h=>({sourceEndpoint:m,group:parseInt(C),...h}))).reduce((C,v)=>[...C,...v],[]).sort((C,v)=>{var h,P;return C.group-v.group||C.nodeId-v.nodeId||((h=C.endpoint)!=null?h:-1)-((P=v.endpoint)!=null?P:-1)})),g||(g=Object.keys(p.associations).length>0));b&&k.push(0),k.push(...o.keys())}return{sourceEndpoints:k,groups:B,supportsMultiChannel:b,hasAssociations:g,associations:d}},[o]),f=bn();return Y.default.createElement(Za.default,{className:f.table},Y.default.createElement(Wa.default,null,Y.default.createElement(Ja.default,null,Y.default.createElement(Dt.default,null,t("Source endpoint")),Y.default.createElement(Dt.default,null,t("Group")),Y.default.createElement(Dt.default,null,t("Target node")),s&&Y.default.createElement(Dt.default,null,t("Target endpoint")),Y.default.createElement(Dt.default,null,"\xA0"))),Y.default.createElement(Ya.default,null,i?c.map(d=>{var g,b,B;return Y.default.createElement(pn,{key:`from${n}${(g=d.sourceEndpoint)!=null?g:-1}-to${d.group}-${d.nodeId}-${(b=d.endpoint)!=null?b:-1}`,endpoints:a!=null?a:[],groups:l,nodes:e.nodes.filter(k=>k.nodeId!==n),sourceEndpoint:(B=d.sourceEndpoint)!=null?B:0,group:d.group,nodeId:d.nodeId,endpoint:d.endpoint,supportsMultiChannel:s,save:(k,m,p,C)=>e.saveAssociation(n,d,{sourceEndpoint:k,group:m,nodeId:p,endpoint:C}),delete:()=>e.deleteAssociation(n,d)})}):Y.default.createElement(Y.default.Fragment,null),Y.default.createElement(pn,{endpoints:a!=null?a:[],groups:l,nodes:e.nodes.filter(d=>d.nodeId!==n),sourceEndpoint:void 0,group:void 0,nodeId:void 0,supportsMultiChannel:s,save:(d,g,b,B)=>e.saveAssociation(n,void 0,{sourceEndpoint:d,group:g,nodeId:b,endpoint:B})})))}var os=e=>{let{ready:t,endpoints:o}=e.device,r=!!o&&[...o.values()].some(a=>!!a.associationGroups),n=bn();return t&&!r?Y.default.createElement(Y.default.Fragment,null):Y.default.createElement(es.default,{className:n.paper,elevation:2},Y.default.createElement(jf,{device:e.device}),t?Y.default.createElement(qf,{...e}):Y.default.createElement(Xa,null))};var rs=u(Z());var ns=u(Ht()),as=e=>{let{alive:t,connected:o}=(0,rs.useAdapter)(),r=pe(),{devices:n,updateDevices:a}=e;async function l(d,g,b){g&&await s(d,g),await r.addAssociation(d,b),await a()}async function s(d,g){await r.removeAssociation(d,g),await a()}let i=n?Object.values(n).filter(Boolean):[],c=i.map(d=>({nodeId:d.value.native.id,endpointIndizes:d.value.native.endpointIndizes})),f=i.filter(d=>!d.value.native.isControllerNode);return!t||!o?yt.default.createElement(ot,null):n?f.length?yt.default.createElement(yt.default.Fragment,null,f.map((d,g)=>yt.default.createElement(os,{key:g,device:d,nodes:c,saveAssociation:l,deleteAssociation:s}))):yt.default.createElement(Ka,null):yt.default.createElement(ns.default,null)};var Ml=u(Ht()),ke=u(Z()),ne=u(M());var Go=u(ze()),rt=u(M()),ls=u(Vt()),cs=u(ss()),us=u(is()),ds=u(Z()),fs=u(J()),ms=u(ve()),te;(function(a){a[a.Idle=0]="Idle",a[a.Including=1]="Including",a[a.Excluding=2]="Excluding",a[a.Healing=3]="Healing",a[a.Busy=4]="Busy"})(te||(te={}));var Vf=(0,fs.makeStyles)(e=>({root:{display:"flex",flexDirection:"row",gap:e.spacing(1)},redButton:{background:e.palette.error.main,"&:hover":{background:e.palette.error.dark}}})),ps=e=>{let{translate:t}=(0,ds.useI18n)(),o=Vf();return rt.default.createElement("div",{className:o.root},rt.default.createElement(Go.default,{variant:"contained",color:e.state===1?"secondary":"primary",startIcon:rt.default.createElement(ls.default,null),disabled:e.state!==0&&e.state!==1,onClick:e.beginInclusion},e.state!==1?t("Include device"):t("Inclusion active")),rt.default.createElement(Go.default,{variant:"contained",color:e.state===2?"secondary":"primary",startIcon:rt.default.createElement(cs.default,null),disabled:e.state!==0&&e.state!==2,onClick:e.beginExclusion},e.state!==2?t("Exclude device"):t("Exclusion active")),rt.default.createElement(Go.default,{variant:"contained",color:"primary",className:(0,ms.default)(e.state===3&&o.redButton),startIcon:rt.default.createElement(us.default,null),disabled:e.state!==0&&e.state!==3,onClick:e.state!==3?e.healNetwork:e.cancelHealing},e.state!==3?t("Heal network"):t("Cancel healing")))};var Ni=u(Gt()),Ai=u(J()),Mi=u(wo()),ji=u(xo()),it=u(Ze()),qi=u(sn()),Fi=u(Po()),Tn=u(et()),Oi=u(Z()),ce=u(M());var wi=u(dd()),xi=u(va()),Pi=u(J()),st=u(Ze()),_n=u(et()),Si=u(Ee()),_i=u(gs()),Ti=u(hs()),Ii=u(ys()),At=u(Z()),$=u(M());var Jt=u(ze()),_s=u(J()),oe=u(M());var De=u(Z()),Zt=u(ka()),Ts=u(Kt()),Is=u(kn()),Ds=u(gn()),Ns=u(vs());var be=u(M()),bs=u(Z()),ks=u(nn()),Cs=u(an()),Bs=u(on()),ws=u(rn()),Cn=u(ze()),xs=u(mn()),Bn=u(Le()),Ps=u(J()),vm=(0,Ps.makeStyles)(e=>({root:{display:"flex",flexFlow:"column",maxWidth:400,gap:e.spacing(2)}})),Ss=e=>{let{translate:t}=(0,bs.useI18n)(),o=vm(),[r,n]=be.default.useState(e.region),a=be.default.useMemo(()=>Object.entries(e.regions).map(([l,s])=>({value:l,label:s})),[e.regions]);return be.default.createElement(Bs.default,{open:e.open,onClose:e.onCancel,maxWidth:!1},be.default.createElement(Cs.default,{id:"alert-dialog-title"},t("Set RF Region")),be.default.createElement(ks.default,{className:o.root},be.default.createElement(Bn.default,{variant:"body1"},t("Select the correct region for where you are. Using a different region may be illegal.")),be.default.createElement(xs.Dropdown,{selectedOption:r,options:a,onChange:l=>n(parseInt(l.target.value))}),be.default.createElement(Bn.default,{variant:"body2"},t("Note: Applying a different region might take a few seconds."))),be.default.createElement(ws.default,null,be.default.createElement(Cn.default,{disabled:e.region===r,onClick:()=>e.onConfirm(r),color:"primary"},t("OK")),be.default.createElement(Cn.default,{onClick:e.onCancel,color:"primary"},t("Cancel"))))};var bm=(0,_s.makeStyles)(e=>({root:{padding:e.spacing(2,0),display:"grid",gridTemplateColumns:"minmax(auto, 300px) 1fr",alignItems:"center",columnGap:e.spacing(4),rowGap:e.spacing(2)},redButton:{background:e.palette.error.main,"&:hover":{background:e.palette.error.dark}}})),As=e=>{var p;let{isBusy:t,setBusy:o}=e,{namespace:r}=(0,De.useGlobals)(),n=pe(),{translate:a}=(0,De.useI18n)(),{showModal:l,showNotification:s}=(0,De.useDialogs)(),[i,c]=oe.default.useState(!1),[f]=(0,De.useIoBrokerObject)(`${r}.info.rfRegion`,{subscribe:!1}),[d]=(0,De.useIoBrokerState)({id:`${r}.info.rfRegion`}),g=oe.default.useCallback(C=>{t||(o(!0),n.setRFRegion(C).finally(()=>o(!1)))},[n,t,o]),b=oe.default.useCallback(()=>{t||(o(!0),n.softReset().finally(()=>o(!1)))},[n,t,o]),B=oe.default.useCallback(async()=>{if(!t)try{if(!await l(a("Re-interview all?"),a("clear cache procedure")))return;o(!0),await n.clearCache(),setTimeout(()=>{o(!1)},1e3)}catch(C){s(me(C),"error");return}},[n,t,l,s]),k=oe.default.useCallback(async()=>{if(!t)try{if(!await l(a("Factory reset?"),a("factory reset procedure")))return;o(!0),await n.hardReset(),o(!1),await l(a("Factory reset successful"),a("The adapter will now restart."))}catch(C){s(me(C),"error");return}},[n,t,l,s]),m=bm();return oe.default.createElement("div",{className:m.root},oe.default.createElement(Jt.default,{disabled:t,variant:"contained",color:"primary",onClick:b,startIcon:oe.default.createElement(Ds.default,null)},a("Soft reset")),oe.default.createElement(Zt.Typography,{variant:"body2"},a("Restart the controller, e.g. when it hangs")),oe.default.createElement(Jt.default,{disabled:t,variant:"contained",color:"primary",onClick:B,startIcon:oe.default.createElement(Is.default,null)},a("Re-interview all")),oe.default.createElement(Zt.Typography,{variant:"body2"},a("Forget all information about all nodes and re-interview them. Battery-powered nodes might need to be woken up manually.")),oe.default.createElement(Jt.default,{disabled:t||d==null,variant:"contained",color:"primary",onClick:()=>c(!0),startIcon:oe.default.createElement(Ns.default,null)},a("Set RF Region")),oe.default.createElement(Zt.Typography,{variant:"body2"},a("Configure the region and radio frequencies of the controller.")),oe.default.createElement(Jt.default,{className:m.redButton,disabled:t,variant:"contained",onClick:k,startIcon:oe.default.createElement(Ts.default,null)},a("Factory reset")),oe.default.createElement(Zt.Typography,{variant:"body2"},a("Wipes all configuration of the controller. All connected nodes will be orphaned and have to be reset and included into the new network before they can be used again.")),f&&d!=null&&oe.default.createElement(Ss,{open:i,onCancel:()=>c(!1),onConfirm:C=>{g(C),c(!1)},region:d,regions:(p=f.common.states)!=null?p:{}}))};var Nt=u(M()),js=u(Ee()),Ne=u(Et()),qs=u(J()),Fs=u(Od()),Os=u(Ms()),Rs=u(ve()),Ls=(0,qs.makeStyles)(e=>({root:{display:"grid",gridTemplateColumns:"repeat(4, 16px)",gridTemplateRows:"16px"},securityIcon:{fontSize:"16px",color:Ne.grey[200]},S2_AccessControl:{color:Ne.green[800]},S2_Authenticated:{color:Ne.blue[900]},S2_Unauthenticated:{color:Ne.deepPurple[500]},S0_Legacy:{color:Ne.amber[800]}})),Pm=e=>{let t=Ls(),o=e.granted?Fs.default:Os.default;return e.supported?Nt.default.createElement(js.default,{title:`${e.title}: ${e.granted?"\u2714":"\u2718"}`},Nt.default.createElement(o,{className:(0,Rs.default)(t.securityIcon,e.granted&&t[e.className])})):Nt.default.createElement("span",null)},Sm=[["S2_AccessControl","S2 Access Control"],["S2_Authenticated","S2 Authenticated"],["S2_Unauthenticated","S2 Unauthenticated"],["S0_Legacy","S0 Legacy"]],zs=e=>{let t=Ls(),{securityClasses:o}=e;return Nt.default.createElement("div",{className:t.root},Sm.map(([r,n])=>Nt.default.createElement(Pm,{key:r,title:n,className:r,supported:r in o,granted:o[r]===!0})))};var Ks=u(J()),ae=u(M());var Es=u(J()),wn=u(Z()),O=u(M()),Gs=u(Ee()),Hs=u(ve()),xn=(0,Es.makeStyles)(e=>({tooltip:{border:`1px solid ${e.palette.divider}`,backgroundColor:e.palette.common.white,boxShadow:e.shadows[1],color:"rgba(0, 0, 0, 0.87)",fontSize:12},arrow:{"&::before":{border:`1px solid ${e.palette.divider}`,backgroundColor:e.palette.common.white,boxSizing:"border-box"}},root:{display:"grid",gridTemplateColumns:"auto auto",gridGap:e.spacing(0,1)},bad:{color:e.palette.error.main,fontWeight:"bold"}})),Us=e=>{let t=xn();return O.default.createElement(Gs.default,{arrow:!0,classes:{tooltip:t.tooltip,arrow:t.arrow},...e})},$s=e=>{var n;let t=xn(),{translate:o}=(0,wn.useI18n)(),r=(n=e.statistics)!=null?n:{commandsRX:0,commandsTX:0,commandsDroppedRX:0,commandsDroppedTX:0,timeoutResponse:0};return O.default.createElement(Us,{title:O.default.createElement("div",{className:t.root},O.default.createElement("b",null,o("sent"),":"),O.default.createElement("span",null,r.commandsTX,r.commandsDroppedTX>0&&O.default.createElement(O.default.Fragment,null," ",O.default.createElement("span",{className:t.bad},"(",r.commandsDroppedTX," ",o("dropped"),")"))),O.default.createElement("b",null,o("received"),":"),O.default.createElement("span",null,r.commandsRX,r.commandsDroppedRX>0&&O.default.createElement(O.default.Fragment,null," ",O.default.createElement("span",{className:t.bad},"(",r.commandsDroppedRX," ",o("dropped"),")"))),O.default.createElement("b",null,o("timeouts"),":"),O.default.createElement("span",{className:(0,Hs.default)(r.timeoutResponse>0?t.bad:void 0)},r.timeoutResponse))},e.children)},Vs=e=>{var n;let t=xn(),{translate:o}=(0,wn.useI18n)(),r=(n=e.statistics)!=null?n:{CAN:0,NAK:0,messagesDroppedRX:0,messagesDroppedTX:0,messagesRX:0,messagesTX:0,timeoutACK:0,timeoutCallback:0,timeoutResponse:0};return O.default.createElement(Us,{title:O.default.createElement("div",{className:t.root},O.default.createElement("b",null,o("sent"),":"),O.default.createElement("span",null,r.messagesTX,r.messagesDroppedTX>0&&O.default.createElement(O.default.Fragment,null," ",O.default.createElement("span",{className:t.bad},"(",r.messagesDroppedTX," ",o("dropped"),")"))),O.default.createElement("b",null,o("received"),":"),O.default.createElement("span",null,r.messagesRX,r.messagesDroppedRX>0&&O.default.createElement(O.default.Fragment,null," ",O.default.createElement("span",{className:t.bad},"(",r.messagesDroppedRX," ",o("dropped"),")"))),O.default.createElement("b",null,o("timeouts"),":"),O.default.createElement("div",null,"ACK:"," ",O.default.createElement("span",{className:t.bad},r.timeoutACK),O.default.createElement("br",null),"RES:"," ",O.default.createElement("span",{className:t.bad},r.timeoutResponse),O.default.createElement("br",null),"CB:"," ",O.default.createElement("span",{className:t.bad},r.timeoutCallback)),O.default.createElement("b",null,o("collisions"),":"),O.default.createElement("span",null,r.CAN),O.default.createElement("b",null,o("corrupt"),":"),O.default.createElement("span",{className:t.bad},r.NAK))},e.children)};var Pn=u(ve()),nt=u(Et()),Xs=(0,Ks.makeStyles)(e=>({root:{},arrow:{transition:"fill 0.5s ease-out, filter 0.5s ease-out"},lArrow:{marginLeft:"-24px"},error:{fill:nt.red[800],filter:`
			drop-shadow(0 0 10px ${nt.red[300]})
			drop-shadow(0 0 5px ${nt.red[300]})
			drop-shadow(0 0 1px rgba(255,255,255,0.1))
		`,transitionDuration:"0.05s"},active:{fill:nt.green[800],filter:`
			drop-shadow(0 0 10px ${nt.green[300]})
			drop-shadow(0 0 5px ${nt.green[300]})
			drop-shadow(0 0 1px rgba(255,255,255,0.1))
		`,transitionDuration:"0.05s"}})),Qs=e=>{let t=Xs();return ae.default.createElement("svg",{className:(0,Pn.default)("MuiSvgIcon-root",t.arrow,e.status&&t[e.status]),focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true"},ae.default.createElement("path",{d:"M9 3 5 6.99h3V14h2V6.99h3L9 3z"}))},Ys=e=>{let t=Xs();return ae.default.createElement("svg",{className:(0,Pn.default)("MuiSvgIcon-root",t.arrow,t.lArrow,e.status&&t[e.status]),focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true"},ae.default.createElement("path",{d:"M16 17.01V10h-2v7.01h-3L15 21l4-3.99h-3z"}))},Ws=e=>{let[t,o]=ae.default.useState(),[r,n]=ae.default.useState(),[a,l]=ae.default.useState();return ae.default.useEffect(()=>{if(t!=null&&e.statistics!=null)if(e.type==="controller"){let s=t,i=e.statistics;s.NAK<i.NAK||s.messagesDroppedTX<i.messagesDroppedTX||s.timeoutACK<i.timeoutACK||s.timeoutResponse<i.timeoutResponse||s.timeoutCallback<i.timeoutCallback?n("error"):s.messagesTX<i.messagesTX&&n("active"),s.messagesDroppedRX<i.messagesDroppedRX?l("error"):s.messagesRX<i.messagesRX&&l("active")}else{let s=t,i=e.statistics;s.commandsDroppedTX<i.commandsDroppedTX||s.timeoutResponse<i.timeoutResponse?n("error"):s.commandsTX<i.commandsTX&&n("active"),s.commandsDroppedRX<i.commandsDroppedRX?l("error"):s.commandsRX<i.commandsRX&&l("active")}o(e.statistics)},[e.statistics,n,l,t]),ae.default.useEffect(()=>{let s=setTimeout(()=>{n(void 0),l(void 0)},500);return()=>clearTimeout(s)},[n,l,e.statistics]),e.type==="controller"?ae.default.createElement(Vs,{statistics:e.statistics},ae.default.createElement("span",null,ae.default.createElement(Qs,{status:r}),ae.default.createElement(Ys,{status:a}))):ae.default.createElement($s,{statistics:e.statistics},ae.default.createElement("span",null,ae.default.createElement(Qs,{status:r}),ae.default.createElement(Ys,{status:a})))};var He=u(M()),oi=u(Z()),ri=u(Js()),ni=u(Zs()),ai=u(ei()),si=u(ti()),eo=u(Ee()),at=u(Et()),ii=u(J()),Km=(0,ii.makeStyles)(e=>({healIconPending:{color:at.blue[500],animation:"$rotation 1.5s infinite ease-in-out",animationFillMode:"forwards"},healIconFailed:{color:at.red[500]},healIconSkipped:{color:at.orange[800]},healIconDone:{color:at.green[900]},"@keyframes rotation":{"0%":{transform:"rotate(0deg)"},"95%":{transform:"rotate(720deg)",animationFillMode:"none"},"95.1%":{transform:"rotate(0deg)"}}})),li=e=>{let{status:t}=e,{translate:o}=(0,oi.useI18n)(),r=Km();switch(t){case"done":return He.default.createElement(eo.default,{title:o("done")},He.default.createElement(ri.default,{className:r.healIconDone}));case"skipped":return He.default.createElement(eo.default,{title:o("skipped")},He.default.createElement(ni.default,{className:r.healIconSkipped}));case"failed":return He.default.createElement(eo.default,{title:o("failed")},He.default.createElement(ai.default,{className:r.healIconFailed}));case"pending":return He.default.createElement(eo.default,{title:o("pending")},He.default.createElement(si.default,{className:r.healIconPending}))}throw new Error("Unknown heal status")};var vt=u(ze()),mi=u(J()),to=u(Ee()),F=u(M());var rr=u(Z()),pi=u(ci()),gi=u(Bo()),hi=u(Bd()),yi=u(kn());var Sn=u(gd()),nr=u(Le()),vi=u(ve()),bi=u(ui()),ki=u(di()),Ci=u(fi()),pp=(0,mi.makeStyles)(e=>({root:{padding:e.spacing(2,0),display:"grid",gridTemplateColumns:"minmax(auto, 300px) 1fr",alignItems:"center",columnGap:e.spacing(4),rowGap:e.spacing(2)},firmwareUpdate:{gridColumn:"1 / span 2",display:"flex",flexFlow:"row nowrap",justifyContent:"space-between",alignItems:"center",marginTop:e.spacing(4)},firmwareUpdateMessage:{gridColumn:"1 / span 2"},warning:{color:e.palette.warning.main},redButton:{background:e.palette.error.main,"&:hover":{background:e.palette.error.dark}}})),Bi=e=>{let[t,o]=F.default.useState(),[r,n]=F.default.useState(!1),[a,l]=F.default.useState(),[s,i]=F.default.useState(),c=F.default.useRef(),f=pe(),{nodeId:d,isBusy:g,setBusy:b,supportsFirmwareUpdate:B}=e,{translate:k}=(0,rr.useI18n)(),{showNotification:m,showModal:p}=(0,rr.useDialogs)(),C=e.status!=="alive"&&e.status!=="awake";async function v(){if(!!await p(k("Remove node?"),k("Do you really want to remove this node from the network?"))){b(!0);try{await f.removeFailedNode(d)}catch(T){alert(T)}finally{b(!1)}}}async function h(){await p(k("Replace node?"),k("Do you really want to replace this node?"))&&e.replaceFailedNode()}async function P(){b(!0);try{await f.refreshNodeInfo(d)}catch(x){alert(x)}finally{b(!1)}}let S=()=>{var x;(x=c.current)==null||x.click()},I=async x=>{var T;if((T=x.target.files)==null?void 0:T.length){let A=x.target.files[0],N=new Uint8Array(await A.arrayBuffer());o({name:A.name,data:N})}};async function _(){if(B&&(t==null?void 0:t.data)){b(!0);try{n(!0),l({type:"progress",sentFragments:0,totalFragments:1}),await f.beginFirmwareUpdate(d,t.name,Array.from(t.data))}catch(x){n(!1),alert(x)}finally{b(!1),i(void 0)}}}async function j(){b(!0);try{await f.abortFirmwareUpdate(d)}catch(x){alert(x)}finally{b(!1),n(!1)}}So(x=>{if(x.type==="firmwareUpdate"){let T=x.progress;if(l(T),T.type==="done"){let A=T.status>=253;if(!A)m(k("firmware update failed"),"error"),i(void 0);else{let N=k("firmware update successful");A&&(T.waitTime?N+=" "+k("firmware update wait time").replace("{0}",T.waitTime.toString()):N+=" "+k("firmware update no wait time"),N+=" "+k("firmware update wake up")),i(N)}o(void 0),n(!1),setTimeout(()=>{l(void 0)},1e4)}else n(!0)}});let w=(a==null?void 0:a.type)==="progress"&&typeof a.totalFragments=="number"&&typeof a.sentFragments=="number"?Math.round(a.sentFragments/a.totalFragments*1e4)/100:Number.NaN;F.default.useEffect(()=>{(a==null?void 0:a.type)!=="done"&&(e.status==="asleep"&&r?i(k("wake up device")):i(void 0))},[e.status,r,a]);let D=pp();return F.default.createElement("div",{className:D.root},F.default.createElement(vt.default,{disabled:g,variant:"contained",color:"primary",startIcon:F.default.createElement(yi.default,null),onClick:()=>P(),fullWidth:!0},k("Refresh node info")),F.default.createElement(nr.default,{variant:"body2"},k("Forget all information about this node and re-interview it. Battery-powered nodes might need to be woken up manually.")),F.default.createElement(to.default,{title:C?"":k("This is not a failed node")},F.default.createElement("span",null,F.default.createElement(vt.default,{disabled:!C||g,variant:"contained",className:D.redButton,onClick:v,startIcon:F.default.createElement(ki.default,null),fullWidth:!0},k("Remove failed node")))),F.default.createElement(nr.default,{variant:"body2"},k("Remove this node from the network."),F.default.createElement("br",null),F.default.createElement("span",{className:D.warning},k("WARNING: Only do this if you no longer have physical access."))),F.default.createElement(to.default,{title:C?"":k("This is not a failed node")},F.default.createElement("span",null,F.default.createElement(vt.default,{disabled:!C||g,variant:"contained",className:D.redButton,onClick:h,startIcon:F.default.createElement(Ci.default,null),fullWidth:!0},k("Replace failed node")))),F.default.createElement(nr.default,{variant:"body2"},k("Replace this node with a different one, keeping the node ID."),F.default.createElement("br",null),F.default.createElement("span",{className:D.warning},k("WARNING: Make sure that the node is reset before attempting this."))),B&&F.default.createElement(F.default.Fragment,null,F.default.createElement("div",{className:D.firmwareUpdate},F.default.createElement(vt.default,{disabled:r||g,variant:"contained",color:"primary",onClick:()=>S(),style:{flex:"1 0 auto"},startIcon:F.default.createElement(bi.default,null)},k("Update Firmware")),F.default.createElement("input",{type:"file",hidden:!0,id:"firmwareFile",accept:".exe,.ex_,.ota,.otz,.hex,.hec,.gbl,.bin",ref:x=>{x&&(c.current=x)},onChange:I}),r?F.default.createElement(F.default.Fragment,null,F.default.createElement("div",{className:"progress",style:{margin:"0 1em",flex:"1 1 100%"}},Number.isNaN(w)?F.default.createElement(Sn.default,null):F.default.createElement(Sn.default,{variant:"determinate",value:w})),!Number.isNaN(w)&&F.default.createElement("div",{style:{whiteSpace:"nowrap",marginRight:"1em"}},w.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})," %")):F.default.createElement("span",{style:{flex:"1 1 100%",textAlign:"center",padding:"0 1em",wordBreak:"break-all"}},t?`${t.name} (${t.data.byteLength} bytes)`:k("no file selected")),F.default.createElement(gi.default,{variant:"contained",color:"primary",style:{flex:"1 0 auto"}},F.default.createElement(to.default,{title:k("start firmware update")},F.default.createElement(vt.default,{disabled:r||g||!(t==null?void 0:t.data),onClick:()=>_()},F.default.createElement(pi.default,null))),F.default.createElement(to.default,{title:k("abort firmware update")},F.default.createElement(vt.default,{disabled:!r||g,onClick:()=>j()},F.default.createElement(hi.default,null))))),s?F.default.createElement("div",{className:D.firmwareUpdateMessage},s):F.default.createElement("div",{className:(0,vi.default)(D.firmwareUpdateMessage,D.warning)},k("firmware update warning"))))};var gp=(0,Pi.makeStyles)(e=>({mainRow:{"& > *":{border:0}},controllerIcon:{fontSize:"16px",margin:"7px",color:e.palette.text.secondary},idCell:{display:"flex",flexFlow:"row nowrap",alignItems:"center"},expanderCell:{paddingBottom:0,paddingTop:0,background:e.palette.background.default}})),Di=e=>{var C,v;let{healStatus:t,device:o}=e,{value:r,status:n}=o,a=r.native.id,l=!!r.native.supportsFirmwareUpdate,{secure:s,securityClasses:i,isControllerNode:c}=r.native,[f,d]=$.default.useState(c),g=gp(),{translate:b}=(0,At.useI18n)(),{namespace:B}=(0,At.useGlobals)(),[k]=(0,At.useIoBrokerState)({id:c?`${B}.info.statistics`:`${B}.${wa(a)}.info.statistics`}),[m,p]=$.default.useState();return $.default.useEffect(()=>{if(k)try{let h=JSON.parse(k);p(h)}catch(h){console.error(h)}},[k]),$.default.createElement($.default.Fragment,null,$.default.createElement(_n.default,{hover:!0,className:g.mainRow},$.default.createElement(st.default,{className:g.idCell},$.default.createElement(xi.default,{"aria-label":"expand row",size:"small",onClick:()=>d(!f)},f?$.default.createElement(Ii.default,null):$.default.createElement(Ti.default,null)),$.default.createElement("span",{style:{marginLeft:"auto"}},a)),$.default.createElement(st.default,null,r.common.name),$.default.createElement(st.default,null,(v=(C=r.native.type.specific)!=null?C:r.native.type.generic)!=null?v:b("unknown")),$.default.createElement(st.default,null,s&&i&&$.default.createElement(zs,{securityClasses:i})),$.default.createElement(st.default,null,c?$.default.createElement(Si.default,{title:b("Controller node")},$.default.createElement(_i.default,null)):$.default.createElement($.default.Fragment,null,$.default.createElement(Ro,{status:n}),!!t&&$.default.createElement($.default.Fragment,null," ",$.default.createElement(li,{status:e.healStatus})))),$.default.createElement(st.default,null,$.default.createElement(Ws,{type:c?"controller":"node",statistics:m}))),$.default.createElement(_n.default,null,$.default.createElement(st.default,{colSpan:6,className:g.expanderCell},$.default.createElement(wi.default,{in:f,timeout:"auto",unmountOnExit:!0},c?$.default.createElement(As,{isBusy:e.isBusy,setBusy:e.setBusy}):$.default.createElement(Bi,{nodeId:a,status:n,isBusy:e.isBusy,setBusy:e.setBusy,supportsFirmwareUpdate:l,replaceFailedNode:e.replaceFailedNode})))))};var hp=(0,Ai.makeStyles)(e=>({root:{width:"100%",marginTop:e.spacing(2)},container:{overflowY:"auto"},empty:{textAlign:"center",fontStyle:"italic"}})),Ri=e=>{let{translate:t}=(0,Oi.useI18n)(),o=hp(),{devices:r,healingNetwork:n,networkHealProgress:a}=e;return ce.default.createElement(Ni.default,{className:o.root,elevation:2},ce.default.createElement(qi.default,{className:o.container},ce.default.createElement(Mi.default,null,ce.default.createElement(Fi.default,null,ce.default.createElement(Tn.default,null,ce.default.createElement(it.default,{align:"right"},"#"),ce.default.createElement(it.default,null,t("Name")),ce.default.createElement(it.default,null,t("Type")),ce.default.createElement(it.default,null,t("Security")),ce.default.createElement(it.default,null,t("Status")),ce.default.createElement(it.default,null,t("Statistics")))),ce.default.createElement(ji.default,null,r.length?r.map(l=>{let s=l.value.native.id;return ce.default.createElement(Di,{key:`device-${s}`,isBusy:e.isBusy,setBusy:e.setBusy,device:l,healStatus:n?a[s]:void 0,replaceFailedNode:()=>e.replaceFailedNode(s)})}):ce.default.createElement(Tn.default,null,ce.default.createElement(it.default,{colSpan:6,className:o.empty},t("No devices present")))))))};var re=u(ze()),_l=u(on()),je=u(rn()),qe=u(nn()),Tl=u(an()),Il=u(Ht()),Dl=u(J()),W=u(Le()),ue=u(Z()),y=u(M()),pr=u(Cd()),jn=u(wd()),gr=u(Et()),hr=u(ve()),Nl=u(ln()),kt=u(pd()),Ct=u(ba());var he=u(M()),V0=u(tn()),Wi=u(ve()),lt=u(J()),Ji=u(Gt());var Li=u(M()),zi=u(gt()),Ei=(0,zi.createSvgIcon)(Li.createElement("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined");var Gi=u(M()),Hi=u(gt()),Ui=(0,Hi.createSvgIcon)(Gi.createElement("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined");var $i=u(M()),Vi=u(gt()),Ki=(0,Vi.createSvgIcon)($i.createElement("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline");var Xi=u(M()),Qi=u(gt()),Yi=(0,Qi.createSvgIcon)(Xi.createElement("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined");var Zi=u(va()),el=u(gt()),yp=function(t){var o=t.palette.type==="light"?lt.darken:lt.lighten,r=t.palette.type==="light"?lt.lighten:lt.darken;return{root:tt({},t.typography.body2,{borderRadius:t.shape.borderRadius,backgroundColor:"transparent",display:"flex",padding:"6px 16px"}),standardSuccess:{color:o(t.palette.success.main,.6),backgroundColor:r(t.palette.success.main,.9),"& $icon":{color:t.palette.success.main}},standardInfo:{color:o(t.palette.info.main,.6),backgroundColor:r(t.palette.info.main,.9),"& $icon":{color:t.palette.info.main}},standardWarning:{color:o(t.palette.warning.main,.6),backgroundColor:r(t.palette.warning.main,.9),"& $icon":{color:t.palette.warning.main}},standardError:{color:o(t.palette.error.main,.6),backgroundColor:r(t.palette.error.main,.9),"& $icon":{color:t.palette.error.main}},outlinedSuccess:{color:o(t.palette.success.main,.6),border:"1px solid ".concat(t.palette.success.main),"& $icon":{color:t.palette.success.main}},outlinedInfo:{color:o(t.palette.info.main,.6),border:"1px solid ".concat(t.palette.info.main),"& $icon":{color:t.palette.info.main}},outlinedWarning:{color:o(t.palette.warning.main,.6),border:"1px solid ".concat(t.palette.warning.main),"& $icon":{color:t.palette.warning.main}},outlinedError:{color:o(t.palette.error.main,.6),border:"1px solid ".concat(t.palette.error.main),"& $icon":{color:t.palette.error.main}},filledSuccess:{color:"#fff",fontWeight:t.typography.fontWeightMedium,backgroundColor:t.palette.success.main},filledInfo:{color:"#fff",fontWeight:t.typography.fontWeightMedium,backgroundColor:t.palette.info.main},filledWarning:{color:"#fff",fontWeight:t.typography.fontWeightMedium,backgroundColor:t.palette.warning.main},filledError:{color:"#fff",fontWeight:t.typography.fontWeightMedium,backgroundColor:t.palette.error.main},icon:{marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9},message:{padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}}},tl={success:he.createElement(Ei,{fontSize:"inherit"}),warning:he.createElement(Ui,{fontSize:"inherit"}),error:he.createElement(Ki,{fontSize:"inherit"}),info:he.createElement(Yi,{fontSize:"inherit"})},vp=he.createElement(Ca,{fontSize:"small"}),bp=he.forwardRef(function(t,o){var r=t.action,n=t.children,a=t.classes,l=t.className,s=t.closeText,i=s===void 0?"Close":s,c=t.color,f=t.icon,d=t.iconMapping,g=d===void 0?tl:d,b=t.onClose,B=t.role,k=B===void 0?"alert":B,m=t.severity,p=m===void 0?"success":m,C=t.variant,v=C===void 0?"standard":C,h=Tt(t,["action","children","classes","className","closeText","color","icon","iconMapping","onClose","role","severity","variant"]);return he.createElement(Ji.default,tt({role:k,square:!0,elevation:0,className:(0,Wi.default)(a.root,a["".concat(v).concat((0,el.capitalize)(c||p))],l),ref:o},h),f!==!1?he.createElement("div",{className:a.icon},f||g[p]||tl[p]):null,he.createElement("div",{className:a.message},n),r!=null?he.createElement("div",{className:a.action},r):null,r==null&&b?he.createElement("div",{className:a.action},he.createElement(Zi.default,{size:"small","aria-label":i,title:i,color:"inherit",onClick:b},vp)):null)}),ct=(0,lt.withStyles)(yp,{name:"MuiAlert"})(bp);var oo=u(M()),ny=u(tn()),ol=u(ve()),Ue=u(J()),rl=u(fd()),nl=u(gt()),kp=function(t){return{root:tt({},t.typography.button,{boxSizing:"border-box",borderRadius:t.shape.borderRadius,padding:11,border:"1px solid ".concat((0,Ue.alpha)(t.palette.action.active,.12)),color:(0,Ue.alpha)(t.palette.action.active,.38),"&$selected":{color:t.palette.action.active,backgroundColor:(0,Ue.alpha)(t.palette.action.active,.12),"&:hover":{backgroundColor:(0,Ue.alpha)(t.palette.action.active,.15)},"& + &":{borderLeft:0,marginLeft:0}},"&$disabled":{color:(0,Ue.alpha)(t.palette.action.disabled,.12)},"&:hover":{textDecoration:"none",backgroundColor:(0,Ue.alpha)(t.palette.text.primary,.05),"@media (hover: none)":{backgroundColor:"transparent"},"&$disabled":{backgroundColor:"transparent"}}}),disabled:{},selected:{},label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},sizeSmall:{padding:7,fontSize:t.typography.pxToRem(13)},sizeLarge:{padding:15,fontSize:t.typography.pxToRem(15)}}},Cp=oo.forwardRef(function(t,o){var r=t.children,n=t.classes,a=t.className,l=t.disabled,s=l===void 0?!1:l,i=t.disableFocusRipple,c=i===void 0?!1:i,f=t.onChange,d=t.onClick,g=t.selected,b=t.size,B=b===void 0?"medium":b,k=t.value,m=Tt(t,["children","classes","className","disabled","disableFocusRipple","onChange","onClick","selected","size","value"]),p=function(v){d&&(d(v,k),v.isDefaultPrevented())||f&&f(v,k)};return oo.createElement(rl.default,tt({className:(0,ol.default)(n.root,a,s&&n.disabled,g&&n.selected,B!=="medium"&&n["size".concat((0,nl.capitalize)(B))]),disabled:s,focusRipple:!c,ref:o,onClick:p,onChange:f,value:k,"aria-pressed":g},m),oo.createElement("span",{className:n.label},r))}),$e=(0,Ue.withStyles)(kp,{name:"MuiToggleButton"})(Cp);var Ae=u(M()),fy=u(ud()),py=u(tn()),Dn=u(ve());function In(e,t){return t===void 0||e===void 0?!1:Array.isArray(t)?t.indexOf(e)>=0:e===t}var al=u(J()),sl=u(gt()),Bp=function(t){return{root:{display:"inline-flex",borderRadius:t.shape.borderRadius},vertical:{flexDirection:"column"},grouped:{},groupedHorizontal:{"&:not(:first-child)":{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:last-child)":{borderTopRightRadius:0,borderBottomRightRadius:0}},groupedVertical:{"&:not(:first-child)":{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0},"&:not(:last-child)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},wp=Ae.forwardRef(function(t,o){var r=t.children,n=t.classes,a=t.className,l=t.exclusive,s=l===void 0?!1:l,i=t.onChange,c=t.orientation,f=c===void 0?"horizontal":c,d=t.size,g=d===void 0?"medium":d,b=t.value,B=Tt(t,["children","classes","className","exclusive","onChange","orientation","size","value"]),k=function(C,v){if(!!i){var h=b&&b.indexOf(v),P;b&&h>=0?(P=b.slice(),P.splice(h,1)):P=b?b.concat(v):[v],i(C,P)}},m=function(C,v){!i||i(C,b===v?null:v)};return Ae.createElement("div",tt({role:"group",className:(0,Dn.default)(n.root,a,f==="vertical"&&n.vertical),ref:o},B),Ae.Children.map(r,function(p){return Ae.isValidElement(p)?Ae.cloneElement(p,{className:(0,Dn.default)(n.grouped,n["grouped".concat((0,sl.capitalize)(f))],p.props.className),onChange:s?m:k,selected:p.props.selected===void 0?In(p.props.value,b):p.props.selected,size:p.props.size||g}):null}))}),ro=(0,al.withStyles)(Bp,{name:"MuiToggleButtonGroup"})(wp);var wl=u(il()),xl=u(ll()),Pl=u(J()),q=u(M());var Mt=u(M());function cl(e,t){if(typeof performance=="undefined"||typeof window=="undefined")return;let o=(0,Mt.useRef)(),r=(0,Mt.useRef)(performance.now()),n=(0,Mt.useRef)(performance.now()),a=()=>{let l=performance.now(),s=l-n.current,i=l-r.current;e({totalMs:s,deltaMs:i}),r.current=l,o.current=requestAnimationFrame(a)};(0,Mt.useEffect)(()=>(o.current=requestAnimationFrame(a),()=>cancelAnimationFrame(o.current)),t)}var Ve=class{constructor(t,o){this.width=o,this.height=t.length/o,this.data=t}static createEmpty(t,o){return new Ve(new Uint8ClampedArray(t*o),t)}get(t,o){return t<0||t>=this.width||o<0||o>=this.height?!1:!!this.data[o*this.width+t]}set(t,o,r){this.data[o*this.width+t]=r?1:0}setRegion(t,o,r,n,a){for(let l=o;l<o+n;l++)for(let s=t;s<t+r;s++)this.set(s,l,!!a)}},Me=8,Mp=24;function ul(e,t,o){return e<t?t:e>o?o:e}var Nn=class{constructor(t,o,r){this.width=t;let n=t*o;if(r&&r.length!==n)throw new Error("Wrong buffer size");this.data=r||new Uint8ClampedArray(n)}get(t,o){return this.data[o*this.width+t]}set(t,o,r){this.data[o*this.width+t]=r}};function jp(e,t,o,r,n,a){let l=t*o;if(e.length!==l*4)throw new Error("Malformed data passed to binarizer.");let s=0,i;a&&(i=new Uint8ClampedArray(e.buffer,s,l),s+=l);let c=new Nn(t,o,i);if(n.useIntegerApproximation)for(let p=0;p<o;p++)for(let C=0;C<t;C++){let v=(p*t+C)*4,h=e[v],P=e[v+1],S=e[v+2];c.set(C,p,n.red*h+n.green*P+n.blue*S+128>>8)}else for(let p=0;p<o;p++)for(let C=0;C<t;C++){let v=(p*t+C)*4,h=e[v],P=e[v+1],S=e[v+2];c.set(C,p,n.red*h+n.green*P+n.blue*S)}let f=Math.ceil(t/Me),d=Math.ceil(o/Me),g=f*d,b;a&&(b=new Uint8ClampedArray(e.buffer,s,g),s+=g);let B=new Nn(f,d,b);for(let p=0;p<d;p++)for(let C=0;C<f;C++){let v=Infinity,h=0;for(let I=0;I<Me;I++)for(let _=0;_<Me;_++){let j=c.get(C*Me+_,p*Me+I);v=Math.min(v,j),h=Math.max(h,j)}let P=(v+h)/2;if(P=Math.min(255,P*1.11),h-v<=Mp&&(P=v/2,p>0&&C>0)){let I=(B.get(C,p-1)+2*B.get(C-1,p)+B.get(C-1,p-1))/4;v<I&&(P=I)}B.set(C,p,P)}let k;if(a){let p=new Uint8ClampedArray(e.buffer,s,l);s+=l,k=new Ve(p,t)}else k=Ve.createEmpty(t,o);let m=null;if(r)if(a){let p=new Uint8ClampedArray(e.buffer,s,l);m=new Ve(p,t)}else m=Ve.createEmpty(t,o);for(let p=0;p<d;p++)for(let C=0;C<f;C++){let v=ul(C,2,f-3),h=ul(p,2,d-3),P=0;for(let I=-2;I<=2;I++)for(let _=-2;_<=2;_++)P+=B.get(v+I,h+_);let S=P/25;for(let I=0;I<Me;I++)for(let _=0;_<Me;_++){let j=C*Me+I,w=p*Me+_,D=c.get(j,w);k.set(j,w,D<=S),r&&m.set(j,w,!(D<=S))}}return r?{binarized:k,inverted:m}:{binarized:k}}var dl=class{constructor(t){this.byteOffset=0,this.bitOffset=0,this.bytes=t}readBits(t){if(t<1||t>32||t>this.available())throw new Error("Cannot read "+t.toString()+" bits");let o=0;if(this.bitOffset>0){let r=8-this.bitOffset,n=t<r?t:r,a=r-n,l=255>>8-n<<a;o=(this.bytes[this.byteOffset]&l)>>a,t-=n,this.bitOffset+=n,this.bitOffset===8&&(this.bitOffset=0,this.byteOffset++)}if(t>0){for(;t>=8;)o=o<<8|this.bytes[this.byteOffset]&255,this.byteOffset++,t-=8;if(t>0){let r=8-t,n=255>>r<<r;o=o<<t|(this.bytes[this.byteOffset]&n)>>r,this.bitOffset+=t}}return o}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}},we;(function(e){e.Numeric="numeric",e.Alphanumeric="alphanumeric",e.Byte="byte",e.Kanji="kanji",e.ECI="eci",e.StructuredAppend="structuredappend"})(we||(we={}));var Ke;(function(e){e[e.Terminator=0]="Terminator",e[e.Numeric=1]="Numeric",e[e.Alphanumeric=2]="Alphanumeric",e[e.Byte=4]="Byte",e[e.Kanji=8]="Kanji",e[e.ECI=7]="ECI",e[e.StructuredAppend=3]="StructuredAppend"})(Ke||(Ke={}));function qp(e,t){let o=[],r="",n=[10,12,14][t],a=e.readBits(n);for(;a>=3;){let l=e.readBits(10);if(l>=1e3)throw new Error("Invalid numeric value above 999");let s=Math.floor(l/100),i=Math.floor(l/10)%10,c=l%10;o.push(48+s,48+i,48+c),r+=s.toString()+i.toString()+c.toString(),a-=3}if(a===2){let l=e.readBits(7);if(l>=100)throw new Error("Invalid numeric value above 99");let s=Math.floor(l/10),i=l%10;o.push(48+s,48+i),r+=s.toString()+i.toString()}else if(a===1){let l=e.readBits(4);if(l>=10)throw new Error("Invalid numeric value above 9");o.push(48+l),r+=l.toString()}return{bytes:o,text:r}}var jt=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Fp(e,t){let o=[],r="",n=[9,11,13][t],a=e.readBits(n);for(;a>=2;){let l=e.readBits(11),s=Math.floor(l/45),i=l%45;o.push(jt[s].charCodeAt(0),jt[i].charCodeAt(0)),r+=jt[s]+jt[i],a-=2}if(a===1){let l=e.readBits(6);o.push(jt[l].charCodeAt(0)),r+=jt[l]}return{bytes:o,text:r}}function Op(e,t){let o=[],r="",n=[8,16,16][t],a=e.readBits(n);for(let l=0;l<a;l++){let s=e.readBits(8);o.push(s)}try{r+=decodeURIComponent(o.map(l=>`%${("0"+l.toString(16)).substr(-2)}`).join(""))}catch(l){}return{bytes:o,text:r}}function Rp(e,t){let o=[],r=[8,10,12][t],n=e.readBits(r);for(let l=0;l<n;l++){let s=e.readBits(13),i=Math.floor(s/192)<<8|s%192;i<7936?i+=33088:i+=49472,o.push(i>>8,i&255)}let a=new TextDecoder("shift-jis").decode(Uint8Array.from(o));return{bytes:o,text:a}}function Lp(e,t){let o=new dl(e),r=t<=9?0:t<=26?1:2,n={text:"",bytes:[],chunks:[],version:t};for(;o.available()>=4;){let a=o.readBits(4);if(a===Ke.Terminator)return n;if(a===Ke.ECI)o.readBits(1)===0?n.chunks.push({type:we.ECI,assignmentNumber:o.readBits(7)}):o.readBits(1)===0?n.chunks.push({type:we.ECI,assignmentNumber:o.readBits(14)}):o.readBits(1)===0?n.chunks.push({type:we.ECI,assignmentNumber:o.readBits(21)}):n.chunks.push({type:we.ECI,assignmentNumber:-1});else if(a===Ke.Numeric){let l=qp(o,r);n.text+=l.text,n.bytes.push(...l.bytes),n.chunks.push({type:we.Numeric,text:l.text})}else if(a===Ke.Alphanumeric){let l=Fp(o,r);n.text+=l.text,n.bytes.push(...l.bytes),n.chunks.push({type:we.Alphanumeric,text:l.text})}else if(a===Ke.Byte){let l=Op(o,r);n.text+=l.text,n.bytes.push(...l.bytes),n.chunks.push({type:we.Byte,bytes:l.bytes,text:l.text})}else if(a===Ke.Kanji){let l=Rp(o,r);n.text+=l.text,n.bytes.push(...l.bytes),n.chunks.push({type:we.Kanji,bytes:l.bytes,text:l.text})}else a===Ke.StructuredAppend&&n.chunks.push({type:we.StructuredAppend,currentSequence:o.readBits(4),totalSequence:o.readBits(4),parity:o.readBits(8)})}if(o.available()===0||o.readBits(o.available())===0)return n}var xe=class{constructor(t,o){if(o.length===0)throw new Error("No coefficients.");this.field=t;let r=o.length;if(r>1&&o[0]===0){let n=1;for(;n<r&&o[n]===0;)n++;if(n===r)this.coefficients=t.zero.coefficients;else{this.coefficients=new Uint8ClampedArray(r-n);for(let a=0;a<this.coefficients.length;a++)this.coefficients[a]=o[n+a]}}else this.coefficients=o}degree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}addOrSubtract(t){if(this.isZero())return t;if(t.isZero())return this;let o=this.coefficients,r=t.coefficients;o.length>r.length&&([o,r]=[r,o]);let n=new Uint8ClampedArray(r.length),a=r.length-o.length;for(let l=0;l<a;l++)n[l]=r[l];for(let l=a;l<r.length;l++)n[l]=qt(o[l-a],r[l]);return new xe(this.field,n)}multiply(t){if(t===0)return this.field.zero;if(t===1)return this;let o=this.coefficients.length,r=new Uint8ClampedArray(o);for(let n=0;n<o;n++)r[n]=this.field.multiply(this.coefficients[n],t);return new xe(this.field,r)}multiplyPoly(t){if(this.isZero()||t.isZero())return this.field.zero;let o=this.coefficients,r=o.length,n=t.coefficients,a=n.length,l=new Uint8ClampedArray(r+a-1);for(let s=0;s<r;s++){let i=o[s];for(let c=0;c<a;c++)l[s+c]=qt(l[s+c],this.field.multiply(i,n[c]))}return new xe(this.field,l)}multiplyByMonomial(t,o){if(t<0)throw new Error("Invalid degree less than 0");if(o===0)return this.field.zero;let r=this.coefficients.length,n=new Uint8ClampedArray(r+t);for(let a=0;a<r;a++)n[a]=this.field.multiply(this.coefficients[a],o);return new xe(this.field,n)}evaluateAt(t){let o=0;if(t===0)return this.getCoefficient(0);let r=this.coefficients.length;if(t===1)return this.coefficients.forEach(n=>{o=qt(o,n)}),o;o=this.coefficients[0];for(let n=1;n<r;n++)o=qt(this.field.multiply(t,o),this.coefficients[n]);return o}};function qt(e,t){return e^t}var fl=class{constructor(t,o,r){this.primitive=t,this.size=o,this.generatorBase=r,this.expTable=new Array(this.size),this.logTable=new Array(this.size);let n=1;for(let a=0;a<this.size;a++)this.expTable[a]=n,n=n*2,n>=this.size&&(n=(n^this.primitive)&this.size-1);for(let a=0;a<this.size-1;a++)this.logTable[this.expTable[a]]=a;this.zero=new xe(this,Uint8ClampedArray.from([0])),this.one=new xe(this,Uint8ClampedArray.from([1]))}multiply(t,o){return t===0||o===0?0:this.expTable[(this.logTable[t]+this.logTable[o])%(this.size-1)]}inverse(t){if(t===0)throw new Error("Can't invert 0");return this.expTable[this.size-this.logTable[t]-1]}buildMonomial(t,o){if(t<0)throw new Error("Invalid monomial degree less than 0");if(o===0)return this.zero;let r=new Uint8ClampedArray(t+1);return r[0]=o,new xe(this,r)}log(t){if(t===0)throw new Error("Can't take log(0)");return this.logTable[t]}exp(t){return this.expTable[t]}};function zp(e,t,o,r){t.degree()<o.degree()&&([t,o]=[o,t]);let n=t,a=o,l=e.zero,s=e.one;for(;a.degree()>=r/2;){let f=n,d=l;if(n=a,l=s,n.isZero())return null;a=f;let g=e.zero,b=n.getCoefficient(n.degree()),B=e.inverse(b);for(;a.degree()>=n.degree()&&!a.isZero();){let k=a.degree()-n.degree(),m=e.multiply(a.getCoefficient(a.degree()),B);g=g.addOrSubtract(e.buildMonomial(k,m)),a=a.addOrSubtract(n.multiplyByMonomial(k,m))}if(s=g.multiplyPoly(l).addOrSubtract(d),a.degree()>=n.degree())return null}let i=s.getCoefficient(0);if(i===0)return null;let c=e.inverse(i);return[s.multiply(c),a.multiply(c)]}function Ep(e,t){let o=t.degree();if(o===1)return[t.getCoefficient(1)];let r=new Array(o),n=0;for(let a=1;a<e.size&&n<o;a++)t.evaluateAt(a)===0&&(r[n]=e.inverse(a),n++);return n!==o?null:r}function Gp(e,t,o){let r=o.length,n=new Array(r);for(let a=0;a<r;a++){let l=e.inverse(o[a]),s=1;for(let i=0;i<r;i++)a!==i&&(s=e.multiply(s,qt(1,e.multiply(o[i],l))));n[a]=e.multiply(t.evaluateAt(l),e.inverse(s)),e.generatorBase!==0&&(n[a]=e.multiply(n[a],l))}return n}function Hp(e,t){let o=new Uint8ClampedArray(e.length);o.set(e);let r=new fl(285,256,0),n=new xe(r,o),a=new Uint8ClampedArray(t),l=!1;for(let d=0;d<t;d++){let g=n.evaluateAt(r.exp(d+r.generatorBase));a[a.length-1-d]=g,g!==0&&(l=!0)}if(!l)return o;let s=new xe(r,a),i=zp(r,r.buildMonomial(t,1),s,t);if(i===null)return null;let c=Ep(r,i[0]);if(c==null)return null;let f=Gp(r,i[1],c);for(let d=0;d<c.length;d++){let g=o.length-1-r.log(c[d]);if(g<0)return null;o[g]=qt(o[g],f[d])}return o}var ml=[{infoBits:null,versionNumber:1,alignmentPatternCenters:[],errorCorrectionLevels:[{ecCodewordsPerBlock:7,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:13,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:13}]},{ecCodewordsPerBlock:17,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:2,alignmentPatternCenters:[6,18],errorCorrectionLevels:[{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:34}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:28}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]}]},{infoBits:null,versionNumber:3,alignmentPatternCenters:[6,22],errorCorrectionLevels:[{ecCodewordsPerBlock:15,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:55}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:13}]}]},{infoBits:null,versionNumber:4,alignmentPatternCenters:[6,26],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:80}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:32}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:5,alignmentPatternCenters:[6,30],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:43}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:11},{numBlocks:2,dataCodewordsPerBlock:12}]}]},{infoBits:null,versionNumber:6,alignmentPatternCenters:[6,34],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:27}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:31892,versionNumber:7,alignmentPatternCenters:[6,22,38],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:78}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:31}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:13},{numBlocks:1,dataCodewordsPerBlock:14}]}]},{infoBits:34236,versionNumber:8,alignmentPatternCenters:[6,24,42],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:97}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:38},{numBlocks:2,dataCodewordsPerBlock:39}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:18},{numBlocks:2,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:14},{numBlocks:2,dataCodewordsPerBlock:15}]}]},{infoBits:39577,versionNumber:9,alignmentPatternCenters:[6,26,46],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:12},{numBlocks:4,dataCodewordsPerBlock:13}]}]},{infoBits:42195,versionNumber:10,alignmentPatternCenters:[6,28,50],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68},{numBlocks:2,dataCodewordsPerBlock:69}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:43},{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]}]},{infoBits:48118,versionNumber:11,alignmentPatternCenters:[6,30,54],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:81}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:50},{numBlocks:4,dataCodewordsPerBlock:51}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:22},{numBlocks:4,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:12},{numBlocks:8,dataCodewordsPerBlock:13}]}]},{infoBits:51042,versionNumber:12,alignmentPatternCenters:[6,32,58],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:92},{numBlocks:2,dataCodewordsPerBlock:93}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:20},{numBlocks:6,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:55367,versionNumber:13,alignmentPatternCenters:[6,34,62],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:37},{numBlocks:1,dataCodewordsPerBlock:38}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:20},{numBlocks:4,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:11},{numBlocks:4,dataCodewordsPerBlock:12}]}]},{infoBits:58893,versionNumber:14,alignmentPatternCenters:[6,26,46,66],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:40},{numBlocks:5,dataCodewordsPerBlock:41}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:16},{numBlocks:5,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:5,dataCodewordsPerBlock:13}]}]},{infoBits:63784,versionNumber:15,alignmentPatternCenters:[6,26,48,70],errorCorrectionLevels:[{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:87},{numBlocks:1,dataCodewordsPerBlock:88}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:41},{numBlocks:5,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:7,dataCodewordsPerBlock:13}]}]},{infoBits:68472,versionNumber:16,alignmentPatternCenters:[6,26,50,74],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:98},{numBlocks:1,dataCodewordsPerBlock:99}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:70749,versionNumber:17,alignmentPatternCenters:[6,30,54,78],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:1,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22},{numBlocks:15,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:17,dataCodewordsPerBlock:15}]}]},{infoBits:76311,versionNumber:18,alignmentPatternCenters:[6,30,56,82],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:120},{numBlocks:1,dataCodewordsPerBlock:121}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:43},{numBlocks:4,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:1,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:19,dataCodewordsPerBlock:15}]}]},{infoBits:79154,versionNumber:19,alignmentPatternCenters:[6,30,58,86],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:113},{numBlocks:4,dataCodewordsPerBlock:114}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:44},{numBlocks:11,dataCodewordsPerBlock:45}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:21},{numBlocks:4,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:13},{numBlocks:16,dataCodewordsPerBlock:14}]}]},{infoBits:84390,versionNumber:20,alignmentPatternCenters:[6,34,62,90],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:41},{numBlocks:13,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:5,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:15},{numBlocks:10,dataCodewordsPerBlock:16}]}]},{infoBits:87683,versionNumber:21,alignmentPatternCenters:[6,28,50,72,94],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:116},{numBlocks:4,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:16},{numBlocks:6,dataCodewordsPerBlock:17}]}]},{infoBits:92361,versionNumber:22,alignmentPatternCenters:[6,26,50,74,98],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:111},{numBlocks:7,dataCodewordsPerBlock:112}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:13}]}]},{infoBits:96236,versionNumber:23,alignmentPatternCenters:[6,30,54,74,102],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:121},{numBlocks:5,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:47},{numBlocks:14,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:16,dataCodewordsPerBlock:15},{numBlocks:14,dataCodewordsPerBlock:16}]}]},{infoBits:102084,versionNumber:24,alignmentPatternCenters:[6,28,54,80,106],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:45},{numBlocks:14,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:30,dataCodewordsPerBlock:16},{numBlocks:2,dataCodewordsPerBlock:17}]}]},{infoBits:102881,versionNumber:25,alignmentPatternCenters:[6,32,58,84,110],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:106},{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:47},{numBlocks:13,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:110507,versionNumber:26,alignmentPatternCenters:[6,30,58,86,114],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:114},{numBlocks:2,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:46},{numBlocks:4,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:28,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:33,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]}]},{infoBits:110734,versionNumber:27,alignmentPatternCenters:[6,34,62,90,118],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:23},{numBlocks:26,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:117786,versionNumber:28,alignmentPatternCenters:[6,26,50,74,98,122],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:117},{numBlocks:10,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:45},{numBlocks:23,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:24},{numBlocks:31,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:31,dataCodewordsPerBlock:16}]}]},{infoBits:119615,versionNumber:29,alignmentPatternCenters:[6,30,54,78,102,126],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:116},{numBlocks:7,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:21,dataCodewordsPerBlock:45},{numBlocks:7,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:23},{numBlocks:37,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:26,dataCodewordsPerBlock:16}]}]},{infoBits:126325,versionNumber:30,alignmentPatternCenters:[6,26,52,78,104,130],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:115},{numBlocks:10,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:47},{numBlocks:10,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:25,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:25,dataCodewordsPerBlock:16}]}]},{infoBits:127568,versionNumber:31,alignmentPatternCenters:[6,30,56,82,108,134],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:3,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:46},{numBlocks:29,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:24},{numBlocks:1,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:133589,versionNumber:32,alignmentPatternCenters:[6,34,60,86,112,138],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:24},{numBlocks:35,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:35,dataCodewordsPerBlock:16}]}]},{infoBits:136944,versionNumber:33,alignmentPatternCenters:[6,30,58,86,114,142],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:21,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:24},{numBlocks:19,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:141498,versionNumber:34,alignmentPatternCenters:[6,34,62,90,118,146],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:6,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:44,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:59,dataCodewordsPerBlock:16},{numBlocks:1,dataCodewordsPerBlock:17}]}]},{infoBits:145311,versionNumber:35,alignmentPatternCenters:[6,30,54,78,102,126,150],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:121},{numBlocks:7,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:47},{numBlocks:26,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:39,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:41,dataCodewordsPerBlock:16}]}]},{infoBits:150283,versionNumber:36,alignmentPatternCenters:[6,24,50,76,102,128,154],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:121},{numBlocks:14,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:47},{numBlocks:34,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:46,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:64,dataCodewordsPerBlock:16}]}]},{infoBits:152622,versionNumber:37,alignmentPatternCenters:[6,28,54,80,106,132,158],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:46},{numBlocks:14,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:49,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:24,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:158308,versionNumber:38,alignmentPatternCenters:[6,32,58,84,110,136,162],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:122},{numBlocks:18,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:46},{numBlocks:32,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:48,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:15},{numBlocks:32,dataCodewordsPerBlock:16}]}]},{infoBits:161089,versionNumber:39,alignmentPatternCenters:[6,26,54,82,110,138,166],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:40,dataCodewordsPerBlock:47},{numBlocks:7,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:43,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:15},{numBlocks:67,dataCodewordsPerBlock:16}]}]},{infoBits:167017,versionNumber:40,alignmentPatternCenters:[6,30,58,86,114,142,170],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:118},{numBlocks:6,dataCodewordsPerBlock:119}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:18,dataCodewordsPerBlock:47},{numBlocks:31,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:24},{numBlocks:34,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:15},{numBlocks:61,dataCodewordsPerBlock:16}]}]}];function lr(e,t){let o=e^t,r=0;for(;o;)r++,o&=o-1;return r}function bt(e,t){return t<<1|e}var Up=[{bits:21522,formatInfo:{errorCorrectionLevel:1,dataMask:0}},{bits:20773,formatInfo:{errorCorrectionLevel:1,dataMask:1}},{bits:24188,formatInfo:{errorCorrectionLevel:1,dataMask:2}},{bits:23371,formatInfo:{errorCorrectionLevel:1,dataMask:3}},{bits:17913,formatInfo:{errorCorrectionLevel:1,dataMask:4}},{bits:16590,formatInfo:{errorCorrectionLevel:1,dataMask:5}},{bits:20375,formatInfo:{errorCorrectionLevel:1,dataMask:6}},{bits:19104,formatInfo:{errorCorrectionLevel:1,dataMask:7}},{bits:30660,formatInfo:{errorCorrectionLevel:0,dataMask:0}},{bits:29427,formatInfo:{errorCorrectionLevel:0,dataMask:1}},{bits:32170,formatInfo:{errorCorrectionLevel:0,dataMask:2}},{bits:30877,formatInfo:{errorCorrectionLevel:0,dataMask:3}},{bits:26159,formatInfo:{errorCorrectionLevel:0,dataMask:4}},{bits:25368,formatInfo:{errorCorrectionLevel:0,dataMask:5}},{bits:27713,formatInfo:{errorCorrectionLevel:0,dataMask:6}},{bits:26998,formatInfo:{errorCorrectionLevel:0,dataMask:7}},{bits:5769,formatInfo:{errorCorrectionLevel:3,dataMask:0}},{bits:5054,formatInfo:{errorCorrectionLevel:3,dataMask:1}},{bits:7399,formatInfo:{errorCorrectionLevel:3,dataMask:2}},{bits:6608,formatInfo:{errorCorrectionLevel:3,dataMask:3}},{bits:1890,formatInfo:{errorCorrectionLevel:3,dataMask:4}},{bits:597,formatInfo:{errorCorrectionLevel:3,dataMask:5}},{bits:3340,formatInfo:{errorCorrectionLevel:3,dataMask:6}},{bits:2107,formatInfo:{errorCorrectionLevel:3,dataMask:7}},{bits:13663,formatInfo:{errorCorrectionLevel:2,dataMask:0}},{bits:12392,formatInfo:{errorCorrectionLevel:2,dataMask:1}},{bits:16177,formatInfo:{errorCorrectionLevel:2,dataMask:2}},{bits:14854,formatInfo:{errorCorrectionLevel:2,dataMask:3}},{bits:9396,formatInfo:{errorCorrectionLevel:2,dataMask:4}},{bits:8579,formatInfo:{errorCorrectionLevel:2,dataMask:5}},{bits:11994,formatInfo:{errorCorrectionLevel:2,dataMask:6}},{bits:11245,formatInfo:{errorCorrectionLevel:2,dataMask:7}}],$p=[e=>(e.y+e.x)%2==0,e=>e.y%2==0,e=>e.x%3==0,e=>(e.y+e.x)%3==0,e=>(Math.floor(e.y/2)+Math.floor(e.x/3))%2==0,e=>e.x*e.y%2+e.x*e.y%3==0,e=>(e.y*e.x%2+e.y*e.x%3)%2==0,e=>((e.y+e.x)%2+e.y*e.x%3)%2==0];function Vp(e){let t=17+4*e.versionNumber,o=Ve.createEmpty(t,t);o.setRegion(0,0,9,9,!0),o.setRegion(t-8,0,8,9,!0),o.setRegion(0,t-8,9,8,!0);for(let r of e.alignmentPatternCenters)for(let n of e.alignmentPatternCenters)r===6&&n===6||r===6&&n===t-7||r===t-7&&n===6||o.setRegion(r-2,n-2,5,5,!0);return o.setRegion(6,9,1,t-17,!0),o.setRegion(9,6,t-17,1,!0),e.versionNumber>6&&(o.setRegion(t-11,0,3,6,!0),o.setRegion(0,t-11,6,3,!0)),o}function Kp(e,t,o){let r=$p[o.dataMask],n=e.height,a=Vp(t),l=[],s=0,i=0,c=!0;for(let f=n-1;f>0;f-=2){f===6&&f--;for(let d=0;d<n;d++){let g=c?n-1-d:d;for(let b=0;b<2;b++){let B=f-b;if(!a.get(B,g)){i++;let k=e.get(B,g);r({y:g,x:B})&&(k=!k),s=bt(k,s),i===8&&(l.push(s),i=0,s=0)}}}c=!c}return l}function Xp(e){let t=e.height,o=Math.floor((t-17)/4);if(o<=6)return ml[o-1];let r=0;for(let s=5;s>=0;s--)for(let i=t-9;i>=t-11;i--)r=bt(e.get(i,s),r);let n=0;for(let s=5;s>=0;s--)for(let i=t-9;i>=t-11;i--)n=bt(e.get(s,i),n);let a=Infinity,l;for(let s of ml){if(s.infoBits===r||s.infoBits===n)return s;let i=lr(r,s.infoBits);i<a&&(l=s,a=i),i=lr(n,s.infoBits),i<a&&(l=s,a=i)}if(a<=3)return l}function Qp(e){let t=0;for(let l=0;l<=8;l++)l!==6&&(t=bt(e.get(l,8),t));for(let l=7;l>=0;l--)l!==6&&(t=bt(e.get(8,l),t));let o=e.height,r=0;for(let l=o-1;l>=o-7;l--)r=bt(e.get(8,l),r);for(let l=o-8;l<o;l++)r=bt(e.get(l,8),r);let n=Infinity,a=null;for(let{bits:l,formatInfo:s}of Up){if(l===t||l===r)return s;let i=lr(t,l);i<n&&(a=s,n=i),t!==r&&(i=lr(r,l),i<n&&(a=s,n=i))}return n<=3?a:null}function Yp(e,t,o){let r=t.errorCorrectionLevels[o],n=[],a=0;if(r.ecBlocks.forEach(s=>{for(let i=0;i<s.numBlocks;i++)n.push({numDataCodewords:s.dataCodewordsPerBlock,codewords:[]}),a+=s.dataCodewordsPerBlock+r.ecCodewordsPerBlock}),e.length<a)return null;e=e.slice(0,a);let l=r.ecBlocks[0].dataCodewordsPerBlock;for(let s=0;s<l;s++)for(let i of n)i.codewords.push(e.shift());if(r.ecBlocks.length>1){let s=r.ecBlocks[0].numBlocks,i=r.ecBlocks[1].numBlocks;for(let c=0;c<i;c++)n[s+c].codewords.push(e.shift())}for(;e.length>0;)for(let s of n)s.codewords.push(e.shift());return n}function pl(e){let t=Xp(e);if(!t)return null;let o=Qp(e);if(!o)return null;let r=Kp(e,t,o),n=Yp(r,t,o.errorCorrectionLevel);if(!n)return null;let a=n.reduce((i,c)=>i+c.numDataCodewords,0),l=new Uint8ClampedArray(a),s=0;for(let i of n){let c=Hp(i.codewords,i.codewords.length-i.numDataCodewords);if(!c)return null;for(let f=0;f<i.numDataCodewords;f++)l[s++]=c[f]}try{return Lp(l,t.versionNumber)}catch(i){return null}}function Wp(e){if(e==null)return null;let t=pl(e);if(t)return t;for(let o=0;o<e.width;o++)for(let r=o+1;r<e.height;r++)e.get(o,r)!==e.get(r,o)&&(e.set(o,r,!e.get(o,r)),e.set(r,o,!e.get(r,o)));return pl(e)}function gl(e,t,o,r){let n=e.x-t.x+o.x-r.x,a=e.y-t.y+o.y-r.y;if(n===0&&a===0)return{a11:t.x-e.x,a12:t.y-e.y,a13:0,a21:o.x-t.x,a22:o.y-t.y,a23:0,a31:e.x,a32:e.y,a33:1};{let l=t.x-o.x,s=r.x-o.x,i=t.y-o.y,c=r.y-o.y,f=l*c-s*i,d=(n*c-s*a)/f,g=(l*a-n*i)/f;return{a11:t.x-e.x+d*t.x,a12:t.y-e.y+d*t.y,a13:d,a21:r.x-e.x+g*r.x,a22:r.y-e.y+g*r.y,a23:g,a31:e.x,a32:e.y,a33:1}}}function Jp(e,t,o,r){let n=gl(e,t,o,r);return{a11:n.a22*n.a33-n.a23*n.a32,a12:n.a13*n.a32-n.a12*n.a33,a13:n.a12*n.a23-n.a13*n.a22,a21:n.a23*n.a31-n.a21*n.a33,a22:n.a11*n.a33-n.a13*n.a31,a23:n.a13*n.a21-n.a11*n.a23,a31:n.a21*n.a32-n.a22*n.a31,a32:n.a12*n.a31-n.a11*n.a32,a33:n.a11*n.a22-n.a12*n.a21}}function Zp(e,t){return{a11:e.a11*t.a11+e.a21*t.a12+e.a31*t.a13,a12:e.a12*t.a11+e.a22*t.a12+e.a32*t.a13,a13:e.a13*t.a11+e.a23*t.a12+e.a33*t.a13,a21:e.a11*t.a21+e.a21*t.a22+e.a31*t.a23,a22:e.a12*t.a21+e.a22*t.a22+e.a32*t.a23,a23:e.a13*t.a21+e.a23*t.a22+e.a33*t.a23,a31:e.a11*t.a31+e.a21*t.a32+e.a31*t.a33,a32:e.a12*t.a31+e.a22*t.a32+e.a32*t.a33,a33:e.a13*t.a31+e.a23*t.a32+e.a33*t.a33}}function eg(e,t){let o=Jp({x:3.5,y:3.5},{x:t.dimension-3.5,y:3.5},{x:t.dimension-6.5,y:t.dimension-6.5},{x:3.5,y:t.dimension-3.5}),r=gl(t.topLeft,t.topRight,t.alignmentPattern,t.bottomLeft),n=Zp(r,o),a=Ve.createEmpty(t.dimension,t.dimension),l=(s,i)=>{let c=n.a13*s+n.a23*i+n.a33;return{x:(n.a11*s+n.a21*i+n.a31)/c,y:(n.a12*s+n.a22*i+n.a32)/c}};for(let s=0;s<t.dimension;s++)for(let i=0;i<t.dimension;i++){let c=i+.5,f=s+.5,d=l(c,f);a.set(i,s,e.get(Math.floor(d.x),Math.floor(d.y)))}return{matrix:a,mappingFunction:l}}var tg=5,hl=.5,yl=1.5,Xe=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Qe(e){return e.reduce((t,o)=>t+o)}function og(e,t,o){let r=Xe(e,t),n=Xe(t,o),a=Xe(e,o),l,s,i;return n>=r&&n>=a?[l,s,i]=[t,e,o]:a>=n&&a>=r?[l,s,i]=[e,t,o]:[l,s,i]=[e,o,t],(i.x-s.x)*(l.y-s.y)-(i.y-s.y)*(l.x-s.x)<0&&([l,i]=[i,l]),{bottomLeft:l,topLeft:s,topRight:i}}function rg(e,t,o,r){let n=(Qe(ut(e,o,r,5))/7+Qe(ut(e,t,r,5))/7+Qe(ut(o,e,r,5))/7+Qe(ut(t,e,r,5))/7)/4;if(n<1)throw new Error("Invalid module size");let a=Math.round(Xe(e,t)/n),l=Math.round(Xe(e,o)/n),s=Math.floor((a+l)/2)+7;switch(s%4){case 0:s++;break;case 2:s--;break}return{dimension:s,moduleSize:n}}function vl(e,t,o,r){let n=[{x:Math.floor(e.x),y:Math.floor(e.y)}],a=Math.abs(t.y-e.y)>Math.abs(t.x-e.x),l,s,i,c;a?(l=Math.floor(e.y),s=Math.floor(e.x),i=Math.floor(t.y),c=Math.floor(t.x)):(l=Math.floor(e.x),s=Math.floor(e.y),i=Math.floor(t.x),c=Math.floor(t.y));let f=Math.abs(i-l),d=Math.abs(c-s),g=Math.floor(-f/2),b=l<i?1:-1,B=s<c?1:-1,k=!0;for(let p=l,C=s;p!==i+b;p+=b){let v=a?C:p,h=a?p:C;if(o.get(v,h)!==k&&(k=!k,n.push({x:v,y:h}),n.length===r+1))break;if(g+=d,g>0){if(C===c)break;C+=B,g-=f}}let m=[];for(let p=0;p<r;p++)n[p]&&n[p+1]?m.push(Xe(n[p],n[p+1])):m.push(0);return m}function ut(e,t,o,r){let n=t.y-e.y,a=t.x-e.x,l=vl(e,t,o,Math.ceil(r/2)),s=vl(e,{x:e.x-a,y:e.y-n},o,Math.ceil(r/2)),i=l.shift()+s.shift()-1;return s.concat(i).concat(...l)}function cr(e,t){let o=Qe(e)/Qe(t),r=0;return t.forEach((n,a)=>{r+=Math.pow(e[a]-n*o,2)}),{averageSize:o,error:r}}function bl(e,t,o){try{let r=ut(e,{x:-1,y:e.y},o,t.length),n=ut(e,{x:e.x,y:-1},o,t.length),a={x:Math.max(0,e.x-e.y)-1,y:Math.max(0,e.y-e.x)-1},l=ut(e,a,o,t.length),s={x:Math.min(o.width,e.x+e.y)+1,y:Math.min(o.height,e.y+e.x)+1},i=ut(e,s,o,t.length),c=cr(r,t),f=cr(n,t),d=cr(l,t),g=cr(i,t),b=Math.sqrt(c.error*c.error+f.error*f.error+d.error*d.error+g.error*g.error),B=(c.averageSize+f.averageSize+d.averageSize+g.averageSize)/4,k=(Math.pow(c.averageSize-B,2)+Math.pow(f.averageSize-B,2)+Math.pow(d.averageSize-B,2)+Math.pow(g.averageSize-B,2))/B;return b+k}catch(r){return Infinity}}function An(e,t){let o=Math.round(t.x);for(;e.get(o,Math.round(t.y));)o--;let r=Math.round(t.x);for(;e.get(r,Math.round(t.y));)r++;let n=(o+r)/2,a=Math.round(t.y);for(;e.get(Math.round(n),a);)a--;let l=Math.round(t.y);for(;e.get(Math.round(n),l);)l++;let s=(a+l)/2;return{x:n,y:s}}function ng(e){let t=[],o=[],r=[],n=[];for(let p=0;p<=e.height;p++){let C=0,v=!1,h=[0,0,0,0,0];for(let P=-1;P<=e.width;P++){let S=e.get(P,p);if(S===v)C++;else{h=[h[1],h[2],h[3],h[4],C],C=1,v=S;let I=Qe(h)/7,_=Math.abs(h[0]-I)<I&&Math.abs(h[1]-I)<I&&Math.abs(h[2]-3*I)<3*I&&Math.abs(h[3]-I)<I&&Math.abs(h[4]-I)<I&&!S,j=Qe(h.slice(-3))/3,w=Math.abs(h[2]-j)<j&&Math.abs(h[3]-j)<j&&Math.abs(h[4]-j)<j&&S;if(_){let D=P-h[3]-h[4],x=D-h[2],T={startX:x,endX:D,y:p},A=o.filter(N=>x>=N.bottom.startX&&x<=N.bottom.endX||D>=N.bottom.startX&&x<=N.bottom.endX||x<=N.bottom.startX&&D>=N.bottom.endX&&h[2]/(N.bottom.endX-N.bottom.startX)<yl&&h[2]/(N.bottom.endX-N.bottom.startX)>hl);A.length>0?A[0].bottom=T:o.push({top:T,bottom:T})}if(w){let D=P-h[4],x=D-h[3],T={startX:x,y:p,endX:D},A=n.filter(N=>x>=N.bottom.startX&&x<=N.bottom.endX||D>=N.bottom.startX&&x<=N.bottom.endX||x<=N.bottom.startX&&D>=N.bottom.endX&&h[2]/(N.bottom.endX-N.bottom.startX)<yl&&h[2]/(N.bottom.endX-N.bottom.startX)>hl);A.length>0?A[0].bottom=T:n.push({top:T,bottom:T})}}}t.push(...o.filter(P=>P.bottom.y!==p&&P.bottom.y-P.top.y>=2)),o=o.filter(P=>P.bottom.y===p),r.push(...n.filter(P=>P.bottom.y!==p)),n=n.filter(P=>P.bottom.y===p)}t.push(...o.filter(p=>p.bottom.y-p.top.y>=2)),r.push(...n);let a=[];for(let p of t){if(p.bottom.y-p.top.y<2)continue;let C=(p.top.startX+p.top.endX+p.bottom.startX+p.bottom.endX)/4,v=(p.top.y+p.bottom.y+1)/2;if(!e.get(Math.round(C),Math.round(v)))continue;let h=[p.top.endX-p.top.startX,p.bottom.endX-p.bottom.startX,p.bottom.y-p.top.y+1],P=Qe(h)/h.length,S=bl({x:Math.round(C),y:Math.round(v)},[1,1,3,1,1],e);a.push({score:S,x:C,y:v,size:P})}if(a.length<3)return null;a.sort((p,C)=>p.score-C.score);let l=[];for(let p=0;p<Math.min(a.length,tg);++p){let C=a[p],v=[];for(let h of a)h!==C&&v.push(Object.assign(Object.assign({},h),{score:h.score+Math.pow(h.size-C.size,2)/C.size}));v.sort((h,P)=>h.score-P.score),l.push({points:[C,v[0],v[1]],score:C.score+v[0].score+v[1].score})}l.sort((p,C)=>p.score-C.score);let s=l[0],{topRight:i,topLeft:c,bottomLeft:f}=og(...s.points),d=kl(e,r,i,c,f),g=[];d&&g.push({alignmentPattern:{x:d.alignmentPattern.x,y:d.alignmentPattern.y},bottomLeft:{x:f.x,y:f.y},dimension:d.dimension,topLeft:{x:c.x,y:c.y},topRight:{x:i.x,y:i.y}});let b=An(e,i),B=An(e,c),k=An(e,f),m=kl(e,r,b,B,k);return m&&g.push({alignmentPattern:{x:m.alignmentPattern.x,y:m.alignmentPattern.y},bottomLeft:{x:k.x,y:k.y},topLeft:{x:B.x,y:B.y},topRight:{x:b.x,y:b.y},dimension:m.dimension}),g.length===0?null:g}function kl(e,t,o,r,n){let a,l;try{({dimension:a,moduleSize:l}=rg(r,o,n,e))}catch(b){return null}let s={x:o.x-r.x+n.x,y:o.y-r.y+n.y},i=(Xe(r,n)+Xe(r,o))/2/l,c=1-3/i,f={x:r.x+c*(s.x-r.x),y:r.y+c*(s.y-r.y)},d=t.map(b=>{let B=(b.top.startX+b.top.endX+b.bottom.startX+b.bottom.endX)/4,k=(b.top.y+b.bottom.y+1)/2;if(!e.get(Math.floor(B),Math.floor(k)))return;let p=bl({x:Math.floor(B),y:Math.floor(k)},[1,1,1],e)+Xe({x:B,y:k},f);return{x:B,y:k,score:p}}).filter(b=>!!b).sort((b,B)=>b.score-B.score);return{alignmentPattern:i>=15&&d.length?d[0]:f,dimension:a}}function Cl(e){let t=ng(e);if(!t)return null;for(let o of t){let r=eg(e,o),n=Wp(r.matrix);if(n)return{binaryData:n.bytes,data:n.text,chunks:n.chunks,version:n.version,location:{topRightCorner:r.mappingFunction(o.dimension,0),topLeftCorner:r.mappingFunction(0,0),bottomRightCorner:r.mappingFunction(o.dimension,o.dimension),bottomLeftCorner:r.mappingFunction(0,o.dimension),topRightFinderPattern:o.topRight,topLeftFinderPattern:o.topLeft,bottomLeftFinderPattern:o.bottomLeft,bottomRightAlignmentPattern:o.alignmentPattern},matrix:r.matrix}}return null}var ag={inversionAttempts:"attemptBoth",greyScaleWeights:{red:.2126,green:.7152,blue:.0722,useIntegerApproximation:!1},canOverwriteImage:!0};function Bl(e,t){Object.keys(t).forEach(o=>{e[o]=t[o]})}function no(e,t,o,r={}){let n=Object.create(null);Bl(n,ag),Bl(n,r);let a=n.inversionAttempts==="onlyInvert"||n.inversionAttempts==="invertFirst",l=n.inversionAttempts==="attemptBoth"||a,{binarized:s,inverted:i}=jp(e,t,o,l,n.greyScaleWeights,n.canOverwriteImage),c=Cl(a?i:s);return!c&&(n.inversionAttempts==="attemptBoth"||n.inversionAttempts==="invertFirst")&&(c=Cl(a?s:i)),c}no.default=no;var ur=u(Z()),dr=u(Le()),Sl=u(ve()),Mn=(0,Pl.makeStyles)(e=>({root:{width:"auto",display:"inline-grid",gridTemplateColumns:"1fr auto",gridTemplateRows:"auto auto",gridGap:e.spacing(1),alignItems:"center"},container:{flex:0,width:400,height:400,display:"grid",overflow:"hidden",cursor:"pointer","& > *":{width:400,height:400,gridRow:1,gridColumn:1},"& img":{maxWidth:"100%"}},hoverOK:{border:`4px solid ${e.palette.divider}`,borderStyle:"dashed",borderRadius:"8px"},hoverNOK:{cursor:"not-allowed"},label:{textAlign:"center",alignSelf:"center",lineHeight:"unset",height:"auto"}}));function fr(e,t,o,r,n,a){e.beginPath();let l={x:t.x+(o.x-t.x)*(1-n),y:t.y+(o.y-t.y)*(1-n)},s={x:r.x+(o.x-r.x)*(1-n),y:r.y+(o.y-r.y)*(1-n)};e.moveTo(l.x,l.y),e.lineTo(o.x,o.y),e.lineTo(s.x,s.y),e.lineWidth=4,e.strokeStyle=a,e.stroke()}var sg=e=>{let{detectionAreaSize:t=100}=e,o=Mn(),{translate:r}=(0,ur.useI18n)(),[n,a]=q.default.useState(!1),[l,s]=q.default.useState(!1),i=q.default.useRef(),c=q.default.useRef(null),f=q.default.useRef(),d=q.default.useRef(null),g=q.default.useRef(),[b,B]=q.default.useState();return q.default.useEffect(()=>{b&&e.onDetect(b)},[b]),q.default.useEffect(()=>{var k;!c.current||(f.current=(k=c.current.getContext("2d"))!=null?k:void 0)},[c.current]),q.default.useEffect(()=>{var k;!d.current||(g.current=(k=d.current.getContext("2d"))!=null?k:void 0)},[d.current]),cl(()=>{if(!n||!i.current||!c.current||!f.current||!d.current||!g.current)return;let k=i.current,m=c.current,p=f.current,C=d.current,v=g.current;if(k.readyState===k.HAVE_ENOUGH_DATA){let h=Math.min(k.videoWidth,k.videoHeight),P=t/h;m.height=h,m.width=h;let[S,I]=[(k.videoWidth-h)/2,(k.videoHeight-h)/2];p.drawImage(k,S,I,h,h,0,0,m.width,m.height),p.beginPath(),p.fillStyle="rgba(255,255,255,0.15)",p.rect((h-t)/2,(h-t)/2,t,t),p.fill();let _=[{x:(h-t)/2,y:(h-t)/2},{x:(h+t)/2,y:(h-t)/2},{x:(h+t)/2,y:(h+t)/2},{x:(h-t)/2,y:(h+t)/2}];for(let T=0;T<_.length;T++){let A=_[T],N=_[(T-1+_.length)%_.length],Q=_[(T+1)%_.length];fr(p,N,A,Q,.2,"rgba(255,255,255,0.5)")}C.height=h,C.width=h;let[j,w]=[(k.videoWidth-t)/2,(k.videoHeight-t)/2];v.drawImage(k,j,w,t,t,0,0,C.width,C.height);let D=v.getImageData(0,0,C.width,C.height),x=no(D.data,D.width,D.height,{inversionAttempts:"dontInvert"});if(x){B(x.data);let T=[x.location.topLeftCorner,x.location.topRightCorner,x.location.bottomRightCorner,x.location.bottomLeftCorner].map(A=>({x:A.x*P+(h-t)/2,y:A.y*P+(h-t)/2}));for(let A=0;A<T.length;A++){let N=T[A],Q=T[(A-1+T.length)%T.length],se=T[(A+1)%T.length];fr(p,Q,N,se,.2,"green")}}else B(void 0)}},[n,fr,i.current,c.current,f.current,d.current,g.current,t]),q.default.useEffect(()=>{i.current=document.createElement("video");let k;return(async()=>{try{k=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}})}catch(m){s(!0);return}!i.current||(i.current.srcObject=k,i.current.setAttribute("playsinline","true"),i.current.play(),a(!0))})(),()=>{k==null||k.getTracks().forEach(m=>m.stop()),i.current=void 0}},[]),q.default.createElement("div",{className:o.container},q.default.createElement(dr.default,{variant:"body2",className:o.label},r(l?"failed to open camera":"opening camera...")),q.default.createElement("canvas",{ref:c}),q.default.createElement("canvas",{hidden:!0,ref:d}))},ig=e=>{let t=Mn(),{translate:o}=(0,ur.useI18n)(),r=q.default.useRef(null),n=q.default.useRef(null),a=q.default.useCallback(()=>{var _;(_=r.current)==null||_.click()},[r.current]),[l,s]=q.default.useState(),i=q.default.useCallback(_=>{var w;let j=(w=_.target.files)==null?void 0:w[0];!j||s(URL.createObjectURL(j))},[s]),[c,f]=q.default.useState(!1),[d,g]=q.default.useState("idle"),b=q.default.useCallback(_=>{var j;if(_.preventDefault(),((j=_.dataTransfer.items)==null?void 0:j.length)===1){let w=_.dataTransfer.items[0];if(w.kind==="file"&&w.type.startsWith("image/")){_.dataTransfer.dropEffect="copy",g("ok");return}}_.dataTransfer.dropEffect="none",g("nok")},[g]),B=q.default.useCallback(_=>{_.preventDefault(),g("idle")},[g]),k=q.default.useCallback(_=>{if(_.preventDefault(),d!=="ok")return;g("idle");let j=new FileReader;j.onloadend=()=>{s(j.result)},j.readAsDataURL(_.dataTransfer.files[0])},[d,n.current]),m=q.default.useRef(null),p=q.default.useRef(),C=q.default.useRef(null),v=q.default.useRef(),[h,P]=q.default.useState();q.default.useEffect(()=>{h&&e.onDetect(h)},[h]),q.default.useEffect(()=>{var _;!m.current||(p.current=(_=m.current.getContext("2d"))!=null?_:void 0)},[m.current]),q.default.useEffect(()=>{var _;!C.current||(v.current=(_=C.current.getContext("2d"))!=null?_:void 0)},[C.current]);let S=q.default.useCallback(()=>{if(!n.current||!m.current||!p.current||!C.current||!v.current)return;f(!1);let _=m.current,j=p.current,w=C.current,D=v.current;_.width=n.current.width,_.height=n.current.height,j.drawImage(n.current,0,0,_.width,_.height),w.width=_.width*2,w.height=_.height*2,D.drawImage(n.current,0,0,w.width,w.height);let x=_.width/w.width,T=D.getImageData(0,0,w.width,w.height);setTimeout(()=>{let A=no(T.data,T.width,T.height,{inversionAttempts:"dontInvert"});if(A){P(A.data);let N=[A.location.topLeftCorner,A.location.topRightCorner,A.location.bottomRightCorner,A.location.bottomLeftCorner].map(Q=>({x:Q.x*x,y:Q.y*x}));for(let Q=0;Q<N.length;Q++){let se=N[Q],Te=N[(Q-1+N.length)%N.length],_t=N[(Q+1)%N.length];fr(j,Te,se,_t,.2,"green")}}else P(void 0)},0)},[m.current,p.current,n.current,f]),I=q.default.useCallback(()=>{f(!0)},[f]);return q.default.createElement("div",{className:(0,Sl.default)(t.container,d==="ok"?t.hoverOK:d==="nok"?t.hoverNOK:void 0),onClick:a,onDragOverCapture:b,onDragLeave:B,onDropCapture:k},q.default.createElement(dr.default,{variant:"body2",className:t.label},c?o("Failed to open image file"):q.default.createElement(q.default.Fragment,null,o("Click here to select image with QR code"),q.default.createElement("br",null),o("Or drag an image file here"))),l&&q.default.createElement("img",{ref:n,src:l,onLoad:S,onError:I}),q.default.createElement("input",{type:"file",accept:"image/*",hidden:!0,ref:r,onChange:i}),q.default.createElement("canvas",{ref:m}),q.default.createElement("canvas",{hidden:!0,ref:C}))},mr=e=>{let t=Mn(),{translate:o}=(0,ur.useI18n)(),[r,n]=q.default.useState("image"),a=(l,s)=>{s&&n(s)};return q.default.createElement("div",{className:t.root},q.default.createElement(dr.default,{variant:"body1"},o("Select QR code source"),":"),q.default.createElement(ro,{value:r,exclusive:!0,onChange:a},q.default.createElement($e,{value:"video"},q.default.createElement(xl.default,null)),q.default.createElement($e,{value:"image"},q.default.createElement(wl.default,null))),q.default.createElement("div",{style:{gridColumn:"1 / span 2"}},r==="video"?q.default.createElement(sg,{...e}):q.default.createElement(ig,{...e})))};var Ye=(0,Dl.makeStyles)(e=>({strategyRoot:{},strategyGridHeadline:{marginTop:e.spacing(4)},strategyGrid:{marginTop:e.spacing(1),display:"grid",gridTemplateColumns:"auto 400px",gridGap:e.spacing(2),alignItems:"center"},strategyList:{...e.typography.body2},scanQRCodeRoot:{display:"flex",flexFlow:"column nowrap",gap:e.spacing(1),maxWidth:"600px"},waitMessageRoot:{display:"grid",gridTemplateColumns:"minmax(auto, 10ch) 1fr",gridGap:e.spacing(4),alignItems:"center",overflow:"hidden"},grantRoot:{display:"flex",flexFlow:"column nowrap",gap:e.spacing(1),maxWidth:"600px"},grantHeadline:{marginTop:e.spacing(-1),marginBottom:e.spacing(1)},grantCSA:{marginTop:e.spacing(2)},validateDSKRoot:{maxWidth:"600px"},validateDSKGrid:{marginTop:e.spacing(1),display:"grid",width:"100%",gridTemplateColumns:"minmax(auto, 10ch) 1fr",gridGap:e.spacing(1),alignItems:"center",textAlign:"center"},resultRoot:{display:"grid",gridTemplateColumns:"auto 1fr",gridTemplateRows:"auto auto auto",alignItems:"center"},resultIcon:{marginRight:e.spacing(4),fontSize:"64px",gridRow:"1 / span 3",gridColumn:1},resultIconOK:{color:gr.green[500]},resultIconLowSecurity:{color:gr.yellow[700]}})),E;(function(d){d[d.SelectInclusionStrategy=0]="SelectInclusionStrategy",d[d.SelectReplacementStrategy=1]="SelectReplacementStrategy",d[d.QRCode=2]="QRCode",d[d.IncludeDevice=3]="IncludeDevice",d[d.ExcludeDevice=4]="ExcludeDevice",d[d.GrantSecurityClasses=5]="GrantSecurityClasses",d[d.ValidateDSK=6]="ValidateDSK",d[d.Busy=7]="Busy",d[d.Result=8]="Result",d[d.ExclusionResult=9]="ExclusionResult",d[d.ResultMessage=10]="ResultMessage"})(E||(E={}));var Pe;(function(a){a[a.Default=0]="Default",a[a.Insecure=2]="Insecure",a[a.Security_S0=3]="Security_S0",a[a.Security_S2=4]="Security_S2",a[a.QRCode=-1]="QRCode"})(Pe||(Pe={}));var lg=e=>{let{translate:t}=(0,ue.useI18n)(),o=Ye(),[r,n]=y.default.useState(!1),a=t(r?"Security S2 when supported, Security S0 as a fallback, no encryption otherwise.":"Security S2 when supported, Security S0 only when necessary, no encryption otherwise."),{namespace:l}=(0,ue.useGlobals)(),[s]=(0,ue.useIoBrokerObject)(`system.adapter.${l}`,{subscribe:!1}),i=s==null?void 0:s.native,c=i&&(!i.networkKey_S0||!i.networkKey_S2_AccessControl||!i.networkKey_S2_Authenticated||!i.networkKey_S2_Unauthenticated);return y.default.createElement(y.default.Fragment,null,y.default.createElement(qe.default,{className:o.strategyRoot},y.default.createElement(W.default,{variant:"body2"},t("Z-Wave supports the following security mechanisms:")),y.default.createElement("ul",{className:o.strategyList,style:{marginTop:"0.5em"}},y.default.createElement("li",null,y.default.createElement("b",null,"Security S2")," \u2013 ",t("fast and secure")," ",y.default.createElement("b",null,t("(recommended)"))),y.default.createElement("li",null,y.default.createElement("b",null,"Security S0")," \u2013"," ",t("secure, but slow due to a lot of overhead")," ",y.default.createElement("b",null,t("(use only when necessary)"))),y.default.createElement("li",null,t("No encryption"))),c&&y.default.createElement(ct,{severity:"warning"},t("At least one network key is not yet configured. This can cause problems during secure inclusion.")),y.default.createElement(W.default,{variant:"body1",className:o.strategyGridHeadline},t("Please choose an inclusion strategy"),":"),y.default.createElement("div",{className:o.strategyGrid},y.default.createElement("div",{style:{gridRow:1,display:"flex",flexFlow:"column"}},y.default.createElement(re.default,{variant:"contained",color:"primary",onClick:()=>e.selectStrategy(0,r)},t("Default (secure)")),y.default.createElement(kt.default,{label:t("Prefer S0 over no encryption"),control:y.default.createElement(Ct.default,{checked:r,onChange:(f,d)=>n(d)})})),y.default.createElement(W.default,{variant:"caption",style:{alignSelf:"flex-start"}},a,y.default.createElement("br",null),t("Requires user interaction during the inclusion.")),y.default.createElement(re.default,{variant:"contained",color:"secondary",style:{gridRow:2},onClick:()=>e.selectStrategy(-1)},t("Scan QR Code")),y.default.createElement(re.default,{variant:"contained",color:"secondary",style:{gridRow:3},onClick:()=>e.selectStrategy(3)},t("Security S0")),y.default.createElement(W.default,{style:{gridRow:3},variant:"caption"},t("Only use S0, even if S2 is available. Allows including devices that require security but don't behave correctly during S2 inclusion.")),y.default.createElement(re.default,{variant:"contained",color:"default",style:{gridRow:4},onClick:()=>e.selectStrategy(2)},t("No encryption")))),y.default.createElement(je.default,null,y.default.createElement(re.default,{variant:"contained",onClick:e.onCancel,color:"primary"},t("Cancel"))))},cg=e=>{let{translate:t}=(0,ue.useI18n)(),o=Ye();return y.default.createElement(y.default.Fragment,null,y.default.createElement(qe.default,{className:o.strategyRoot},y.default.createElement(W.default,{variant:"body1",className:o.strategyGridHeadline},t("Please choose a replacement strategy"),":"),y.default.createElement("div",{className:o.strategyGrid},y.default.createElement(re.default,{variant:"contained",color:"primary",style:{gridRow:1},onClick:()=>e.selectStrategy(4)},t("Security S2")),y.default.createElement(W.default,{variant:"caption",style:{alignSelf:"flex-start"}},t("fast and secure"),y.default.createElement("br",null),t("(recommended)")),y.default.createElement(re.default,{variant:"contained",color:"secondary",style:{gridRow:2},disabled:!0,onClick:()=>e.selectStrategy(3)},t("Security S0")),y.default.createElement(W.default,{variant:"caption"},t("secure, but slow due to a lot of overhead"),y.default.createElement("br",null),t("(use only when necessary)")),y.default.createElement(re.default,{variant:"contained",color:"default",style:{gridRow:3},onClick:()=>e.selectStrategy(2)},t("No encryption")))),y.default.createElement(je.default,null,y.default.createElement(re.default,{variant:"contained",onClick:e.onCancel,color:"primary"},t("Cancel"))))},ug=e=>{let t=Ye(),{translate:o}=(0,ue.useI18n)(),[r,n]=y.default.useState(!1),a=y.default.useCallback(l=>{r||(n(!0),setTimeout(()=>{e.onScan(l)},500))},[r,n,e.onScan]);return y.default.createElement(y.default.Fragment,null,y.default.createElement(qe.default,{className:t.scanQRCodeRoot},y.default.createElement(mr,{onDetect:a})),y.default.createElement(je.default,null,e.onCancel&&y.default.createElement(re.default,{variant:"contained",onClick:e.onCancel,color:"primary"},o("Cancel"))))},qn=e=>{let t=Ye(),{translate:o}=(0,ue.useI18n)();return y.default.createElement(y.default.Fragment,null,y.default.createElement(qe.default,{className:t.waitMessageRoot},y.default.createElement(Il.default,{size:48}),y.default.createElement(W.default,{variant:"body1"},e.message)),y.default.createElement(je.default,null,e.onCancel&&y.default.createElement(re.default,{variant:"contained",onClick:e.onCancel,color:"primary"},o("Cancel"))))},dg=e=>{let{translate:t}=(0,ue.useI18n)(),o=Ye(),r=e.request,n=r.securityClasses.includes(2),a=r.securityClasses.includes(1),l=r.securityClasses.includes(0),s=r.securityClasses.includes(7),i=r.clientSideAuth,[c,f]=y.default.useState(n),[d,g]=y.default.useState(a),[b,B]=y.default.useState(l),[k,m]=y.default.useState(s),[p,C]=y.default.useState(i),v=()=>{let h=[];c&&h.push(2),d&&h.push(1),b&&h.push(0),k&&h.push(7);let P={securityClasses:h,clientSideAuth:p};e.grantSecurityClasses(P)};return y.default.createElement(y.default.Fragment,null,y.default.createElement(qe.default,{className:o.grantRoot},y.default.createElement(W.default,{variant:"body1"},t("Please choose which of the following security classes to grant to the new node.")),y.default.createElement(W.default,{variant:"caption",className:o.grantHeadline},t("At least one must be granted or the key exchange will be canceled.")),y.default.createElement(kt.default,{label:y.default.createElement(y.default.Fragment,null,y.default.createElement("b",null,"S2 Access Control",!n&&y.default.createElement(y.default.Fragment,null," (",t("not requested"),")")),y.default.createElement("br",null),y.default.createElement(W.default,{variant:"caption"},t("Example:")," ",t("Door locks, garage doors"),", ...")),disabled:!n,control:y.default.createElement(Ct.default,{checked:c,onChange:(h,P)=>f(P)})}),y.default.createElement(kt.default,{label:y.default.createElement(y.default.Fragment,null,y.default.createElement("b",null,"S2 Authenticated",!a&&y.default.createElement(y.default.Fragment,null," (",t("not requested"),")")),y.default.createElement("br",null),y.default.createElement(W.default,{variant:"caption"},t("Example:")," ",t("Lighting, sensors, security systems"),", ...")),disabled:!a,control:y.default.createElement(Ct.default,{checked:d,onChange:(h,P)=>g(P)})}),y.default.createElement(kt.default,{label:y.default.createElement(y.default.Fragment,null,y.default.createElement("b",null,"S2 Unauthenticated",!l&&y.default.createElement(y.default.Fragment,null," (",t("not requested"),")")),y.default.createElement("br",null),y.default.createElement(W.default,{variant:"caption"},t("Like S2 Authenticated, but without verification that the correct device is included"))),disabled:!l,control:y.default.createElement(Ct.default,{checked:b,onChange:(h,P)=>B(P)})}),y.default.createElement(kt.default,{label:y.default.createElement(y.default.Fragment,null,y.default.createElement("b",null,"S0 Legacy",!s&&y.default.createElement(y.default.Fragment,null," (",t("not requested"),")")),y.default.createElement("br",null),y.default.createElement(W.default,{variant:"caption"},t("Example:")," ",t("Legacy door locks without S2 support"))),disabled:!s,control:y.default.createElement(Ct.default,{checked:k,onChange:(h,P)=>m(P)})}),y.default.createElement(kt.default,{className:o.grantCSA,label:y.default.createElement(y.default.Fragment,null,y.default.createElement("b",null,"Client Side Authentication",!i&&y.default.createElement(y.default.Fragment,null," (",t("not requested"),")")),y.default.createElement("br",null),y.default.createElement(W.default,{variant:"caption"},t("For devices without a DSK. Authentication of the inclusion happens on the device instead of in ioBroker."))),disabled:!i,control:y.default.createElement(Ct.default,{checked:p,onChange:(h,P)=>C(P)})})),y.default.createElement(je.default,null,y.default.createElement(re.default,{variant:"contained",onClick:v,color:"primary"},t("OK")),y.default.createElement(re.default,{variant:"contained",onClick:e.onCancel,color:"primary"},t("Cancel"))))},fg=e=>{let{translate:t}=(0,ue.useI18n)(),[o,r]=y.default.useState(""),[n,a]=y.default.useState(!1),l=f=>{let d=f.target.value.replace(/[^0-9]/g,"");r(d),a(!1)},s=()=>{o.length!==5&&a(!0)},i=()=>{o.length===5&&e.setPIN(o)},c=Ye();return y.default.createElement(y.default.Fragment,null,y.default.createElement(qe.default,{className:c.validateDSKRoot},y.default.createElement(W.default,{variant:"body1",className:c.strategyGridHeadline},t("Please enter the 5-digit PIN for your device and verify that the rest of the device-specific key (DSK) matches the one on your device or the manual.")),y.default.createElement("div",{className:c.validateDSKGrid},y.default.createElement(Nl.default,{autoFocus:!0,variant:"outlined",margin:"dense",inputProps:{maxLength:5,style:{textAlign:"center"}},value:o,error:!!n,onChange:l,onBlur:s,onKeyDown:f=>{f.key==="Enter"&&i(),f.key==="Escape"&&e.onCancel()}}),y.default.createElement(W.default,{variant:"body1"},e.dsk),y.default.createElement(W.default,{variant:"caption"},"PIN"),y.default.createElement(W.default,{variant:"caption"},"DSK"))),y.default.createElement(je.default,null,y.default.createElement(re.default,{disabled:o.length!==5,onClick:i,color:"primary"},t("OK")),y.default.createElement(re.default,{variant:"contained",onClick:e.onCancel,color:"primary"},t("Cancel"))))},mg=e=>{var s;let{translate:t}=(0,ue.useI18n)(),o=Ye(),r=e.lowSecurity?jn.default:pr.default,n=e.lowSecurity?t("Node %s was added insecurely!",e.nodeId.toString()):t("Node %s was added successfully!",e.nodeId.toString()),a=e.lowSecurity?t("There was an error during secure inclusion. To try again, exclude the node first."):t("Security class: %s",(s=e.securityClass)!=null?s:t("None")),l=t("The device is now being interviewed. It might take a while to show up.");return y.default.createElement(y.default.Fragment,null,y.default.createElement(qe.default,{className:o.resultRoot},y.default.createElement(r,{className:(0,hr.default)(o.resultIcon,e.lowSecurity?o.resultIconLowSecurity:o.resultIconOK)}),y.default.createElement(W.default,{variant:"body1",style:{fontWeight:"bold",fontSize:"125%"}},n),y.default.createElement(W.default,{variant:"body2"},a),y.default.createElement(W.default,{variant:"body2"},l)),y.default.createElement(je.default,null,y.default.createElement(re.default,{variant:"contained",onClick:e.onDone,color:"primary"},t("OK"))))},pg=e=>{let{translate:t}=(0,ue.useI18n)(),o=Ye();return y.default.createElement(y.default.Fragment,null,y.default.createElement(qe.default,{className:o.resultRoot},y.default.createElement(pr.default,{className:(0,hr.default)(o.resultIcon,o.resultIconOK)}),y.default.createElement(W.default,{variant:"body2"},t("Node %s was removed from the network!",e.nodeId.toString()))),y.default.createElement(je.default,null,y.default.createElement(re.default,{variant:"contained",onClick:e.onDone,color:"primary"},t("OK"))))},gg=e=>{let{translate:t}=(0,ue.useI18n)(),o=Ye(),r=e.success?pr.default:jn.default;return y.default.createElement(y.default.Fragment,null,y.default.createElement(qe.default,{className:o.resultRoot},y.default.createElement(r,{className:(0,hr.default)(o.resultIcon,e.success?o.resultIconOK:o.resultIconLowSecurity)}),y.default.createElement(W.default,{variant:"body1",style:{fontWeight:"bold",fontSize:"125%"}},e.title),y.default.createElement(W.default,{variant:"body2"},e.message)),y.default.createElement(je.default,null,y.default.createElement(re.default,{variant:"contained",onClick:e.onDone,color:"primary"},t("OK"))))},Al=e=>{let{translate:t}=(0,ue.useI18n)(),o=y.default.useMemo(()=>{switch(e.step){case 0:return y.default.createElement(lg,{selectStrategy:e.selectStrategy,onCancel:e.onCancel});case 1:return y.default.createElement(cg,{selectStrategy:e.selectStrategy,onCancel:e.onCancel});case 2:return y.default.createElement(ug,{onScan:e.onScan,onCancel:e.onCancel});case 3:return y.default.createElement(qn,{message:t("Put your device into inclusion mode"),onCancel:e.onCancel});case 4:return y.default.createElement(qn,{message:t("Put your device into exclusion mode"),onCancel:e.onCancel});case 5:return y.default.createElement(dg,{grantSecurityClasses:e.grantSecurityClasses,request:e.request,onCancel:e.onCancel});case 6:return y.default.createElement(fg,{dsk:e.dsk,onCancel:e.onCancel,setPIN:e.setPIN});case 8:return y.default.createElement(mg,{nodeId:e.nodeId,lowSecurity:e.lowSecurity,securityClass:e.securityClass,onDone:e.onDone});case 9:return y.default.createElement(pg,{nodeId:e.nodeId,onDone:e.onDone});case 10:return y.default.createElement(gg,{title:e.title,message:e.message,success:e.success,onDone:e.onDone});case 7:return y.default.createElement(qn,{message:t("Communicating with the device, please be patient...")})}},[e.step]),r=y.default.useMemo(()=>{switch(e.step){case 0:case 3:case 5:case 6:case 8:case 7:case 2:return t("Include device");case 1:return t("Replace device");case 4:case 9:return t("Exclude device")}},[e.step]);return y.default.createElement(_l.default,{open:e.isOpen,onClose:e.onCancel,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",maxWidth:!1},y.default.createElement(Tl.default,{id:"alert-dialog-title"},r),o)};var jl=e=>{let{devices:t}=e,{alive:o,connected:r}=(0,ke.useAdapter)(),{namespace:n}=(0,ke.useGlobals)(),{translate:a}=(0,ke.useI18n)(),l=pe(),{showNotification:s}=(0,ke.useDialogs)(),[i,c]=ne.default.useState(!1),[f]=(0,ke.useIoBrokerState)({id:`${n}.info.inclusion`,defaultValue:!1}),[d,,g]=(0,ke.useIoBrokerState)({id:`${n}.info.exclusion`,defaultValue:!1}),[b]=(0,ke.useIoBrokerState)({id:`${n}.info.healingNetwork`,defaultValue:!1}),[B,k]=ne.default.useState({}),[m,p]=ne.default.useState(),[C,v]=ne.default.useState(!1),h=ne.default.useCallback(A=>{var N;console.log("on push",A),A.type==="inclusion"?(p(A.status),A.status.type==="done"&&v(!0)):A.type==="healing"&&(k((N=A.status.progress)!=null?N:{}),A.status.type==="done"&&s(a("Healing the network was successful!"),"success"))},[p,k,s]);So(h);let[P,S]=ne.default.useState(!1);ne.default.useEffect(()=>(o&&r&&!P&&(S(!0),l.subscribeStatistics()),()=>{P&&(S(!1),l.unsubscribeStatistics())}),[o,r,P]);async function I(){if(!b)try{k({}),await l.beginHealingNetwork()}catch(A){s(me(A),"error");return}}let _=[];if(t)for(let A of Object.keys(t)){let N=t[A];N&&_.push(N)}async function j(A){p({type:"chooseReplacementStrategy",nodeId:A}),v(!0)}let w=ne.default.useCallback(()=>{v(!1),setTimeout(()=>{p(void 0)},250)},[v,p]),D=(()=>{if(d)return{step:E.ExcludeDevice,onCancel:()=>{v(!1),setTimeout(()=>{g(!1)},250)}};if(!m&&!f)return{step:E.SelectInclusionStrategy,onCancel:()=>v(!1),selectStrategy:async(A,N)=>{if(A===Pe.QRCode){p({type:"scanQRCode"});return}try{await l.beginInclusion(A,N),p({type:"waitingForDevice"})}catch(Q){s(a("Failed to start inclusion"),"error")}}};if((m==null?void 0:m.type)==="chooseReplacementStrategy")return{step:E.SelectReplacementStrategy,onCancel:w,selectStrategy:async A=>{try{await l.replaceFailedNode(m.nodeId,A),p({type:"waitingForDevice"})}catch(N){s(a("Failed to start replacing the node"),"error")}}};if((m==null?void 0:m.type)==="scanQRCode")return{step:E.QRCode,onScan:async A=>{p({type:"busy"});try{let N=await l.scanQRCode(A,!0);N.type==="none"?(s(a("This is not a valid Z-Wave QR code"),"warning"),p({type:"scanQRCode"})):N.type==="SmartStart"?p({type:"resultMessage",success:!0,title:a("Added SmartStart device"),message:ne.default.createElement(ne.default.Fragment,null,a("Successfully added SmartStart device to provisioning list."),ne.default.createElement("br",null),a("It will be included automatically when it announces itself."))}):N.type==="S2"?p({type:"waitingForDevice"}):N.type==="included"?p({type:"resultMessage",success:!0,title:a("Already included"),message:a("The device is already included as Node %s",N.nodeId.toString())}):N.type==="provisioned"&&p({type:"resultMessage",success:!0,title:a("Already provisioned"),message:a("The device is already on the SmartStart provisioning list")})}catch(N){w(),s(a("Failed to scan QR code"),"error")}},onCancel:w};if(!m||m.type==="waitingForDevice")return{step:E.IncludeDevice,onCancel:()=>{v(!1),setTimeout(()=>{l.stopInclusion()},250)}};if(m.type==="busy")return{step:E.Busy,onCancel:()=>{}};if(m.type==="validateDSK")return{step:E.ValidateDSK,dsk:m.dsk,setPIN:A=>{l.validateDSK(A)},onCancel:()=>{l.validateDSK(!1)}};if(m.type==="grantSecurityClasses")return{step:E.GrantSecurityClasses,request:m.request,grantSecurityClasses:A=>{l.grantSecurityClasses(A)},onCancel:()=>{l.grantSecurityClasses(!1)}};if(m.type==="done")return{step:E.Result,nodeId:m.nodeId,lowSecurity:m.lowSecurity,securityClass:m.securityClass,onDone:w,onCancel:w};if(m.type==="exclusionDone")return{step:E.ExclusionResult,nodeId:m.nodeId,onDone:w,onCancel:w};if(m.type==="resultMessage")return{step:E.ResultMessage,message:m.message,success:m.success,title:m.title,onDone:w,onCancel:w}})(),x=f||!!m&&!d&&m.type!=="exclusionDone",T=d||!!m&&!f&&m.type!=="done"&&m.type!=="exclusionDone";return!o||!r?ne.default.createElement(ot,null):t?ne.default.createElement(ne.default.Fragment,null,ne.default.createElement(ps,{state:i?te.Busy:x?te.Including:T?te.Excluding:b?te.Healing:te.Idle,beginInclusion:()=>v(!0),beginExclusion:async()=>{await g(!0),v(!0)},healNetwork:I,cancelHealing:()=>l.stopHealingNetwork()}),ne.default.createElement(Ri,{isBusy:i||b,setBusy:c,devices:_,healingNetwork:b,networkHealProgress:B,replaceFailedNode:j}),D&&ne.default.createElement(Al,{isOpen:C,...D})):ne.default.createElement(Ml.default,null)};var jr=u(M());function yr(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}var ao=class extends Map{constructor(t,o=vg){super();if(Object.defineProperties(this,{_intern:{value:new Map},_key:{value:o}}),t!=null)for(let[r,n]of t)this.set(r,n)}get(t){return super.get(ql(this,t))}has(t){return super.has(ql(this,t))}set(t,o){return super.set(hg(this,t),o)}delete(t){return super.delete(yg(this,t))}};function ql({_intern:e,_key:t},o){let r=t(o);return e.has(r)?e.get(r):o}function hg({_intern:e,_key:t},o){let r=t(o);return e.has(r)?e.get(r):(e.set(r,o),o)}function yg({_intern:e,_key:t},o){let r=t(o);return e.has(r)&&(o=e.get(r),e.delete(r)),o}function vg(e){return e!==null&&typeof e=="object"?e.valueOf():e}function vr(e,t,o){e=+e,t=+t,o=(n=arguments.length)<2?(t=e,e=0,1):n<3?1:+o;for(var r=-1,n=Math.max(0,Math.ceil((t-e)/o))|0,a=new Array(n);++r<n;)a[r]=e+r*o;return a}var Fn=Math.abs,Bt=Math.cos,wt=Math.sin,Fl=Math.PI,so=Fl/2,On=Fl*2,Rn=Math.max,br=1e-12;function Ln(e,t){return Array.from({length:t-e},(o,r)=>e+r)}function bg(e){return function(t,o){return e(t.source.value+t.target.value,o.source.value+o.target.value)}}function zn(){return kg(!1,!1)}function kg(e,t){var o=0,r=null,n=null,a=null;function l(s){var i=s.length,c=new Array(i),f=Ln(0,i),d=new Array(i*i),g=new Array(i),b=0,B;s=Float64Array.from({length:i*i},t?(k,m)=>s[m%i][m/i|0]:(k,m)=>s[m/i|0][m%i]);for(let k=0;k<i;++k){let m=0;for(let p=0;p<i;++p)m+=s[k*i+p]+e*s[p*i+k];b+=c[k]=m}b=Rn(0,On-o*i)/b,B=b?o:On/i;{let k=0;r&&f.sort((m,p)=>r(c[m],c[p]));for(let m of f){let p=k;if(e){let C=Ln(~i+1,i).filter(v=>v<0?s[~v*i+m]:s[m*i+v]);n&&C.sort((v,h)=>n(v<0?-s[~v*i+m]:s[m*i+v],h<0?-s[~h*i+m]:s[m*i+h]));for(let v of C)if(v<0){let h=d[~v*i+m]||(d[~v*i+m]={source:null,target:null});h.target={index:m,startAngle:k,endAngle:k+=s[~v*i+m]*b,value:s[~v*i+m]}}else{let h=d[m*i+v]||(d[m*i+v]={source:null,target:null});h.source={index:m,startAngle:k,endAngle:k+=s[m*i+v]*b,value:s[m*i+v]}}g[m]={index:m,startAngle:p,endAngle:k,value:c[m]}}else{let C=Ln(0,i).filter(v=>s[m*i+v]||s[v*i+m]);n&&C.sort((v,h)=>n(s[m*i+v],s[m*i+h]));for(let v of C){let h;if(m<v?(h=d[m*i+v]||(d[m*i+v]={source:null,target:null}),h.source={index:m,startAngle:k,endAngle:k+=s[m*i+v]*b,value:s[m*i+v]}):(h=d[v*i+m]||(d[v*i+m]={source:null,target:null}),h.target={index:m,startAngle:k,endAngle:k+=s[m*i+v]*b,value:s[m*i+v]},m===v&&(h.source=h.target)),h.source&&h.target&&h.source.value<h.target.value){let P=h.source;h.source=h.target,h.target=P}}g[m]={index:m,startAngle:p,endAngle:k,value:c[m]}}k+=B}}return d=Object.values(d),d.groups=g,a?d.sort(a):d}return l.padAngle=function(s){return arguments.length?(o=Rn(0,s),l):o},l.sortGroups=function(s){return arguments.length?(r=s,l):r},l.sortSubgroups=function(s){return arguments.length?(n=s,l):n},l.sortChords=function(s){return arguments.length?(s==null?a=null:(a=bg(s))._=s,l):a&&a._},l}var En=Math.PI,Gn=2*En,xt=1e-6,Cg=Gn-xt;function Hn(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Ol(){return new Hn}Hn.prototype=Ol.prototype={constructor:Hn,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,o,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+o)+","+(this._y1=+r)},bezierCurveTo:function(e,t,o,r,n,a){this._+="C"+ +e+","+ +t+","+ +o+","+ +r+","+(this._x1=+n)+","+(this._y1=+a)},arcTo:function(e,t,o,r,n){e=+e,t=+t,o=+o,r=+r,n=+n;var a=this._x1,l=this._y1,s=o-e,i=r-t,c=a-e,f=l-t,d=c*c+f*f;if(n<0)throw new Error("negative radius: "+n);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(d>xt)if(!(Math.abs(f*s-i*c)>xt)||!n)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var g=o-a,b=r-l,B=s*s+i*i,k=g*g+b*b,m=Math.sqrt(B),p=Math.sqrt(d),C=n*Math.tan((En-Math.acos((B+d-k)/(2*m*p)))/2),v=C/p,h=C/m;Math.abs(v-1)>xt&&(this._+="L"+(e+v*c)+","+(t+v*f)),this._+="A"+n+","+n+",0,0,"+ +(f*g>c*b)+","+(this._x1=e+h*s)+","+(this._y1=t+h*i)}},arc:function(e,t,o,r,n,a){e=+e,t=+t,o=+o,a=!!a;var l=o*Math.cos(r),s=o*Math.sin(r),i=e+l,c=t+s,f=1^a,d=a?r-n:n-r;if(o<0)throw new Error("negative radius: "+o);this._x1===null?this._+="M"+i+","+c:(Math.abs(this._x1-i)>xt||Math.abs(this._y1-c)>xt)&&(this._+="L"+i+","+c),!!o&&(d<0&&(d=d%Gn+Gn),d>Cg?this._+="A"+o+","+o+",0,1,"+f+","+(e-l)+","+(t-s)+"A"+o+","+o+",0,1,"+f+","+(this._x1=i)+","+(this._y1=c):d>xt&&(this._+="A"+o+","+o+",0,"+ +(d>=En)+","+f+","+(this._x1=e+o*Math.cos(n))+","+(this._y1=t+o*Math.sin(n))))},rect:function(e,t,o,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +o+"v"+ +r+"h"+-o+"Z"},toString:function(){return this._}};var io=Ol;var Rl=Array.prototype.slice;function dt(e){return function(){return e}}function Bg(e){return e.source}function wg(e){return e.target}function Ll(e){return e.radius}function xg(e){return e.startAngle}function Pg(e){return e.endAngle}function Sg(){return 0}function _g(e){var t=Bg,o=wg,r=Ll,n=Ll,a=xg,l=Pg,s=Sg,i=null;function c(){var f,d=t.apply(this,arguments),g=o.apply(this,arguments),b=s.apply(this,arguments)/2,B=Rl.call(arguments),k=+r.apply(this,(B[0]=d,B)),m=a.apply(this,B)-so,p=l.apply(this,B)-so,C=+n.apply(this,(B[0]=g,B)),v=a.apply(this,B)-so,h=l.apply(this,B)-so;if(i||(i=f=io()),b>br&&(Fn(p-m)>b*2+br?p>m?(m+=b,p-=b):(m-=b,p+=b):m=p=(m+p)/2,Fn(h-v)>b*2+br?h>v?(v+=b,h-=b):(v-=b,h+=b):v=h=(v+h)/2),i.moveTo(k*Bt(m),k*wt(m)),i.arc(0,0,k,m,p),m!==v||p!==h)if(e){var P=+e.apply(this,arguments),S=C-P,I=(v+h)/2;i.quadraticCurveTo(0,0,S*Bt(v),S*wt(v)),i.lineTo(C*Bt(I),C*wt(I)),i.lineTo(S*Bt(h),S*wt(h))}else i.quadraticCurveTo(0,0,C*Bt(v),C*wt(v)),i.arc(0,0,C,v,h);if(i.quadraticCurveTo(0,0,k*Bt(m),k*wt(m)),i.closePath(),f)return i=null,f+""||null}return e&&(c.headRadius=function(f){return arguments.length?(e=typeof f=="function"?f:dt(+f),c):e}),c.radius=function(f){return arguments.length?(r=n=typeof f=="function"?f:dt(+f),c):r},c.sourceRadius=function(f){return arguments.length?(r=typeof f=="function"?f:dt(+f),c):r},c.targetRadius=function(f){return arguments.length?(n=typeof f=="function"?f:dt(+f),c):n},c.startAngle=function(f){return arguments.length?(a=typeof f=="function"?f:dt(+f),c):a},c.endAngle=function(f){return arguments.length?(l=typeof f=="function"?f:dt(+f),c):l},c.padAngle=function(f){return arguments.length?(s=typeof f=="function"?f:dt(+f),c):s},c.source=function(f){return arguments.length?(t=f,c):t},c.target=function(f){return arguments.length?(o=f,c):o},c.context=function(f){return arguments.length?(i=f==null?null:f,c):i},c}function Un(){return _g()}function zl(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}var $n=Symbol("implicit");function lo(){var e=new ao,t=[],o=[],r=$n;function n(a){let l=e.get(a);if(l===void 0){if(r!==$n)return r;e.set(a,l=t.push(a)-1)}return o[l%o.length]}return n.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new ao;for(let l of a)e.has(l)||e.set(l,t.push(l)-1);return n},n.range=function(a){return arguments.length?(o=Array.from(a),n):o.slice()},n.unknown=function(a){return arguments.length?(r=a,n):r},n.copy=function(){return lo(t,o).unknown(r)},zl.apply(n,arguments),n}function kr(e,t,o){e.prototype=t.prototype=o,o.constructor=e}function Vn(e,t){var o=Object.create(e.prototype);for(var r in t)o[r]=t[r];return o}function co(){}var uo=.7,Cr=1/uo,Ft="\\s*([+-]?\\d+)\\s*",fo="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fe="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Tg=/^#([0-9a-f]{3,8})$/,Ig=new RegExp("^rgb\\("+[Ft,Ft,Ft]+"\\)$"),Dg=new RegExp("^rgb\\("+[Fe,Fe,Fe]+"\\)$"),Ng=new RegExp("^rgba\\("+[Ft,Ft,Ft,fo]+"\\)$"),Ag=new RegExp("^rgba\\("+[Fe,Fe,Fe,fo]+"\\)$"),Mg=new RegExp("^hsl\\("+[fo,Fe,Fe]+"\\)$"),jg=new RegExp("^hsla\\("+[fo,Fe,Fe,fo]+"\\)$"),El={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};kr(co,mo,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Gl,formatHex:Gl,formatHsl:qg,formatRgb:Hl,toString:Hl});function Gl(){return this.rgb().formatHex()}function qg(){return Xl(this).formatHsl()}function Hl(){return this.rgb().formatRgb()}function mo(e){var t,o;return e=(e+"").trim().toLowerCase(),(t=Tg.exec(e))?(o=t[1].length,t=parseInt(t[1],16),o===6?Ul(t):o===3?new ye(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):o===8?Br(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):o===4?Br(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Ig.exec(e))?new ye(t[1],t[2],t[3],1):(t=Dg.exec(e))?new ye(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Ng.exec(e))?Br(t[1],t[2],t[3],t[4]):(t=Ag.exec(e))?Br(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Mg.exec(e))?Kl(t[1],t[2]/100,t[3]/100,1):(t=jg.exec(e))?Kl(t[1],t[2]/100,t[3]/100,t[4]):El.hasOwnProperty(e)?Ul(El[e]):e==="transparent"?new ye(NaN,NaN,NaN,0):null}function Ul(e){return new ye(e>>16&255,e>>8&255,e&255,1)}function Br(e,t,o,r){return r<=0&&(e=t=o=NaN),new ye(e,t,o,r)}function Fg(e){return e instanceof co||(e=mo(e)),e?(e=e.rgb(),new ye(e.r,e.g,e.b,e.opacity)):new ye}function Ot(e,t,o,r){return arguments.length===1?Fg(e):new ye(e,t,o,r==null?1:r)}function ye(e,t,o,r){this.r=+e,this.g=+t,this.b=+o,this.opacity=+r}kr(ye,Ot,Vn(co,{brighter:function(e){return e=e==null?Cr:Math.pow(Cr,e),new ye(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?uo:Math.pow(uo,e),new ye(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$l,formatHex:$l,formatRgb:Vl,toString:Vl}));function $l(){return"#"+Kn(this.r)+Kn(this.g)+Kn(this.b)}function Vl(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function Kn(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function Kl(e,t,o,r){return r<=0?e=t=o=NaN:o<=0||o>=1?e=t=NaN:t<=0&&(e=NaN),new Oe(e,t,o,r)}function Xl(e){if(e instanceof Oe)return new Oe(e.h,e.s,e.l,e.opacity);if(e instanceof co||(e=mo(e)),!e)return new Oe;if(e instanceof Oe)return e;e=e.rgb();var t=e.r/255,o=e.g/255,r=e.b/255,n=Math.min(t,o,r),a=Math.max(t,o,r),l=NaN,s=a-n,i=(a+n)/2;return s?(t===a?l=(o-r)/s+(o<r)*6:o===a?l=(r-t)/s+2:l=(t-o)/s+4,s/=i<.5?a+n:2-a-n,l*=60):s=i>0&&i<1?0:l,new Oe(l,s,i,e.opacity)}function Ql(e,t,o,r){return arguments.length===1?Xl(e):new Oe(e,t,o,r==null?1:r)}function Oe(e,t,o,r){this.h=+e,this.s=+t,this.l=+o,this.opacity=+r}kr(Oe,Ql,Vn(co,{brighter:function(e){return e=e==null?Cr:Math.pow(Cr,e),new Oe(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?uo:Math.pow(uo,e),new Oe(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,o=this.l,r=o+(o<.5?o:1-o)*t,n=2*o-r;return new ye(Xn(e>=240?e-240:e+120,n,r),Xn(e,n,r),Xn(e<120?e+240:e-120,n,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function Xn(e,t,o){return(e<60?t+(o-t)*e/60:e<180?o:e<240?t+(o-t)*(240-e)/60:t)*255}function Qn(e,t,o,r,n){var a=e*e,l=a*e;return((1-3*e+3*a-l)*t+(4-6*a+3*l)*o+(1+3*e+3*a-3*l)*r+l*n)/6}function Yl(e){var t=e.length-1;return function(o){var r=o<=0?o=0:o>=1?(o=1,t-1):Math.floor(o*t),n=e[r],a=e[r+1],l=r>0?e[r-1]:2*n-a,s=r<t-1?e[r+2]:2*a-n;return Qn((o-r/t)*t,l,n,a,s)}}function Wl(e){var t=e.length;return function(o){var r=Math.floor(((o%=1)<0?++o:o)*t),n=e[(r+t-1)%t],a=e[r%t],l=e[(r+1)%t],s=e[(r+2)%t];return Qn((o-r/t)*t,n,a,l,s)}}var Yn=e=>()=>e;function Og(e,t){return function(o){return e+o*t}}function Rg(e,t,o){return e=Math.pow(e,o),t=Math.pow(t,o)-e,o=1/o,function(r){return Math.pow(e+r*t,o)}}function Jl(e){return(e=+e)==1?wr:function(t,o){return o-t?Rg(t,o,e):Yn(isNaN(t)?o:t)}}function wr(e,t){var o=t-e;return o?Og(e,o):Yn(isNaN(e)?t:e)}var Lg=function e(t){var o=Jl(t);function r(n,a){var l=o((n=Ot(n)).r,(a=Ot(a)).r),s=o(n.g,a.g),i=o(n.b,a.b),c=wr(n.opacity,a.opacity);return function(f){return n.r=l(f),n.g=s(f),n.b=i(f),n.opacity=c(f),n+""}}return r.gamma=e,r}(1);function Zl(e){return function(t){var o=t.length,r=new Array(o),n=new Array(o),a=new Array(o),l,s;for(l=0;l<o;++l)s=Ot(t[l]),r[l]=s.r||0,n[l]=s.g||0,a[l]=s.b||0;return r=e(r),n=e(n),a=e(a),s.opacity=1,function(i){return s.r=r(i),s.g=n(i),s.b=a(i),s+""}}}var Wn=Zl(Yl),zg=Zl(Wl);function ec(e){for(var t=e.length/6|0,o=new Array(t),r=0;r<t;)o[r]="#"+e.slice(r*6,++r*6);return o}var tc=e=>Wn(e[e.length-1]);var xr=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(ec),Eg=tc(xr);var Pr="http://www.w3.org/1999/xhtml",Jn={svg:"http://www.w3.org/2000/svg",xhtml:Pr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Sr(e){var t=e+="",o=t.indexOf(":");return o>=0&&(t=e.slice(0,o))!=="xmlns"&&(e=e.slice(o+1)),Jn.hasOwnProperty(t)?{space:Jn[t],local:e}:e}function Gg(e){return function(){var t=this.ownerDocument,o=this.namespaceURI;return o===Pr&&t.documentElement.namespaceURI===Pr?t.createElement(e):t.createElementNS(o,e)}}function Hg(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function _r(e){var t=Sr(e);return(t.local?Hg:Gg)(t)}function Ug(){}function Tr(e){return e==null?Ug:function(){return this.querySelector(e)}}function oc(e){typeof e!="function"&&(e=Tr(e));for(var t=this._groups,o=t.length,r=new Array(o),n=0;n<o;++n)for(var a=t[n],l=a.length,s=r[n]=new Array(l),i,c,f=0;f<l;++f)(i=a[f])&&(c=e.call(i,i.__data__,f,a))&&("__data__"in i&&(c.__data__=i.__data__),s[f]=c);return new ee(r,this._parents)}function Zn(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function $g(){return[]}function rc(e){return e==null?$g:function(){return this.querySelectorAll(e)}}function Vg(e){return function(){return Zn(e.apply(this,arguments))}}function nc(e){typeof e=="function"?e=Vg(e):e=rc(e);for(var t=this._groups,o=t.length,r=[],n=[],a=0;a<o;++a)for(var l=t[a],s=l.length,i,c=0;c<s;++c)(i=l[c])&&(r.push(e.call(i,i.__data__,c,l)),n.push(i));return new ee(r,n)}function ac(e){return function(){return this.matches(e)}}function Ir(e){return function(t){return t.matches(e)}}var Kg=Array.prototype.find;function Xg(e){return function(){return Kg.call(this.children,e)}}function Qg(){return this.firstElementChild}function sc(e){return this.select(e==null?Qg:Xg(typeof e=="function"?e:Ir(e)))}var Yg=Array.prototype.filter;function Wg(){return Array.from(this.children)}function Jg(e){return function(){return Yg.call(this.children,e)}}function ic(e){return this.selectAll(e==null?Wg:Jg(typeof e=="function"?e:Ir(e)))}function lc(e){typeof e!="function"&&(e=ac(e));for(var t=this._groups,o=t.length,r=new Array(o),n=0;n<o;++n)for(var a=t[n],l=a.length,s=r[n]=[],i,c=0;c<l;++c)(i=a[c])&&e.call(i,i.__data__,c,a)&&s.push(i);return new ee(r,this._parents)}function Dr(e){return new Array(e.length)}function cc(){return new ee(this._enter||this._groups.map(Dr),this._parents)}function po(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}po.prototype={constructor:po,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function uc(e){return function(){return e}}function Zg(e,t,o,r,n,a){for(var l=0,s,i=t.length,c=a.length;l<c;++l)(s=t[l])?(s.__data__=a[l],r[l]=s):o[l]=new po(e,a[l]);for(;l<i;++l)(s=t[l])&&(n[l]=s)}function eh(e,t,o,r,n,a,l){var s,i,c=new Map,f=t.length,d=a.length,g=new Array(f),b;for(s=0;s<f;++s)(i=t[s])&&(g[s]=b=l.call(i,i.__data__,s,t)+"",c.has(b)?n[s]=i:c.set(b,i));for(s=0;s<d;++s)b=l.call(e,a[s],s,a)+"",(i=c.get(b))?(r[s]=i,i.__data__=a[s],c.delete(b)):o[s]=new po(e,a[s]);for(s=0;s<f;++s)(i=t[s])&&c.get(g[s])===i&&(n[s]=i)}function th(e){return e.__data__}function dc(e,t){if(!arguments.length)return Array.from(this,th);var o=t?eh:Zg,r=this._parents,n=this._groups;typeof e!="function"&&(e=uc(e));for(var a=n.length,l=new Array(a),s=new Array(a),i=new Array(a),c=0;c<a;++c){var f=r[c],d=n[c],g=d.length,b=oh(e.call(f,f&&f.__data__,c,r)),B=b.length,k=s[c]=new Array(B),m=l[c]=new Array(B),p=i[c]=new Array(g);o(f,d,k,m,p,b,t);for(var C=0,v=0,h,P;C<B;++C)if(h=k[C]){for(C>=v&&(v=C+1);!(P=m[v])&&++v<B;);h._next=P||null}}return l=new ee(l,r),l._enter=s,l._exit=i,l}function oh(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function fc(){return new ee(this._exit||this._groups.map(Dr),this._parents)}function mc(e,t,o){var r=this.enter(),n=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(n=t(n),n&&(n=n.selection())),o==null?a.remove():o(a),r&&n?r.merge(n).order():n}function pc(e){for(var t=e.selection?e.selection():e,o=this._groups,r=t._groups,n=o.length,a=r.length,l=Math.min(n,a),s=new Array(n),i=0;i<l;++i)for(var c=o[i],f=r[i],d=c.length,g=s[i]=new Array(d),b,B=0;B<d;++B)(b=c[B]||f[B])&&(g[B]=b);for(;i<n;++i)s[i]=o[i];return new ee(s,this._parents)}function gc(){for(var e=this._groups,t=-1,o=e.length;++t<o;)for(var r=e[t],n=r.length-1,a=r[n],l;--n>=0;)(l=r[n])&&(a&&l.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(l,a),a=l);return this}function hc(e){e||(e=rh);function t(d,g){return d&&g?e(d.__data__,g.__data__):!d-!g}for(var o=this._groups,r=o.length,n=new Array(r),a=0;a<r;++a){for(var l=o[a],s=l.length,i=n[a]=new Array(s),c,f=0;f<s;++f)(c=l[f])&&(i[f]=c);i.sort(t)}return new ee(n,this._parents).order()}function rh(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function yc(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function vc(){return Array.from(this)}function bc(){for(var e=this._groups,t=0,o=e.length;t<o;++t)for(var r=e[t],n=0,a=r.length;n<a;++n){var l=r[n];if(l)return l}return null}function kc(){let e=0;for(let t of this)++e;return e}function Cc(){return!this.node()}function Bc(e){for(var t=this._groups,o=0,r=t.length;o<r;++o)for(var n=t[o],a=0,l=n.length,s;a<l;++a)(s=n[a])&&e.call(s,s.__data__,a,n);return this}function nh(e){return function(){this.removeAttribute(e)}}function ah(e){return function(){this.removeAttributeNS(e.space,e.local)}}function sh(e,t){return function(){this.setAttribute(e,t)}}function ih(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function lh(e,t){return function(){var o=t.apply(this,arguments);o==null?this.removeAttribute(e):this.setAttribute(e,o)}}function ch(e,t){return function(){var o=t.apply(this,arguments);o==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,o)}}function wc(e,t){var o=Sr(e);if(arguments.length<2){var r=this.node();return o.local?r.getAttributeNS(o.space,o.local):r.getAttribute(o)}return this.each((t==null?o.local?ah:nh:typeof t=="function"?o.local?ch:lh:o.local?ih:sh)(o,t))}function Nr(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function uh(e){return function(){this.style.removeProperty(e)}}function dh(e,t,o){return function(){this.style.setProperty(e,t,o)}}function fh(e,t,o){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,o)}}function xc(e,t,o){return arguments.length>1?this.each((t==null?uh:typeof t=="function"?fh:dh)(e,t,o==null?"":o)):mh(this.node(),e)}function mh(e,t){return e.style.getPropertyValue(t)||Nr(e).getComputedStyle(e,null).getPropertyValue(t)}function ph(e){return function(){delete this[e]}}function gh(e,t){return function(){this[e]=t}}function hh(e,t){return function(){var o=t.apply(this,arguments);o==null?delete this[e]:this[e]=o}}function Pc(e,t){return arguments.length>1?this.each((t==null?ph:typeof t=="function"?hh:gh)(e,t)):this.node()[e]}function Sc(e){return e.trim().split(/^|\s+/)}function ea(e){return e.classList||new _c(e)}function _c(e){this._node=e,this._names=Sc(e.getAttribute("class")||"")}_c.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Tc(e,t){for(var o=ea(e),r=-1,n=t.length;++r<n;)o.add(t[r])}function Ic(e,t){for(var o=ea(e),r=-1,n=t.length;++r<n;)o.remove(t[r])}function yh(e){return function(){Tc(this,e)}}function vh(e){return function(){Ic(this,e)}}function bh(e,t){return function(){(t.apply(this,arguments)?Tc:Ic)(this,e)}}function Dc(e,t){var o=Sc(e+"");if(arguments.length<2){for(var r=ea(this.node()),n=-1,a=o.length;++n<a;)if(!r.contains(o[n]))return!1;return!0}return this.each((typeof t=="function"?bh:t?yh:vh)(o,t))}function kh(){this.textContent=""}function Ch(e){return function(){this.textContent=e}}function Bh(e){return function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}}function Nc(e){return arguments.length?this.each(e==null?kh:(typeof e=="function"?Bh:Ch)(e)):this.node().textContent}function wh(){this.innerHTML=""}function xh(e){return function(){this.innerHTML=e}}function Ph(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}}function Ac(e){return arguments.length?this.each(e==null?wh:(typeof e=="function"?Ph:xh)(e)):this.node().innerHTML}function Sh(){this.nextSibling&&this.parentNode.appendChild(this)}function Mc(){return this.each(Sh)}function _h(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function jc(){return this.each(_h)}function qc(e){var t=typeof e=="function"?e:_r(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Th(){return null}function Fc(e,t){var o=typeof e=="function"?e:_r(e),r=t==null?Th:typeof t=="function"?t:Tr(t);return this.select(function(){return this.insertBefore(o.apply(this,arguments),r.apply(this,arguments)||null)})}function Ih(){var e=this.parentNode;e&&e.removeChild(this)}function Oc(){return this.each(Ih)}function Dh(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Nh(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Rc(e){return this.select(e?Nh:Dh)}function Lc(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Ah(e){return function(t){e.call(this,t,this.__data__)}}function Mh(e){return e.trim().split(/^|\s+/).map(function(t){var o="",r=t.indexOf(".");return r>=0&&(o=t.slice(r+1),t=t.slice(0,r)),{type:t,name:o}})}function jh(e){return function(){var t=this.__on;if(!!t){for(var o=0,r=-1,n=t.length,a;o<n;++o)a=t[o],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function qh(e,t,o){return function(){var r=this.__on,n,a=Ah(t);if(r){for(var l=0,s=r.length;l<s;++l)if((n=r[l]).type===e.type&&n.name===e.name){this.removeEventListener(n.type,n.listener,n.options),this.addEventListener(n.type,n.listener=a,n.options=o),n.value=t;return}}this.addEventListener(e.type,a,o),n={type:e.type,name:e.name,value:t,listener:a,options:o},r?r.push(n):this.__on=[n]}}function zc(e,t,o){var r=Mh(e+""),n,a=r.length,l;if(arguments.length<2){var s=this.node().__on;if(s){for(var i=0,c=s.length,f;i<c;++i)for(n=0,f=s[i];n<a;++n)if((l=r[n]).type===f.type&&l.name===f.name)return f.value}return}for(s=t?qh:jh,n=0;n<a;++n)this.each(s(r[n],t,o));return this}function Ec(e,t,o){var r=Nr(e),n=r.CustomEvent;typeof n=="function"?n=new n(t,o):(n=r.document.createEvent("Event"),o?(n.initEvent(t,o.bubbles,o.cancelable),n.detail=o.detail):n.initEvent(t,!1,!1)),e.dispatchEvent(n)}function Fh(e,t){return function(){return Ec(this,e,t)}}function Oh(e,t){return function(){return Ec(this,e,t.apply(this,arguments))}}function Gc(e,t){return this.each((typeof t=="function"?Oh:Fh)(e,t))}function*Hc(){for(var e=this._groups,t=0,o=e.length;t<o;++t)for(var r=e[t],n=0,a=r.length,l;n<a;++n)(l=r[n])&&(yield l)}var ta=[null];function ee(e,t){this._groups=e,this._parents=t}function Rh(){return new ee([[document.documentElement]],ta)}function Lh(){return this}ee.prototype=Rh.prototype={constructor:ee,select:oc,selectAll:nc,selectChild:sc,selectChildren:ic,filter:lc,data:dc,enter:cc,exit:fc,join:mc,merge:pc,selection:Lh,order:gc,sort:hc,call:yc,nodes:vc,node:bc,size:kc,empty:Cc,each:Bc,attr:wc,style:xc,property:Pc,classed:Dc,text:Nc,html:Ac,raise:Mc,lower:jc,append:qc,insert:Fc,remove:Oc,clone:Rc,datum:Lc,on:zc,dispatch:Gc,[Symbol.iterator]:Hc};function oa(e){return typeof e=="string"?new ee([[document.querySelector(e)]],[document.documentElement]):new ee([[e]],ta)}function We(e){return function(){return e}}var ra=Math.abs,ie=Math.atan2,ft=Math.cos,Uc=Math.max,Ar=Math.min,Se=Math.sin,Pt=Math.sqrt,de=1e-12,Rt=Math.PI,go=Rt/2,$c=2*Rt;function Vc(e){return e>1?0:e<-1?Rt:Math.acos(e)}function na(e){return e>=1?go:e<=-1?-go:Math.asin(e)}function zh(e){return e.innerRadius}function Eh(e){return e.outerRadius}function Gh(e){return e.startAngle}function Hh(e){return e.endAngle}function Uh(e){return e&&e.padAngle}function $h(e,t,o,r,n,a,l,s){var i=o-e,c=r-t,f=l-n,d=s-a,g=d*i-f*c;if(!(g*g<de))return g=(f*(t-a)-d*(e-n))/g,[e+g*i,t+g*c]}function Mr(e,t,o,r,n,a,l){var s=e-o,i=t-r,c=(l?a:-a)/Pt(s*s+i*i),f=c*i,d=-c*s,g=e+f,b=t+d,B=o+f,k=r+d,m=(g+B)/2,p=(b+k)/2,C=B-g,v=k-b,h=C*C+v*v,P=n-a,S=g*k-B*b,I=(v<0?-1:1)*Pt(Uc(0,P*P*h-S*S)),_=(S*v-C*I)/h,j=(-S*C-v*I)/h,w=(S*v+C*I)/h,D=(-S*C+v*I)/h,x=_-m,T=j-p,A=w-m,N=D-p;return x*x+T*T>A*A+N*N&&(_=w,j=D),{cx:_,cy:j,x01:-f,y01:-d,x11:_*(n/P-1),y11:j*(n/P-1)}}function aa(){var e=zh,t=Eh,o=We(0),r=null,n=Gh,a=Hh,l=Uh,s=null;function i(){var c,f,d=+e.apply(this,arguments),g=+t.apply(this,arguments),b=n.apply(this,arguments)-go,B=a.apply(this,arguments)-go,k=ra(B-b),m=B>b;if(s||(s=c=io()),g<d&&(f=g,g=d,d=f),!(g>de))s.moveTo(0,0);else if(k>$c-de)s.moveTo(g*ft(b),g*Se(b)),s.arc(0,0,g,b,B,!m),d>de&&(s.moveTo(d*ft(B),d*Se(B)),s.arc(0,0,d,B,b,m));else{var p=b,C=B,v=b,h=B,P=k,S=k,I=l.apply(this,arguments)/2,_=I>de&&(r?+r.apply(this,arguments):Pt(d*d+g*g)),j=Ar(ra(g-d)/2,+o.apply(this,arguments)),w=j,D=j,x,T;if(_>de){var A=na(_/d*Se(I)),N=na(_/g*Se(I));(P-=A*2)>de?(A*=m?1:-1,v+=A,h-=A):(P=0,v=h=(b+B)/2),(S-=N*2)>de?(N*=m?1:-1,p+=N,C-=N):(S=0,p=C=(b+B)/2)}var Q=g*ft(p),se=g*Se(p),Te=d*ft(h),_t=d*Se(h);if(j>de){var ko=g*ft(C),Co=g*Se(C),Qr=d*ft(v),Yr=d*Se(v),Re;if(k<Rt&&(Re=$h(Q,se,Qr,Yr,ko,Co,Te,_t))){var Wr=Q-Re[0],Jr=se-Re[1],Zr=ko-Re[0],en=Co-Re[1],ha=1/Se(Vc((Wr*Zr+Jr*en)/(Pt(Wr*Wr+Jr*Jr)*Pt(Zr*Zr+en*en)))/2),ya=Pt(Re[0]*Re[0]+Re[1]*Re[1]);w=Ar(j,(d-ya)/(ha-1)),D=Ar(j,(g-ya)/(ha+1))}}S>de?D>de?(x=Mr(Qr,Yr,Q,se,g,D,m),T=Mr(ko,Co,Te,_t,g,D,m),s.moveTo(x.cx+x.x01,x.cy+x.y01),D<j?s.arc(x.cx,x.cy,D,ie(x.y01,x.x01),ie(T.y01,T.x01),!m):(s.arc(x.cx,x.cy,D,ie(x.y01,x.x01),ie(x.y11,x.x11),!m),s.arc(0,0,g,ie(x.cy+x.y11,x.cx+x.x11),ie(T.cy+T.y11,T.cx+T.x11),!m),s.arc(T.cx,T.cy,D,ie(T.y11,T.x11),ie(T.y01,T.x01),!m))):(s.moveTo(Q,se),s.arc(0,0,g,p,C,!m)):s.moveTo(Q,se),!(d>de)||!(P>de)?s.lineTo(Te,_t):w>de?(x=Mr(Te,_t,ko,Co,d,-w,m),T=Mr(Q,se,Qr,Yr,d,-w,m),s.lineTo(x.cx+x.x01,x.cy+x.y01),w<j?s.arc(x.cx,x.cy,w,ie(x.y01,x.x01),ie(T.y01,T.x01),!m):(s.arc(x.cx,x.cy,w,ie(x.y01,x.x01),ie(x.y11,x.x11),!m),s.arc(0,0,d,ie(x.cy+x.y11,x.cx+x.x11),ie(T.cy+T.y11,T.cx+T.x11),m),s.arc(T.cx,T.cy,w,ie(T.y11,T.x11),ie(T.y01,T.x01),!m))):s.arc(0,0,d,h,v,m)}if(s.closePath(),c)return s=null,c+""||null}return i.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+n.apply(this,arguments)+ +a.apply(this,arguments))/2-Rt/2;return[ft(f)*c,Se(f)*c]},i.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:We(+c),i):e},i.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:We(+c),i):t},i.cornerRadius=function(c){return arguments.length?(o=typeof c=="function"?c:We(+c),i):o},i.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:We(+c),i):r},i.startAngle=function(c){return arguments.length?(n=typeof c=="function"?c:We(+c),i):n},i.endAngle=function(c){return arguments.length?(a=typeof c=="function"?c:We(+c),i):a},i.padAngle=function(c){return arguments.length?(l=typeof c=="function"?c:We(+c),i):l},i.context=function(c){return arguments.length?(s=c==null?null:c,i):s},i}function Kc(e,t){let o=new Array(t.length).fill(0).map(()=>new Array(t.length).fill(0));function r(w,D){w==null||D==null||(o[w][D]=o[D][w]=1)}let n=new Map;for(let w=0;w<t.length;w++)n.set(t[w].id,w);for(let w of t)for(let D of w.neighbors)r(n.get(w.id),n.get(D));let a=w=>w.reduce((D,x)=>D+x,0),l=Math.max(...o.map(a));l===0&&(l=1);let s=new Set;for(let w=0;w<o.length;w++){let D=o[w];a(D)===0?(D[w]=1/l,s.add(t[w].id)):o[w]=D.map(T=>T/l)}let i=1.5,c=a(o[0]);o[0]=o[0].map(w=>w*i/c);let f=a(o.map(a)),d=600,g=600,b=Math.min(d,g)*.5-150,B=b-20,k=Math.min(.15,Math.PI/2/t.length),m=2*Math.PI-t.length*k,p=.5*m*(i/f),C=oa(e).append("svg").attr("preserveAspectRatio","xMidYMid meet").attr("viewBox",`${-d/2} ${-g/2} ${d} ${g}`).append("g").attr("transform",`rotate(-${(p*(180/Math.PI)).toFixed(2)})`),v=zn().padAngle(k).sortChords(yr).sortSubgroups(()=>1)(o),h=aa().innerRadius(B).outerRadius(b),P=Un().radius(B),S=lo().domain(vr(t.length-1)).range(xr[Math.max(3,Math.min(11,t.length))]);function I(w){return"linkGrad-"+w.source.index+"-"+w.target.index}let _=C.append("defs").selectAll("linearGradient").data(v).enter().append("linearGradient").attr("id",I).attr("gradientUnits","userSpaceOnUse").attr("x1",function(w,D){return B*Math.cos((w.source.endAngle-w.source.startAngle)/2+w.source.startAngle-Math.PI/2)}).attr("y1",function(w,D){return B*Math.sin((w.source.endAngle-w.source.startAngle)/2+w.source.startAngle-Math.PI/2)}).attr("x2",function(w,D){return B*Math.cos((w.target.endAngle-w.target.startAngle)/2+w.target.startAngle-Math.PI/2)}).attr("y2",function(w,D){return B*Math.sin((w.target.endAngle-w.target.startAngle)/2+w.target.startAngle-Math.PI/2)});_.append("stop").attr("offset","0%").attr("stop-color",w=>S(w.source.index)),_.append("stop").attr("offset","100%").attr("stop-color",w=>S(w.target.index));let j=C.selectAll("g").data(v.groups).enter().append("g").attr("class","node");j.append("path").style("fill",w=>S(w.index)).attr("d",h),j.append("text").each(w=>w.angle=(w.startAngle+w.endAngle)/2).attr("class",(w,D)=>`node-id${s.has(t[D].id)?" disconnected":""}`).attr("text-anchor",w=>w.angle-p>Math.PI?"end":null).attr("dominant-baseline","middle").attr("transform",w=>"rotate("+(w.angle*180/Math.PI-90)+")translate("+(b+10)+")"+(w.angle-p>Math.PI?"rotate(180)":"")).text((w,D)=>`Node ${t[D].id}`),C.datum(v).append("g").selectAll("path").data(w=>w.filter(D=>D.source.index!==D.target.index&&D.source.value>0&&D.target.value>0)).enter().append("path").attr("class",w=>`chord chord-${w.source.index} chord-${w.target.index}`).style("fill",w=>`url(#${I(w)})`).attr("d",P)}var Xc=u(Z());var Qc=u(J()),Vh=(0,Qc.makeStyles)(e=>({map:{"& text":{fill:e.palette.text.primary}}})),Yc=()=>{let{alive:e,connected:t}=(0,Xc.useAdapter)(),o=pe(),r=Vh();return jr.default.useEffect(()=>{e&&t&&o.getNetworkMap().then(n=>{Kc("#map",n)}).catch(n=>{console.error(n)})},[e,t,o]),e&&t?jr.default.createElement("div",{id:"map",className:r.map}):jr.default.createElement(ot,null)};var ld=u(Z()),St=u(Fd());var qr=u(Z()),Fr=u(M());var kk=Fr.default.createContext({devices:{},async updateDevices(){}}),Wc=/Node_(\d+)$/,Jc=/Node_(\d+)\.ready$/,Zc=/Node_(\d+)\.status$/;function eu(){let e=(0,qr.useConnection)(),[t,o]=Fr.default.useState(),{namespace:r}=(0,qr.useGlobals)(),n=pe(),a=async(c,f)=>{if(!(!c.startsWith(r)||!Wc.test(c)))if(f){if(f.type==="device"&&typeof f.native.id=="number"){let d=f.native.id,g={id:c,value:f,status:await n.getNodeStatus(d),ready:await n.getNodeReady(d)};g.ready&&await n.updateEndpointsAndAssociations(d,g),o(b=>({...b,[d]:g}))}}else{let d=parseInt(Wc.exec(c)[1],10);o(g=>{let b={...g};return delete b[d],b})}},l=async c=>{let f={};await n.updateEndpointsAndAssociations(c,f),o(d=>{let g=d==null?void 0:d[c];return g?(g.endpoints=f.endpoints,{...d,[c]:g}):d})},s=async(c,f)=>{if(!!c.startsWith(r)&&!(!f||!f.ack)){if(c.match(Zc)){let d=parseInt(Zc.exec(c)[1],10);o(g=>{let b=g==null?void 0:g[d];return b?(b.status=f.val,{...g,[d]:b}):g})}else if(c.match(Jc)){let d=parseInt(Jc.exec(c)[1],10);o(g=>{let b=g==null?void 0:g[d];return b?(b.ready=f.val,b.ready&&setTimeout(()=>void l(d),0),{...g,[d]:b}):g})}}};async function i(){o(await n.loadDevices({status:!0,associations:!0,ready:!0}))}return Fr.default.useEffect(()=>((async()=>{await i(),e.subscribeObject(`${r}.Node_*`,a),e.subscribeState(`${r}.Node_*`,s)})(),()=>{e.unsubscribeObject(`${r}.Node_*`,a),e.unsubscribeState(`${r}.Node_*`,s)}),[]),[t,i]}var le=u(M()),ku=u(Z()),Cu=u(J()),Bu=u(Gt()),wu=u(sn()),xu=u(wo()),Pu=u(et()),Su=u(Po()),Hr=u(Ze()),_u=u(xo());var G=u(M()),ru=u(ba()),nu=u(Ut()),au=u(Z()),su=u(Bo()),zr=u(Ee()),Er=u(ze()),iu=u(Vt()),lu=u(cn()),cu=u(Io()),uu=u(Kt()),ho=u(Ze()),sa=u(et()),du=u(J());function Or(e,t){return e.length!==t.length?!1:e.every((o,r)=>o===t[r])}var ia=u(ln());var fu=u(tu()),mu=u(ou()),pu=u(Le()),gu=u(ve()),r1=G.default.createElement(fu.default,{fontSize:"small"}),n1=G.default.createElement(mu.default,{fontSize:"small"}),a1=(0,du.makeStyles)(e=>({input:{width:"100%",margin:0},cell:{padding:e.spacing(1,2)},cellWithId:{paddingTop:0},idCell:{color:e.palette.text.hint,padding:e.spacing(1,2,0,2),border:0}})),la=e=>{var h,P;let{translate:t}=(0,au.useI18n)(),[o,r]=G.default.useState((h=e.name)!=null?h:""),[n,a]=G.default.useState((P=e.nodeIds)!=null?P:[]),[l,s]=G.default.useState(!1),[i,c]=G.default.useState(!1),[f,d]=G.default.useState(!1);G.default.useEffect(()=>{var S;c(o!==""&&o!==e.name||!Or(n,(S=e.nodeIds)!=null?S:[])),s(!!o&&n.length>1)},[o,e.name,n,e.nodeIds]);let g=e.selectableNodes.map(S=>({value:S.value.native.id,label:`${t("Node")} ${(0,nu.padStart)(S.value.native.id.toString(),3,"0")}`})),b=g.filter(S=>n.includes(S.value)),B=e.name==null&&e.nodeIds==null;async function k(){try{d(!0),await e.save(o,n.sort(),e.objectId),B&&m()}catch(S){alert(t("The group could not be saved!")),console.error(`The group could not be saved! Reason: ${me(S)}`),m()}finally{d(!1)}}function m(){var S,I;r((S=e.name)!=null?S:""),a((I=e.nodeIds)!=null?I:[])}async function p(){if(!!e.delete)try{d(!0),await e.delete()}catch(S){alert(t("The group could not be deleted!")),console.error(`The group could not be deleted! Reason: ${me(S)}`),m()}finally{d(!1)}}let C=a1(),v=(0,gu.default)(C.cell,e.objectId?C.cellWithId:void 0);return G.default.createElement(G.default.Fragment,null,!!e.objectId&&G.default.createElement(sa.default,null,G.default.createElement(ho.default,{className:C.idCell,colSpan:3},G.default.createElement(pu.default,{variant:"caption"},"ID: ",e.objectId))),G.default.createElement(sa.default,null,G.default.createElement(ho.default,{className:v},G.default.createElement(ia.default,{variant:"outlined",margin:"dense",className:C.input,value:o,placeholder:t("Enter group name"),onChange:S=>r(S.target.value)})),G.default.createElement(ho.default,{className:v},G.default.createElement(Ba,{className:C.input,multiple:!0,size:"small",options:g,disableCloseOnSelect:!0,getOptionLabel:S=>S.label,value:b,onChange:(S,I)=>a(I.map(_=>_.value)),renderOption:(S,{selected:I})=>G.default.createElement(G.default.Fragment,null,G.default.createElement(ru.default,{icon:r1,checkedIcon:n1,style:{marginRight:8},checked:I}),S.label),renderInput:S=>G.default.createElement(ia.default,{...S,className:C.input,variant:"outlined",placeholder:b.length===0?t("Select at least 2 nodes"):void 0})})),G.default.createElement(ho.default,{className:v},G.default.createElement(su.default,{variant:"contained",color:"primary",style:{flex:"1 0 auto"}},G.default.createElement(zr.default,{title:t("Save group")},G.default.createElement(Er.default,{disabled:f||!l||!i,onClick:()=>k()},B?G.default.createElement(iu.default,null):G.default.createElement(lu.default,null))),G.default.createElement(zr.default,{title:t("Undo changes")},G.default.createElement(Er.default,{disabled:f||!i,onClick:()=>m()},G.default.createElement(cu.default,null))),!B&&G.default.createElement(zr.default,{title:t("Delete group")},G.default.createElement(Er.default,{disabled:f,onClick:()=>p()},G.default.createElement(uu.default,null)))))))};var Tu=u(Ht());var hu=u(Pd()),Gr=u(Z()),yo=u(M()),ca=/\.Group_([^\.]+)$/;function yu(e){return e.type!=="device"||!(0,hu.isArray)(e.native.nodeIds)?!1:e.native.nodeIds.every(t=>typeof t=="number")}function s1(e){return e.replace(/[ .:,;µ<>|!"§$%&\\/()=?#+'~*]+/gi,"_")}function vu(e){return typeof e.common.name=="string"&&!!e.common.name?e.common.name:e._id.match(ca)[1]}function bu(){let e=(0,Gr.useConnection)(),[t,o]=yo.default.useState(),{namespace:r}=(0,Gr.useGlobals)(),n=async(i,c)=>{!i.startsWith(r)||!ca.test(i)||(c?yu(c)&&o(f=>({...f,[i]:c})):o(f=>{let d={...f};return delete d[i],d}))};async function a(){let i=await e.getObjectView(`${r}.Group_`,`${r}.Group_\u9999`,"device"),c={};for(let[f,d]of Object.entries(i))!f.startsWith(r)||!ca.test(f)||!yu(d)||(c[f]=d);o(c)}let l=yo.default.useCallback(async(i,c,f)=>{let d=f!=null?f:`${r}.Group_${s1(i)}`;await e.setObject(d,{type:"device",common:{name:i},native:{multicast:!0,nodeIds:c}})},[r,e]),s=yo.default.useCallback(async i=>{await e.delObject(i._id)},[e]);return yo.default.useEffect(()=>((async()=>{await a(),e.subscribeObject(`${r}.Group_*`,n)})(),()=>{e.unsubscribeObject(`${r}.Group_*`,n)}),[]),{groups:t,saveGroup:l,deleteGroup:s}}var i1=(0,Cu.makeStyles)(e=>({root:{width:"100%",marginTop:e.spacing(2)},container:{overflowY:"auto"},empty:{textAlign:"center",fontStyle:"italic"}})),Iu=e=>{let t=i1(),{translate:o}=(0,ku.useI18n)(),{groups:r,saveGroup:n,deleteGroup:a}=bu();if(!e.devices||!r)return le.default.createElement(Tu.default,null);let l=Object.values(e.devices).filter(s=>{let{isControllerNode:i,secure:c}=s.value.native;return!i&&!c});return le.default.createElement(le.default.Fragment,null,le.default.createElement(ct,{severity:"info"},o("no multicast S0"),le.default.createElement("br",null),o("no multicast S2")),le.default.createElement(Bu.default,{className:t.root,elevation:2},le.default.createElement(wu.default,{className:t.container},le.default.createElement(xu.default,{style:{tableLayout:"auto"}},le.default.createElement(Su.default,null,le.default.createElement(Pu.default,null,le.default.createElement(Hr.default,{style:{width:"50%"}},o("Group name")),le.default.createElement(Hr.default,{style:{width:"50%"}},o("Nodes")),le.default.createElement(Hr.default,{style:{minWidth:"200px"}}))),le.default.createElement(_u.default,null,Object.entries(r).map(([s,i])=>le.default.createElement(la,{objectId:i._id,key:`group-${s}`,name:vu(i),nodeIds:i.native.nodeIds,selectableNodes:l,save:n,delete:()=>a(i)})),le.default.createElement(la,{name:void 0,nodeIds:void 0,selectableNodes:l,save:n}))))))};var $u=u(J()),Lt=u(Z()),R=u(M()),Vu=u(Gt()),Ku=u(sn()),Xu=u(wo()),Qu=u(et()),Yu=u(Po()),bo=u(Ze()),Wu=u(xo());var qu=u(J()),Fu=u(Z()),L=u(M()),da=u(et()),pt=u(Ze()),Ou=u(Bo()),Ru=u(Mu()),vo=u(ju());var Vr=u(Ee()),Kr=u(ze()),Lu=u(Vt()),zu=u(cn()),Eu=u(Io()),Gu=u(ln()),fa=u(ve());var Hu=u(Kt()),ma=u(Le()),b1=(0,qu.makeStyles)(e=>({cell:{padding:e.spacing(1,2)},withAdditionalData:{"& td":{paddingTop:0}},additionalData:{"& td":{color:e.palette.text.hint,borderBottom:0,paddingBottom:0}},idCell:{textAlign:"center"},input:{width:"100%",margin:0},securityClassToggle:{lineHeight:1.1}})),pa=e=>{var P,S;let t=b1(),{translate:o}=(0,Fu.useI18n)(),[r,n]=L.default.useState((P=e.dsk)!=null?P:""),[a,l]=L.default.useState(e.securityClasses),[s,i]=L.default.useState(!1),[c,f]=L.default.useState(!1),[d,g]=L.default.useState(!1);L.default.useEffect(()=>{f(r!==""&&r!==e.dsk||!Or(a,e.securityClasses)),i((0,Ru.isValidDSK)(r)&&a.length>0)},[r,e.dsk,a,e.securityClasses]);let b=I=>{let _=I.target.value.replace(/[^0-9]/g,"");_.length>40&&(_=_.substr(0,40));let j="";for(let w=1;w<=8;w++)_.length>w*5?j+=_.substr((w-1)*5,5)+"-":j+=_.substr((w-1)*5);n(j)},B=(I,_)=>{l(_)},k=e.dsk==null,m=e.nodeId!=null,p=()=>{var I;n((I=e.dsk)!=null?I:""),l(e.securityClasses)},C=async()=>{if(!!e.unprovision)try{g(!0),await e.unprovision()}catch(I){alert(o("The node could not be unprovisioned!")),console.error(`The node could not be unprovisioned! Reason: ${me(I)}`),p()}finally{g(!1)}},v=async()=>{try{g(!0),await e.provision(r,a,e.additionalData),k&&p()}catch(I){alert(o("The node could not be provisioned!")),console.error(`The node could not be provisioned! Reason: ${me(I)}`),p()}finally{g(!1)}},h;return e.additionalData&&(e.additionalData.manufacturer&&(h=e.additionalData.manufacturer),e.additionalData.label&&(h&&(h+=" "),h+=e.additionalData.label),e.additionalData.description&&(h&&(h+=" - "),h+=e.additionalData.description)),L.default.createElement(L.default.Fragment,null,!!h&&L.default.createElement(da.default,{className:t.additionalData},L.default.createElement(pt.default,{className:t.cell}),L.default.createElement(pt.default,{className:t.cell,colSpan:2},L.default.createElement(ma.default,{variant:"caption"},h)),L.default.createElement(pt.default,{className:t.cell})),L.default.createElement(da.default,{className:(0,fa.default)(!!h&&t.withAdditionalData)},L.default.createElement(pt.default,{className:(0,fa.default)(t.cell,t.idCell)},(S=e.nodeId)!=null?S:""),L.default.createElement(pt.default,{className:t.cell},m?L.default.createElement(ma.default,{variant:"body2"},r):L.default.createElement(Gu.default,{variant:"outlined",margin:"dense",className:t.input,value:r,placeholder:"00000-11111-22222-33333-44444-55555-66666-77777",disabled:d,onChange:b})),L.default.createElement(pt.default,{className:t.cell},L.default.createElement(ro,{value:a,onChange:B,size:"small"},L.default.createElement($e,{value:vo.SecurityClass.S2_AccessControl,color:"secondary",className:t.securityClassToggle,disabled:m||d},"S2 AC"),L.default.createElement($e,{value:vo.SecurityClass.S2_Authenticated,className:t.securityClassToggle,disabled:m||d},"S2 Auth"),L.default.createElement($e,{value:vo.SecurityClass.S2_Unauthenticated,className:t.securityClassToggle,disabled:m||d},"S2 Unauth"),L.default.createElement($e,{value:vo.SecurityClass.S0_Legacy,className:t.securityClassToggle,disabled:m||d},"S0 Legacy"))),L.default.createElement(pt.default,{className:t.cell},L.default.createElement(Ou.default,{variant:"contained",color:"primary",style:{flex:"1 0 auto"}},L.default.createElement(Vr.default,{title:o("Provision node")},L.default.createElement(Kr.default,{disabled:d||!s||!c||m,onClick:v},k?L.default.createElement(Lu.default,null):L.default.createElement(zu.default,null))),L.default.createElement(Vr.default,{title:o("Undo changes")},L.default.createElement(Kr.default,{disabled:d||!c||m,onClick:p},L.default.createElement(Eu.default,null))),!k&&L.default.createElement(Vr.default,{title:o("Unprovision")},L.default.createElement(Kr.default,{disabled:d,onClick:()=>C()},L.default.createElement(Hu.default,null)))))))};var Ju=u(Ht());var Zu=u(Le()),ga=u(ze()),ed=u(Uu()),td=u(on());var od=u(an()),rd=u(nn()),nd=u(rn());var P1=(0,$u.makeStyles)(e=>({root:{width:"100%",display:"flex",flexFlow:"column nowrap",gap:e.spacing(2)},container:{overflowY:"auto"},scannerDialogContent:{display:"flex",flexFlow:"column nowrap",alignItems:"center",gap:e.spacing(1)}})),ad=e=>{let t=P1(),{translate:o}=(0,Lt.useI18n)(),r=pe(),{showModal:n}=(0,Lt.useDialogs)(),{alive:a,connected:l}=(0,Lt.useAdapter)(),[s,i]=R.default.useState(),c=R.default.useCallback(async()=>{let P=await r.getProvisioningEntries();P.sort((S,I)=>{let _=S.nodeId||999999,j=I.nodeId||999999,w=_-j;return w||S.dsk.localeCompare(I.dsk)}),i(P)},[r,i]);R.default.useEffect(()=>{c()},[r,e.devices]);let f=R.default.useCallback(async(P,S,I)=>{await r.provisionSmartStartNode(P,S,I),await c()},[r,c]),d=R.default.useCallback(async P=>{!await n(o("Unprovision node?"),o("Do you really want to remove this node from the provisioning list?"))||(await r.unprovisionSmartStartNode(P),await c())},[r,c]),g=R.default.useCallback(async(P,S,I,_)=>{P!==S&&await r.unprovisionSmartStartNode(P),await r.provisionSmartStartNode(S,I,_),await c()},[r,c]),[b,B]=R.default.useState(),[k,m]=R.default.useState(),[p,C]=R.default.useState(!1),v=()=>{C(!1),setTimeout(()=>B(void 0),250)},h=async P=>{try{let S=await r.scanQRCode(P,!1);if(S.type==="none")B({message:o("This is not a valid Z-Wave QR code"),severity:"error"});else if(S.type==="SmartStart"){let{dsk:I,securityClasses:_,...j}=S;await f(I,_,j),m(I),B({message:o("Node successfully added to provisioning list"),severity:"success"})}else if(S.type==="S2")B({message:o("This is not a SmartStart QR code. Use the devices tab to include this node."),severity:"warning"});else if(S.type==="included")B({message:o("The device is already included as Node %s",S.nodeId.toString()),severity:"info"});else if(S.type==="provisioned"){if(S.dsk===k)return;B({message:o("This node is already on the SmartStart provisioning list"),severity:"info"})}}catch(S){}};return!a||!l?R.default.createElement(ot,null):!s||!e.devices?R.default.createElement(Ju.default,null):R.default.createElement("div",{className:t.root},R.default.createElement(Zu.default,{variant:"body1"},o("Define here which SmartStart capable nodes should be part of the network by entering their DSK and granting security classes."),R.default.createElement("br",null),o("When a node announces itself, it will automatically be included within 10 minutes.")),R.default.createElement(ct,{severity:"info"},o("Removing an entry does not automatically exclude the node.")),R.default.createElement("div",null,R.default.createElement(ga.default,{variant:"contained",color:"primary",startIcon:R.default.createElement(ed.default,null),onClick:()=>C(!0)},o("Scan QR Code")),R.default.createElement(td.default,{open:p,onClose:v,maxWidth:!1},R.default.createElement(od.default,null,o("Scan QR Code")),R.default.createElement(rd.default,{className:t.scannerDialogContent},b&&R.default.createElement(ct,{severity:b.severity},b.message),R.default.createElement(mr,{onDetect:h})),R.default.createElement(nd.default,null,R.default.createElement(ga.default,{variant:"contained",onClick:v,color:"primary"},o("Close"))))),R.default.createElement(Vu.default,{elevation:2},R.default.createElement(Ku.default,{className:t.container},R.default.createElement(Xu.default,{style:{tableLayout:"auto"}},R.default.createElement(Yu.default,null,R.default.createElement(Qu.default,null,R.default.createElement(bo.default,{style:{width:"50px"},align:"center"},"#"),R.default.createElement(bo.default,{style:{minWidth:"480px"}},o("DSK")),R.default.createElement(bo.default,null,o("Security classes")),R.default.createElement(bo.default,{style:{minWidth:"200px"}}))),R.default.createElement(Wu.default,null,s.map(P=>{let{nodeId:S,dsk:I,securityClasses:_,...j}=P;return R.default.createElement(pa,{nodeId:P.nodeId,key:`entry-${P.dsk}`,dsk:P.dsk,securityClasses:P.securityClasses,additionalData:j,provision:(w,D,x)=>g(P.dsk,w,D,x),unprovision:()=>d(P.dsk)})}),R.default.createElement(pa,{nodeId:void 0,dsk:void 0,securityClasses:[],provision:f}))))))};function zt({error:e,resetErrorBoundary:t}){return z.default.createElement("div",{role:"alert"},z.default.createElement("p",null,"Something went wrong:"),z.default.createElement("pre",null,e.stack),z.default.createElement("button",{onClick:t},"Try again"))}var S1={en:Sd(),de:_d(),ru:Td(),pt:Id(),nl:Dd(),fr:Nd(),it:Ad(),es:Md(),pl:jd(),"zh-cn":qd()},_1=z.default.memo(()=>{let[e,t]=z.default.useState(1),{translate:o}=(0,ld.useI18n)(),r=(l,s)=>{t(s)},[n,a]=eu();return z.default.createElement(z.default.Fragment,null,z.default.createElement(_e.AppBar,{position:"static"},z.default.createElement(_e.Tabs,{value:e,onChange:r},z.default.createElement(_e.Tab,{label:o("Devices")}),z.default.createElement(_e.Tab,{label:o("SmartStart")}),z.default.createElement(_e.Tab,{label:o("Groups")}),z.default.createElement(_e.Tab,{label:o("Associations")}),z.default.createElement(_e.Tab,{label:o("Z-Wave Logs")}),z.default.createElement(_e.Tab,{label:o("Network map")}))),z.default.createElement(ht,{value:e,index:0},z.default.createElement(St.ErrorBoundary,{FallbackComponent:zt},z.default.createElement(jl,{devices:n}))),z.default.createElement(ht,{value:e,index:1},z.default.createElement(St.ErrorBoundary,{FallbackComponent:zt},z.default.createElement(ad,{devices:n}))),z.default.createElement(ht,{value:e,index:2},z.default.createElement(St.ErrorBoundary,{FallbackComponent:zt},z.default.createElement(Iu,{devices:n}))),z.default.createElement(ht,{value:e,index:3},z.default.createElement(St.ErrorBoundary,{FallbackComponent:zt},z.default.createElement(as,{devices:n,updateDevices:a}))),z.default.createElement(ht,{value:e,index:4},z.default.createElement(St.ErrorBoundary,{FallbackComponent:zt},z.default.createElement(xa,null))),z.default.createElement(ht,{value:e,index:5},z.default.createElement(St.ErrorBoundary,{FallbackComponent:zt},z.default.createElement(Yc,null))))});sd.default.render(z.default.createElement(id.IoBrokerApp,{name:"zwave2",translations:S1},z.default.createElement(_1,null)),document.getElementById("root"));
//# sourceMappingURL=tab.js.map
